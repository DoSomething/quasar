{"results": [{"node": {"name": "snowplow_base_event", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "phoenix_events/snowplow_base_event.sql", "original_file_path": "models/phoenix_events/snowplow_base_event.sql", "package_name": "ds_dbt", "raw_sql": "SELECT \n    event_id AS event_id,\n    app_id AS event_source,\n    collector_tstamp AS event_datetime,\n    se_property AS event_name,\n    \"event\" AS event_type,\n    page_urlhost AS host,\n    page_urlpath AS \"path\",\n    page_urlquery AS query_parameters,\n    se_category,\n    se_action,\n    se_label,\n    domain_sessionid AS session_id,\n    domain_sessionidx AS session_counter,\n    dvce_type AS browser_size,\n    user_id AS northstar_id,\n    domain_userid AS device_id,\n    refr_urlhost AS referrer_host,\n    refr_urlpath AS referrer_path,\n    refr_source AS referrer_source\n  FROM {{ env_var('FT_SNOWPLOW') }}.\"event\"\n  WHERE event_id NOT IN\n  (SELECT event_id\n   FROM {{ env_var('FT_SNOWPLOW') }}.ua_parser_context u\n   WHERE u.useragent_family SIMILAR TO\n   '%(bot|crawl|slurp|spider|archiv|spinn|sniff|seo|audit|survey|pingdom|worm|capture|(browser|screen)shots|analyz|index|thumb|check|facebook|YandexBot|Twitterbot|a_archiver|facebookexternalhit|Bingbot|Googlebot|Baiduspider|360(Spider|User-agent)|Ghost)%')", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.snowplow_base_event", "empty": false, "fqn": ["ds_dbt", "phoenix_events", "snowplow_base_event"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS event_index ON {{ this }}(event_id)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "snowplow_base_event"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "snowplow_base_event", "columns": {"event_id": {"name": "event_id", "description": "This is a unique identifier for each event"}, "event_source": {"name": "event_source", "description": "Application source for event (eg. Phoenix, Northstar)"}, "event_datetime": {"name": "event_datetime", "description": "When the event occurred in UTC (eg. 2018-01-01 12:00:00)"}, "event_name": {"name": "event_name", "description": "Name of the event (eg. northstar_submitted_register, https://docs.google.com/spreadsheets/d/1lm-fGrIm85nUTxSojqyCt_Ehmm1zEbViFhKpxcJiz1A/edit#gid=406441516)"}, "event_type": {"name": "event_type", "description": "Type of event (pv = 'Page View', se = 'Structured Event')"}, "host": {"name": "host", "description": "URL host where event occurred (eg. www.dosomething.org or identity.dosomething.org)"}, "path": {"name": "path", "description": "URL path event occurred at (eg. /login or /us/campaigns/huddle-for-heroes)"}, "query_parameters": {"name": "query_parameters", "description": "Optional query parameters for the request (eg. query=huddle)"}, "se_category": {"name": "se_category", "description": "Category of event (eg. focused_field, authentication) - Custom structured event"}, "se_action": {"name": "se_action", "description": "Action performed / event name (eg. form_submitted, action_failed) - Custom structured event"}, "se_label": {"name": "se_label", "description": "The object of the action (eg. first_name, register, voter_reg_status) - Custom structured event"}, "session_id": {"name": "session_id", "description": "Unique identifier of the user's session"}, "session_counter": {"name": "session_counter", "description": "How many sessions a user has started"}, "browser_size": {"name": "browser_size", "description": "Which type of browser a user is using (eg. Mobile, Desktop)"}, "northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "device_id": {"name": "device_id", "description": "ID of the device used"}, "referrer_host": {"name": "referrer_host", "description": "URL host of the referring site (eg. google.com)"}, "referrer_path": {"name": "referrer_path", "description": "URL path from referring site (eg. /10-stats-on-teen-drug-and-alcohol-use/)"}, "referrer_source": {"name": "referrer_source", "description": "Referrer source name (eg. Google, Facebook)"}}, "description": "Table that extracts and cleans up relevant columns from raw DS web clickstream data.", "patch_path": "models/phoenix_events/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "event_id", "column_name": "event_id"}, {"documentation_package": "", "documentation_name": "event_source", "column_name": "event_source"}, {"documentation_package": "", "documentation_name": "event_datetime", "column_name": "event_datetime"}, {"documentation_package": "", "documentation_name": "event_name", "column_name": "event_name"}, {"documentation_package": "", "documentation_name": "event_type", "column_name": "event_type"}, {"documentation_package": "", "documentation_name": "host", "column_name": "host"}, {"documentation_package": "", "documentation_name": "path", "column_name": "path"}, {"documentation_package": "", "documentation_name": "query_parameters", "column_name": "query_parameters"}, {"documentation_package": "", "documentation_name": "se_category", "column_name": "se_category"}, {"documentation_package": "", "documentation_name": "se_action", "column_name": "se_action"}, {"documentation_package": "", "documentation_name": "se_label", "column_name": "se_label"}, {"documentation_package": "", "documentation_name": "session_id", "column_name": "session_id"}, {"documentation_package": "", "documentation_name": "session_counter", "column_name": "session_counter"}, {"documentation_package": "", "documentation_name": "browser_size", "column_name": "browser_size"}, {"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "device_id", "column_name": "device_id"}, {"documentation_package": "", "documentation_name": "referrer_host", "column_name": "referrer_host"}, {"documentation_package": "", "documentation_name": "referrer_path", "column_name": "referrer_path"}, {"documentation_package": "", "documentation_name": "referrer_source", "column_name": "referrer_source"}], "compiled": true, "compiled_sql": "SELECT \n    event_id AS event_id,\n    app_id AS event_source,\n    collector_tstamp AS event_datetime,\n    se_property AS event_name,\n    \"event\" AS event_type,\n    page_urlhost AS host,\n    page_urlpath AS \"path\",\n    page_urlquery AS query_parameters,\n    se_category,\n    se_action,\n    se_label,\n    domain_sessionid AS session_id,\n    domain_sessionidx AS session_counter,\n    dvce_type AS browser_size,\n    user_id AS northstar_id,\n    domain_userid AS device_id,\n    refr_urlhost AS referrer_host,\n    refr_urlpath AS referrer_path,\n    refr_source AS referrer_source\n  FROM ft_snowplow.\"event\"\n  WHERE event_id NOT IN\n  (SELECT event_id\n   FROM ft_snowplow.ua_parser_context u\n   WHERE u.useragent_family SIMILAR TO\n   '%(bot|crawl|slurp|spider|archiv|spinn|sniff|seo|audit|survey|pingdom|worm|capture|(browser|screen)shots|analyz|index|thumb|check|facebook|YandexBot|Twitterbot|a_archiver|facebookexternalhit|Bingbot|Googlebot|Baiduspider|360(Spider|User-agent)|Ghost)%')", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT \n    event_id AS event_id,\n    app_id AS event_source,\n    collector_tstamp AS event_datetime,\n    se_property AS event_name,\n    \"event\" AS event_type,\n    page_urlhost AS host,\n    page_urlpath AS \"path\",\n    page_urlquery AS query_parameters,\n    se_category,\n    se_action,\n    se_label,\n    domain_sessionid AS session_id,\n    domain_sessionidx AS session_counter,\n    dvce_type AS browser_size,\n    user_id AS northstar_id,\n    domain_userid AS device_id,\n    refr_urlhost AS referrer_host,\n    refr_urlpath AS referrer_path,\n    refr_source AS referrer_source\n  FROM ft_snowplow.\"event\"\n  WHERE event_id NOT IN\n  (SELECT event_id\n   FROM ft_snowplow.ua_parser_context u\n   WHERE u.useragent_family SIMILAR TO\n   '%(bot|crawl|slurp|spider|archiv|spinn|sniff|seo|audit|survey|pingdom|worm|capture|(browser|screen)shots|analyz|index|thumb|check|facebook|YandexBot|Twitterbot|a_archiver|facebookexternalhit|Bingbot|Googlebot|Baiduspider|360(Spider|User-agent)|Ghost)%')", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/phoenix_events/snowplow_base_event.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.12040495872497559, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.556360Z", "completed_at": "2020-01-30T16:41:07.566404Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.566551Z", "completed_at": "2020-01-30T16:41:07.569625Z"}]}, {"node": {"name": "snowplow_payload_event", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "phoenix_events/snowplow_payload_event.sql", "original_file_path": "models/phoenix_events/snowplow_payload_event.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n    event_id,\n    payload::jsonb #>> '{utmSource}' AS utm_source,\n    payload::jsonb #>> '{utmMedium}' AS utm_medium,\n    payload::jsonb #>> '{utmCampaign}' AS utm_campaign,\n    payload::jsonb #>> '{url}' AS url,\n    payload::jsonb #>> '{campaignId}' AS campaign_id,\n    payload::jsonb #>> '{modalType}' AS modal_type,\n    payload::jsonb #>> '{searchQuery}' AS search_query,\n    payload::jsonb #>> '{contextSource}' AS context_source,\n    _fivetran_synced AS ft_timestamp\n  FROM {{ env_var('FT_SNOWPLOW') }}.snowplow_event", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.snowplow_payload_event", "empty": false, "fqn": ["ds_dbt", "phoenix_events", "snowplow_payload_event"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS payload_event_id ON {{ this }}(event_id)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "snowplow_payload_event"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "snowplow_payload_event", "columns": {"event_id": {"name": "event_id", "description": "This is a unique identifier for each event"}, "utm_source": {"name": "utm_source", "description": "Tracks where the traffic is coming from. (eg. scholarship_listing, Facebook)"}, "utm_medium": {"name": "utm_medium", "description": "How the traffic got to the platform (eg. referral, CPC)"}, "utm_campaign": {"name": "utm_campaign", "description": "Tracks which campaign the traffic was generated by. Shows up in Google Analytics as Campaign Name (eg. editorial_newsletter)"}, "url": {"name": "url", "description": "URL of campaign (eg. https://dosome.click/nyn5m7)"}, "campaign_id": {"name": "campaign_id", "description": "Internal campaign id from contentful"}, "modal_type": {"name": "modal_type", "description": "NULL or SURVEY_MODAL"}, "ft_timestamp": {"name": "ft_timestamp", "description": "When the event occurred in UTC (eg. 2018-01-01 12:00:00)"}}, "description": "Table containing extra data from events in snowplow_base_event table", "patch_path": "models/phoenix_events/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "event_id", "column_name": "event_id"}, {"documentation_package": "", "documentation_name": "utm_source", "column_name": "utm_source"}, {"documentation_package": "", "documentation_name": "utm_medium", "column_name": "utm_medium"}, {"documentation_package": "", "documentation_name": "utm_campaign", "column_name": "utm_campaign"}, {"documentation_package": "", "documentation_name": "url", "column_name": "url"}, {"documentation_package": "", "documentation_name": "modal_type", "column_name": "modal_type"}, {"documentation_package": "", "documentation_name": "event_datetime", "column_name": "ft_timestamp"}], "compiled": true, "compiled_sql": "SELECT\n    event_id,\n    payload::jsonb #>> '{utmSource}' AS utm_source,\n    payload::jsonb #>> '{utmMedium}' AS utm_medium,\n    payload::jsonb #>> '{utmCampaign}' AS utm_campaign,\n    payload::jsonb #>> '{url}' AS url,\n    payload::jsonb #>> '{campaignId}' AS campaign_id,\n    payload::jsonb #>> '{modalType}' AS modal_type,\n    payload::jsonb #>> '{searchQuery}' AS search_query,\n    payload::jsonb #>> '{contextSource}' AS context_source,\n    _fivetran_synced AS ft_timestamp\n  FROM ft_snowplow.snowplow_event", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n    event_id,\n    payload::jsonb #>> '{utmSource}' AS utm_source,\n    payload::jsonb #>> '{utmMedium}' AS utm_medium,\n    payload::jsonb #>> '{utmCampaign}' AS utm_campaign,\n    payload::jsonb #>> '{url}' AS url,\n    payload::jsonb #>> '{campaignId}' AS campaign_id,\n    payload::jsonb #>> '{modalType}' AS modal_type,\n    payload::jsonb #>> '{searchQuery}' AS search_query,\n    payload::jsonb #>> '{contextSource}' AS context_source,\n    _fivetran_synced AS ft_timestamp\n  FROM ft_snowplow.snowplow_event", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/phoenix_events/snowplow_payload_event.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010852813720703125, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.573156Z", "completed_at": "2020-01-30T16:41:07.581599Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.581750Z", "completed_at": "2020-01-30T16:41:07.583506Z"}]}, {"node": {"name": "campaign_info", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "campaign_info/campaign_info.sql", "original_file_path": "models/campaign_info/campaign_info.sql", "package_name": "ds_dbt", "raw_sql": "SELECT \n\tc.id AS campaign_id,\n\tc.campaign_run_id,\n\tc.internal_title AS campaign_name,\n\tc.cause AS campaign_cause,\n\tc.start_date AS campaign_run_start_date,\n\tc.end_date AS campaign_run_end_date,\n\tc.created_at AS campaign_created_date,\n\tCOALESCE(i.campaign_node_id, c.id) AS campaign_node_id,\n\ti.campaign_node_id_title,\n\ti.campaign_run_id_title,\n\ti.campaign_action_type,\n\tCOALESCE(c.cause, i.campaign_cause_type) AS campaign_cause_type,\n\ti.campaign_noun,\n\ti.campaign_verb,\n\ti.campaign_cta\nFROM {{ env_var('FT_ROGUE') }}.campaigns c\nLEFT JOIN {{ env_var('CAMPAIGN_INFO_ASHES_SNAPSHOT') }}  i ON i.campaign_run_id = c.campaign_run_id\nWHERE i.campaign_language = 'en' OR i.campaign_language IS NULL", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.campaign_info", "empty": false, "fqn": ["ds_dbt", "campaign_info", "campaign_info"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS campaign_info_i ON {{ this }} (campaign_run_id, campaign_id)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "campaign_info"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "campaign_info", "columns": {"campaign_id": {"name": "campaign_id", "description": "This is a unique identifier for the campaign"}, "campaign_run_id": {"name": "campaign_run_id", "description": "Unique identifier for the campaign run"}, "campaign_name": {"name": "campaign_name", "description": "Name of the campaign"}, "campaign_cause": {"name": "campaign_cause", "description": "Campaign cause (eg. Mental Health, Education)"}, "campaign_run_start_date": {"name": "campaign_run_start_date", "description": "Start date of the campaign run"}, "campaign_run_end_date": {"name": "campaign_run_end_date", "description": "End date of the campaign run"}, "campaign_created_date": {"name": "campaign_created_date", "description": "When the campaign was created in UTC (eg. 2018-01-01 12:00:00)"}, "campaign_node_id": {"name": "campaign_node_id", "description": "This is a unique identifier for the campaign"}, "campaign_node_id_title": {"name": "campaign_node_id_title", "description": "Campaign title"}, "campaign_run_id_title": {"name": "campaign_run_id_title", "description": "Title of the campaign run"}, "campaign_action_type": {"name": "campaign_action_type", "description": "Campaign action type (eg. Make Something, Share Something)"}, "campaign_cause_type": {"name": "campaign_cause_type", "description": "Campaign cause type (eg. Mental Health, Education)"}, "campaign_noun": {"name": "campaign_noun", "description": "Noun applicable to the user's action"}, "campaign_verb": {"name": "campaign_verb", "description": "Verb describing the action the user should take"}, "campaign_cta": {"name": "campaign_cta", "description": "Campaign's call to action"}}, "description": "A table containing information about campaigns", "patch_path": "models/campaign_info/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_id"}, {"documentation_package": "", "documentation_name": "campaign_run_id", "column_name": "campaign_run_id"}, {"documentation_package": "", "documentation_name": "campaign_name", "column_name": "campaign_name"}, {"documentation_package": "", "documentation_name": "campaign_cause", "column_name": "campaign_cause"}, {"documentation_package": "", "documentation_name": "campaign_run_start_date", "column_name": "campaign_run_start_date"}, {"documentation_package": "", "documentation_name": "campaign_run_end_date", "column_name": "campaign_run_end_date"}, {"documentation_package": "", "documentation_name": "campaign_created_date", "column_name": "campaign_created_date"}, {"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_node_id"}, {"documentation_package": "", "documentation_name": "campaign_node_id_title", "column_name": "campaign_node_id_title"}, {"documentation_package": "", "documentation_name": "campaign_run_id_title", "column_name": "campaign_run_id_title"}, {"documentation_package": "", "documentation_name": "campaign_action_type", "column_name": "campaign_action_type"}, {"documentation_package": "", "documentation_name": "campaign_cause_type", "column_name": "campaign_cause_type"}, {"documentation_package": "", "documentation_name": "campaign_noun", "column_name": "campaign_noun"}, {"documentation_package": "", "documentation_name": "campaign_verb", "column_name": "campaign_verb"}, {"documentation_package": "", "documentation_name": "campaign_cta", "column_name": "campaign_cta"}], "compiled": true, "compiled_sql": "SELECT \n\tc.id AS campaign_id,\n\tc.campaign_run_id,\n\tc.internal_title AS campaign_name,\n\tc.cause AS campaign_cause,\n\tc.start_date AS campaign_run_start_date,\n\tc.end_date AS campaign_run_end_date,\n\tc.created_at AS campaign_created_date,\n\tCOALESCE(i.campaign_node_id, c.id) AS campaign_node_id,\n\ti.campaign_node_id_title,\n\ti.campaign_run_id_title,\n\ti.campaign_action_type,\n\tCOALESCE(c.cause, i.campaign_cause_type) AS campaign_cause_type,\n\ti.campaign_noun,\n\ti.campaign_verb,\n\ti.campaign_cta\nFROM ft_dosomething_rogue.campaigns c\nLEFT JOIN public.campaign_info_ashes_snapshot  i ON i.campaign_run_id = c.campaign_run_id\nWHERE i.campaign_language = 'en' OR i.campaign_language IS NULL", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT \n\tc.id AS campaign_id,\n\tc.campaign_run_id,\n\tc.internal_title AS campaign_name,\n\tc.cause AS campaign_cause,\n\tc.start_date AS campaign_run_start_date,\n\tc.end_date AS campaign_run_end_date,\n\tc.created_at AS campaign_created_date,\n\tCOALESCE(i.campaign_node_id, c.id) AS campaign_node_id,\n\ti.campaign_node_id_title,\n\ti.campaign_run_id_title,\n\ti.campaign_action_type,\n\tCOALESCE(c.cause, i.campaign_cause_type) AS campaign_cause_type,\n\ti.campaign_noun,\n\ti.campaign_verb,\n\ti.campaign_cta\nFROM ft_dosomething_rogue.campaigns c\nLEFT JOIN public.campaign_info_ashes_snapshot  i ON i.campaign_run_id = c.campaign_run_id\nWHERE i.campaign_language = 'en' OR i.campaign_language IS NULL", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/campaign_info/campaign_info.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.01225900650024414, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.589013Z", "completed_at": "2020-01-30T16:41:07.595193Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.595334Z", "completed_at": "2020-01-30T16:41:07.597630Z"}]}, {"node": {"name": "messages_flattened", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "gambit_messages/messages_flattened.sql", "original_file_path": "models/gambit_messages/messages_flattened.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n    agent_id AS agent_id,\n    attachments->0->>'contentType' AS attachment_content_type,\n    attachments->0->>'url' AS attachment_url,\n    broadcast_id AS broadcast_id,\n    campaign_id AS campaign_id,\n    conversation_id AS conversation_id,\n    created_at as created_at,\n    direction AS direction,\n    _id AS message_id,\n    macro AS macro,\n    match AS match,\n    metadata #>> '{delivery,deliveredAt}' AS carrier_delivered_at,\n    metadata #>> '{delivery,failureData,code}' as carrier_failure_code,\n    (metadata #> '{delivery}' ->> 'totalSegments')::INT AS total_segments,\n    platform_message_id as platform_message_id,\n    template AS template,\n    text AS text,\n    topic AS topic,\n    user_id AS user_id\n  FROM {{ env_var('FT_GAMBIT') }}.messages", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.messages_flattened", "empty": false, "fqn": ["ds_dbt", "gambit_messages", "messages_flattened"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS messages_user_id ON {{ this }}(user_id)", "transaction": true, "index": 0}, {"sql": "CREATE INDEX IF NOT EXISTS platform_message_id ON {{ this }}(platform_message_id)", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "messages_flattened"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "messages_flattened", "columns": {"agent_id": {"name": "agent_id", "description": "If set, the content type of the picture the member is sending us. Exp. image/png."}, "attachment_content_type": {"name": "attachment_content_type", "description": "If set, the handle of the Front agent this outbound support message is from."}, "attachment_url": {"name": "attachment_url", "description": "If set, link to the picture sent by the member."}, "broadcast_id": {"name": "broadcast_id", "description": "If set, this message was an outbound broadcast (when direction == 'outbound-api-send'), or the User's reply to an outbound broadcast (when direction == 'inbound')"}, "campaign_id": {"name": "campaign_id", "description": "If set, holds a reference to the **last** campaign topic the member's conversation was in. This is useful to allow members to talk to Gambit and get quick responses (through Rivescript), without Gambit completely forgetting what state the member's interaction with a campaign topic was in. 'This is a unique identifier for the campaign'"}, "conversation_id": {"name": "conversation_id", "description": "Conversation the Message belongs to."}, "created_at": {"name": "created_at", "description": "Message's created date."}, "direction": {"name": "direction", "description": "Describes if the message is being received (inbound) or being sent (outbound-*)."}, "message_id": {"name": "message_id", "description": "Unique identifier for a Message (MongoDB id)."}, "macro": {"name": "macro", "description": "If set, this message is part of this macro's workflow. Example: subscription status updates, voting plan submission, aswering a multichoice broadcast, etc."}, "match": {"name": "match", "description": "Rivescript trigger matched by inbound text."}, "carrier_delivered_at": {"name": "carrier_delivered_at", "description": "Date when we received a delivery confirmation from the carrier."}, "carrier_failure_code": {"name": "carrier_failure_code", "description": "Error code reported by the carrier (Only for outbound messages)."}, "total_segments": {"name": "total_segments", "description": "Number of chunks the message is broken into by the SMS API."}, "platform_message_id": {"name": "platform_message_id", "description": "The Message identifier per platform."}, "template": {"name": "template", "description": "If set, template of outbound message sent (e.g. askQuantity, completedMenu)."}, "text": {"name": "text", "description": "Body of the message."}, "topic": {"name": "topic", "description": "Holds a reference to the **last** campaign topic the member's conversation was in. This is useful to allow members to talk to Gambit and get quick responses (through Rivescript), without Gambit completely forgetting what state the member's interaction with a campaign topic was in."}, "user_id": {"name": "user_id", "description": "The Northstar id of the member."}}, "description": "Messages which nested values have been flattened for easier querying.", "patch_path": "models/gambit_messages/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "agent_id", "column_name": "agent_id"}, {"documentation_package": "", "documentation_name": "attachment_content_type", "column_name": "attachment_content_type"}, {"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_id"}, {"documentation_package": "", "documentation_name": "topic", "column_name": "topic"}], "compiled": true, "compiled_sql": "SELECT\n    agent_id AS agent_id,\n    attachments->0->>'contentType' AS attachment_content_type,\n    attachments->0->>'url' AS attachment_url,\n    broadcast_id AS broadcast_id,\n    campaign_id AS campaign_id,\n    conversation_id AS conversation_id,\n    created_at as created_at,\n    direction AS direction,\n    _id AS message_id,\n    macro AS macro,\n    match AS match,\n    metadata #>> '{delivery,deliveredAt}' AS carrier_delivered_at,\n    metadata #>> '{delivery,failureData,code}' as carrier_failure_code,\n    (metadata #> '{delivery}' ->> 'totalSegments')::INT AS total_segments,\n    platform_message_id as platform_message_id,\n    template AS template,\n    text AS text,\n    topic AS topic,\n    user_id AS user_id\n  FROM ft_gambit_conversations_api.messages", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n    agent_id AS agent_id,\n    attachments->0->>'contentType' AS attachment_content_type,\n    attachments->0->>'url' AS attachment_url,\n    broadcast_id AS broadcast_id,\n    campaign_id AS campaign_id,\n    conversation_id AS conversation_id,\n    created_at as created_at,\n    direction AS direction,\n    _id AS message_id,\n    macro AS macro,\n    match AS match,\n    metadata #>> '{delivery,deliveredAt}' AS carrier_delivered_at,\n    metadata #>> '{delivery,failureData,code}' as carrier_failure_code,\n    (metadata #> '{delivery}' ->> 'totalSegments')::INT AS total_segments,\n    platform_message_id as platform_message_id,\n    template AS template,\n    text AS text,\n    topic AS topic,\n    user_id AS user_id\n  FROM ft_gambit_conversations_api.messages", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/gambit_messages/messages_flattened.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011391162872314453, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.604234Z", "completed_at": "2020-01-30T16:41:07.609877Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.610015Z", "completed_at": "2020-01-30T16:41:07.611811Z"}]}, {"node": {"name": "northstar_users_raw", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "users_table/northstar_users_raw.sql", "original_file_path": "models/users_table/northstar_users_raw.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n\tnus._id AS northstar_id,\n\tnus.country,\n\tnus.birthdate,\n\tnus.drupal_id::VARCHAR,\n\tnus.email_subscription_status::int::bool,\n\tnus.created_at,\n\tnus.addr_zip,\n\tnus.\"language\",\n\tnus.\"source\",\n\tnus.updated_at,\n\tnus.CAMPAIGNS::jsonb,\n\tnus.audit::jsonb,\n\tnus.first_name,\n\tnus.email,\n\tnus.last_name,\n\tnus.addr_state,\n\tnus.addr_street_2,\n\tnus.addr_street_1,\n\tnus.addr_city,\n\tnus.\"role\",\n\tnus.sms_status,\n\tnus.last_authenticated_at,\n\tnus.last_accessed_at,\n\tnus.mobile,\n\tnus.cio_backfilled,\n\tnus.addr_source,\n\tnus.source_detail,\n\tnus.last_messaged_at,\n\tnus.email_subscription_topics::jsonb,\n\tnus.sms_paused,\n\tnus.voting_plan_status,\n\tnus.voting_plan_time_of_day,\n\tnus.voting_plan_method_of_transport,\n\tnus.voting_plan_attending_with,\n\tnus.voter_registration_status,\n\tnus.facebook_id::varchar,\n\tnus.deleted_at::jsonb,\n\tnus.feature_flags::jsonb,\n\tnus.dbt_scd_id,\n\tnus.dbt_updated_at,\n\tnus.dbt_valid_from,\n\tnus.dbt_valid_to,\n\tnus.google_id,\n\tnus.causes::jsonb,\n\tnus.school_id\nFROM {{ env_var('NORTHSTAR_FT_SCHEMA') }}.northstar_users_snapshot nus\nUNION ALL\nSELECT\n\tnu.id,\n\tnu.country,\n\tnu.birthdate,\n\tnu.drupal_id,\n\tnu.email_subscription_status,\n\tnu.created_at,\n\tnu.addr_zip,\n\tnu.\"language\",\n\tnu.\"source\",\n\tnu.updated_at,\n\tNULL AS CAMPAIGNS,\n\tNULL AS AUDIT,\n\tnu.first_name,\n\tnu.email,\n\tnu.last_name,\n\tnu.addr_state,\n\tnu.addr_street2,\n\tnu.addr_street1,\n\tnu.addr_city,\n\tnu.\"role\",\n\tnu.sms_status,\n\tnu.last_authenticated_at,\n\tnu.last_accessed_at,\n\tnu.mobile,\n\tNULL AS cio_backfilled,\n\tnu.addr_source, \n\tnu.source_detail, \n\tnu.last_messaged_at,\n\tNULL AS email_subscription_topics,\n\tNULL AS sms_paused,\n\tNULL AS voting_plan_status,\n\tNULL AS voting_plan_time_of_day,\n\tNULL AS voting_plan_method_of_transport,\n\tNULL AS voting_plan_attending_with,\n\tNULL AS voter_registration_status,\n\tnu.facebook_id,\n\tNULL AS DELETED_AT,\n\tnu.feature_flags::jsonb,\n\tNULL AS dbt_scd_id,\n\tNULL AS dbt_updated_at,\n\tNULL AS dbt_valid_from,\n\tNULL AS dbt_valid_to,\n\tNULL AS google_id,\n\tNULL AS causes,\n\tnu.school_id\nFROM {{ source('northstar', 'users') }} nu", "refs": [], "sources": [["northstar", "users"]], "depends_on": {"nodes": ["source.ds_dbt.northstar.users"], "macros": []}, "unique_id": "model.ds_dbt.northstar_users_raw", "empty": false, "fqn": ["ds_dbt", "users_table", "northstar_users_raw"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS northstar_users_raw_northstar_id_updated_at_i ON {{ this }}(northstar_id, updated_at)", "transaction": true, "index": 0}, {"sql": "CREATE INDEX IF NOT EXISTS northstar_users_raw_northstar_id_updated_at_dbt_scd_id_idx ON {{ this }}(northstar_id DESC, updated_at DESC, dbt_scd_id DESC)", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 3}, {"sql": "GRANT SELECT ON {{ this }} TO public", "transaction": true, "index": 4}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "northstar_users_raw"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "northstar_users_raw", "columns": {"northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "country": {"name": "country", "description": "User's country"}, "birthdate": {"name": "birthdate", "description": "User's birthdate"}, "drupal_id": {"name": "drupal_id", "description": "Old Drupal user ID"}, "email_subscription_status": {"name": "email_subscription_status", "description": "Email subscription status of the user"}, "created_at": {"name": "created_at", "description": "When the item was created in UTC (eg. 2018-01-01 12:00:00)"}, "addr_zip": {"name": "addr_zip", "description": "Postal code where the action takes place"}, "language": {"name": "language", "description": "User's language"}, "source": {"name": "source", "description": "Source of the URL (e.g. SMS, web), origin of the post (e.g. phoenix-web, phoenix-ashes, sms), or source where user was acquired. (e.g. sms, phoenix-next)"}, "updated_at": {"name": "updated_at", "description": "When the item was updated in UTC (eg. 2018-01-01 12:00:00)"}, "campaigns": {"name": "campaigns", "description": "Campaigns a user is signed up for."}, "audit": {"name": "audit", "description": "A very useful field with data containing information about changes to a user, e.g. timestamps when the user subscribed and unsubscribed."}, "first_name": {"name": "first_name", "description": "User's first name"}, "email": {"name": "email", "description": "Email address of the user."}, "last_name": {"name": "last_name", "description": "User's last name"}, "addr_state": {"name": "addr_state", "description": "User's state"}, "addr_street_2": {"name": "addr_street_2", "description": "Second line of user's street address"}, "addr_street_1": {"name": "addr_street_1", "description": "First line of user's street address"}, "addr_city": {"name": "addr_city", "description": "User's city"}, "role": {"name": "role", "description": "User's role, e.g. user, staff"}, "sms_status": {"name": "sms_status", "description": "Current SMS status. (e.g. undeliverable, unknown)"}, "last_authenticated_at": {"name": "last_authenticated_at", "description": "Date time in UTC when user last logged in to Northstar"}, "last_accessed": {"name": "last_accessed", "description": "Date time in UTC when user last access the website"}, "mobile": {"name": "mobile", "description": "Users's mobile phone number"}, "cio_backfilled": {"name": "cio_backfilled", "description": "Whether this user's data was backfilled from CIO"}, "addr_source": {"name": "addr_source", "description": "Where the user submitted their address, e.g. sms, GDPR"}, "source_detail": {"name": "source_detail", "description": "Details of the origin of the user. (e.g. tell_a_friend, other, opt_in_path/197981)"}, "last_messaged_at": {"name": "last_messaged_at", "description": "Date time in UTC when user was last sent a message via SMS or email"}, "email_subscription_topics": {"name": "email_subscription_topics", "description": "Email subscription topics correspond to categories in CIO in which the user is interested. e.g. lifestyle, community, scholarship"}, "sms_paused": {"name": "sms_paused", "description": "Whether we've paused sending sms messages to the user."}, "voting_plan_status": {"name": "voting_plan_status", "description": "The indication of the user's plan to vote, e.g. voting, not_voting, cant_vote"}, "voting_plan_time_of_day": {"name": "voting_plan_time_of_day", "description": "The time of day when the user plans to vote, e.g morning, afternoon, evening"}, "voting_plan_method_of_transport": {"name": "voting_plan_method_of_transport", "description": "How the user plans to get to their polling place. e.g. walk, drive"}, "voting_plan_attending_with": {"name": "voting_plan_attending_with", "description": "With Whom the user plans to go voting, e.g. family, friends, alone"}, "voter_registration_status": {"name": "voter_registration_status", "description": "User's registration status. (e.g. registration_complete, confirmed, uncertain)"}, "facebook_id": {"name": "facebook_id", "description": "User's facebook id"}, "deleted_at": {"name": "deleted_at", "description": "Date time in UTC when a user deleted their post."}, "feature_flags": {"name": "feature_flags", "description": "JSON containing info on features like badges and refer-a-friend."}, "dbt_scd_id": {"name": "dbt_scd_id", "description": "DBT snapshot table data. A unique key generated for each snapshotted record."}, "dbt_updated_at": {"name": "dbt_updated_at", "description": "DBT snapshot table data. The updated_at timestamp of the source record when this snapshot row was inserted."}, "dbt_valid_from": {"name": "dbt_valid_from", "description": "DBT snapshot table data. The dbt_valid_from and dbt_valid_to columns indicate the historical state for a given record. The current value for a row is represented with a null value for dbt_valid_to. The timestamp when this snapshot row was first inserted"}, "dbt_valid_to": {"name": "dbt_valid_to", "description": "DBT snapshot table data. The dbt_valid_from and dbt_valid_to columns indicate the historical state for a given record. The current value for a row is represented with a null value for dbt_valid_to. The timestamp when this row row became invalidated."}, "google_id": {"name": "google_id", "description": "User's Google ID obtained from login."}, "causes": {"name": "causes", "description": "Causes in which a user is interested. e.g. animal welfare, education, mental_health"}, "school_id": {"name": "school_id", "description": "Unique identifier for the user's school. This info comes from the school finder."}}, "description": "A table containing aggregated user data.", "patch_path": "models/users_table/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "country", "column_name": "country"}, {"documentation_package": "", "documentation_name": "birthdate", "column_name": "birthdate"}, {"documentation_package": "", "documentation_name": "drupal_id", "column_name": "drupal_id"}, {"documentation_package": "", "documentation_name": "email_subscription_status", "column_name": "email_subscription_status"}, {"documentation_package": "", "documentation_name": "created_at", "column_name": "created_at"}, {"documentation_package": "", "documentation_name": "postal_code", "column_name": "addr_zip"}, {"documentation_package": "", "documentation_name": "language", "column_name": "language"}, {"documentation_package": "", "documentation_name": "source", "column_name": "source"}, {"documentation_package": "", "documentation_name": "updated_at", "column_name": "updated_at"}, {"documentation_package": "", "documentation_name": "campaigns", "column_name": "campaigns"}, {"documentation_package": "", "documentation_name": "audit", "column_name": "audit"}, {"documentation_package": "", "documentation_name": "first_name", "column_name": "first_name"}, {"documentation_package": "", "documentation_name": "email", "column_name": "email"}, {"documentation_package": "", "documentation_name": "last_name", "column_name": "last_name"}, {"documentation_package": "", "documentation_name": "state", "column_name": "addr_state"}, {"documentation_package": "", "documentation_name": "address_street_2", "column_name": "addr_street_2"}, {"documentation_package": "", "documentation_name": "address_street_1", "column_name": "addr_street_1"}, {"documentation_package": "", "documentation_name": "city", "column_name": "addr_city"}, {"documentation_package": "", "documentation_name": "role", "column_name": "role"}, {"documentation_package": "", "documentation_name": "sms_status", "column_name": "sms_status"}, {"documentation_package": "", "documentation_name": "last_logged_in", "column_name": "last_authenticated_at"}, {"documentation_package": "", "documentation_name": "last_accessed", "column_name": "last_accessed"}, {"documentation_package": "", "documentation_name": "mobile", "column_name": "mobile"}, {"documentation_package": "", "documentation_name": "cio_backfilled", "column_name": "cio_backfilled"}, {"documentation_package": "", "documentation_name": "addr_source", "column_name": "addr_source"}, {"documentation_package": "", "documentation_name": "source_detail", "column_name": "source_detail"}, {"documentation_package": "", "documentation_name": "last_messaged_at", "column_name": "last_messaged_at"}, {"documentation_package": "", "documentation_name": "email_subscription_topics", "column_name": "email_subscription_topics"}, {"documentation_package": "", "documentation_name": "sms_paused", "column_name": "sms_paused"}, {"documentation_package": "", "documentation_name": "voting_plan_status", "column_name": "voting_plan_status"}, {"documentation_package": "", "documentation_name": "voting_plan_time_of_day", "column_name": "voting_plan_time_of_day"}, {"documentation_package": "", "documentation_name": "voting_plan_method_of_transport", "column_name": "voting_plan_method_of_transport"}, {"documentation_package": "", "documentation_name": "voting_plan_attending_with", "column_name": "voting_plan_attending_with"}, {"documentation_package": "", "documentation_name": "voter_registration_status", "column_name": "voter_registration_status"}, {"documentation_package": "", "documentation_name": "facebook_id", "column_name": "facebook_id"}, {"documentation_package": "", "documentation_name": "deleted_at", "column_name": "deleted_at"}, {"documentation_package": "", "documentation_name": "feature_flags", "column_name": "feature_flags"}, {"documentation_package": "", "documentation_name": "dbt_scd_id", "column_name": "dbt_scd_id"}, {"documentation_package": "", "documentation_name": "dbt_updated_at", "column_name": "dbt_updated_at"}, {"documentation_package": "", "documentation_name": "dbt_valid_from", "column_name": "dbt_valid_from"}, {"documentation_package": "", "documentation_name": "dbt_valid_to", "column_name": "dbt_valid_to"}, {"documentation_package": "", "documentation_name": "google_id", "column_name": "google_id"}, {"documentation_package": "", "documentation_name": "causes", "column_name": "causes"}, {"documentation_package": "", "documentation_name": "school_id", "column_name": "school_id"}], "compiled": true, "compiled_sql": "SELECT\n\tnus._id AS northstar_id,\n\tnus.country,\n\tnus.birthdate,\n\tnus.drupal_id::VARCHAR,\n\tnus.email_subscription_status::int::bool,\n\tnus.created_at,\n\tnus.addr_zip,\n\tnus.\"language\",\n\tnus.\"source\",\n\tnus.updated_at,\n\tnus.CAMPAIGNS::jsonb,\n\tnus.audit::jsonb,\n\tnus.first_name,\n\tnus.email,\n\tnus.last_name,\n\tnus.addr_state,\n\tnus.addr_street_2,\n\tnus.addr_street_1,\n\tnus.addr_city,\n\tnus.\"role\",\n\tnus.sms_status,\n\tnus.last_authenticated_at,\n\tnus.last_accessed_at,\n\tnus.mobile,\n\tnus.cio_backfilled,\n\tnus.addr_source,\n\tnus.source_detail,\n\tnus.last_messaged_at,\n\tnus.email_subscription_topics::jsonb,\n\tnus.sms_paused,\n\tnus.voting_plan_status,\n\tnus.voting_plan_time_of_day,\n\tnus.voting_plan_method_of_transport,\n\tnus.voting_plan_attending_with,\n\tnus.voter_registration_status,\n\tnus.facebook_id::varchar,\n\tnus.deleted_at::jsonb,\n\tnus.feature_flags::jsonb,\n\tnus.dbt_scd_id,\n\tnus.dbt_updated_at,\n\tnus.dbt_valid_from,\n\tnus.dbt_valid_to,\n\tnus.google_id,\n\tnus.causes::jsonb,\n\tnus.school_id\nFROM northstar_ft_userapi.northstar_users_snapshot nus\nUNION ALL\nSELECT\n\tnu.id,\n\tnu.country,\n\tnu.birthdate,\n\tnu.drupal_id,\n\tnu.email_subscription_status,\n\tnu.created_at,\n\tnu.addr_zip,\n\tnu.\"language\",\n\tnu.\"source\",\n\tnu.updated_at,\n\tNULL AS CAMPAIGNS,\n\tNULL AS AUDIT,\n\tnu.first_name,\n\tnu.email,\n\tnu.last_name,\n\tnu.addr_state,\n\tnu.addr_street2,\n\tnu.addr_street1,\n\tnu.addr_city,\n\tnu.\"role\",\n\tnu.sms_status,\n\tnu.last_authenticated_at,\n\tnu.last_accessed_at,\n\tnu.mobile,\n\tNULL AS cio_backfilled,\n\tnu.addr_source, \n\tnu.source_detail, \n\tnu.last_messaged_at,\n\tNULL AS email_subscription_topics,\n\tNULL AS sms_paused,\n\tNULL AS voting_plan_status,\n\tNULL AS voting_plan_time_of_day,\n\tNULL AS voting_plan_method_of_transport,\n\tNULL AS voting_plan_attending_with,\n\tNULL AS voter_registration_status,\n\tnu.facebook_id,\n\tNULL AS DELETED_AT,\n\tnu.feature_flags::jsonb,\n\tNULL AS dbt_scd_id,\n\tNULL AS dbt_updated_at,\n\tNULL AS dbt_valid_from,\n\tNULL AS dbt_valid_to,\n\tNULL AS google_id,\n\tNULL AS causes,\n\tnu.school_id\nFROM \"quasar_prod_warehouse\".\"northstar\".\"users\" nu", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n\tnus._id AS northstar_id,\n\tnus.country,\n\tnus.birthdate,\n\tnus.drupal_id::VARCHAR,\n\tnus.email_subscription_status::int::bool,\n\tnus.created_at,\n\tnus.addr_zip,\n\tnus.\"language\",\n\tnus.\"source\",\n\tnus.updated_at,\n\tnus.CAMPAIGNS::jsonb,\n\tnus.audit::jsonb,\n\tnus.first_name,\n\tnus.email,\n\tnus.last_name,\n\tnus.addr_state,\n\tnus.addr_street_2,\n\tnus.addr_street_1,\n\tnus.addr_city,\n\tnus.\"role\",\n\tnus.sms_status,\n\tnus.last_authenticated_at,\n\tnus.last_accessed_at,\n\tnus.mobile,\n\tnus.cio_backfilled,\n\tnus.addr_source,\n\tnus.source_detail,\n\tnus.last_messaged_at,\n\tnus.email_subscription_topics::jsonb,\n\tnus.sms_paused,\n\tnus.voting_plan_status,\n\tnus.voting_plan_time_of_day,\n\tnus.voting_plan_method_of_transport,\n\tnus.voting_plan_attending_with,\n\tnus.voter_registration_status,\n\tnus.facebook_id::varchar,\n\tnus.deleted_at::jsonb,\n\tnus.feature_flags::jsonb,\n\tnus.dbt_scd_id,\n\tnus.dbt_updated_at,\n\tnus.dbt_valid_from,\n\tnus.dbt_valid_to,\n\tnus.google_id,\n\tnus.causes::jsonb,\n\tnus.school_id\nFROM northstar_ft_userapi.northstar_users_snapshot nus\nUNION ALL\nSELECT\n\tnu.id,\n\tnu.country,\n\tnu.birthdate,\n\tnu.drupal_id,\n\tnu.email_subscription_status,\n\tnu.created_at,\n\tnu.addr_zip,\n\tnu.\"language\",\n\tnu.\"source\",\n\tnu.updated_at,\n\tNULL AS CAMPAIGNS,\n\tNULL AS AUDIT,\n\tnu.first_name,\n\tnu.email,\n\tnu.last_name,\n\tnu.addr_state,\n\tnu.addr_street2,\n\tnu.addr_street1,\n\tnu.addr_city,\n\tnu.\"role\",\n\tnu.sms_status,\n\tnu.last_authenticated_at,\n\tnu.last_accessed_at,\n\tnu.mobile,\n\tNULL AS cio_backfilled,\n\tnu.addr_source, \n\tnu.source_detail, \n\tnu.last_messaged_at,\n\tNULL AS email_subscription_topics,\n\tNULL AS sms_paused,\n\tNULL AS voting_plan_status,\n\tNULL AS voting_plan_time_of_day,\n\tNULL AS voting_plan_method_of_transport,\n\tNULL AS voting_plan_attending_with,\n\tNULL AS voter_registration_status,\n\tnu.facebook_id,\n\tNULL AS DELETED_AT,\n\tnu.feature_flags::jsonb,\n\tNULL AS dbt_scd_id,\n\tNULL AS dbt_updated_at,\n\tNULL AS dbt_valid_from,\n\tNULL AS dbt_valid_to,\n\tNULL AS google_id,\n\tNULL AS causes,\n\tnu.school_id\nFROM \"quasar_prod_warehouse\".\"northstar\".\"users\" nu", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/users_table/northstar_users_raw.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.018210172653198242, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.616461Z", "completed_at": "2020-01-30T16:41:07.627061Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.627226Z", "completed_at": "2020-01-30T16:41:07.632082Z"}]}, {"node": {"name": "rock_the_vote", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "campaign_activity/rock_the_vote.sql", "original_file_path": "models/campaign_activity/rock_the_vote.sql", "package_name": "ds_dbt", "raw_sql": "SELECT id AS post_id, \n   details::jsonb->>'Tracking Source' AS tracking_source,\n   (details::jsonb->>'Started registration')::timestamp AS started_registration,\n   details::jsonb->>'Finish with State' AS finish_with_state,\n   details::jsonb->>'Status' AS status,\n   COALESCE(details::jsonb->>'Email address',details::jsonb->>'email') AS email,\n   details::jsonb->>'Home zip code' AS zip\n FROM {{ env_var('FT_ROGUE') }}.posts\n WHERE source = 'rock-the-vote'", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.rock_the_vote", "empty": false, "fqn": ["ds_dbt", "campaign_activity", "rock_the_vote"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS rtv_unique ON {{ this }}(post_id, started_registration)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "rock_the_vote"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "rock_the_vote", "columns": {"post_id": {"name": "post_id", "description": "Unique identifier for the post"}, "tracking_source": {"name": "tracking_source", "description": "CSV string representing source of record (e.g. campaignID:822,campaignRunID:8171,source:web,source_details:STV_Affirmation) 'Details about the source of the item. This is sometimes represented as a JSON object, and for other tables like Turbovote its represented as a string. (e.g. \"{\"contentful_id\":\"3CTLlXfbwtz1FOMpl31SKV\",\"utm_source\":\"scholarship_listing\",\"utm_medium\":\"referral\",\"utm_campaign\":\"fastweb_2019_08\"}\", newsletter_456)'"}, "started_registration": {"name": "started_registration", "description": "When the user started registration. 'When the item was created in UTC (eg. 2018-01-01 12:00:00)'"}, "finish_with_state": {"name": "finish_with_state", "description": "Whether the user ?"}, "status": {"name": "status", "description": "Status of the submission. (e.g. complete, rejected, step 1)"}, "email": {"name": "email", "description": "Email address of the user."}, "zip": {"name": "zip", "description": "Postal code where the action takes place"}}, "description": "A table containing ingested Rock the Vote data", "patch_path": "models/campaign_activity/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "id", "column_name": "post_id"}, {"documentation_package": "", "documentation_name": "source_details", "column_name": "tracking_source"}, {"documentation_package": "", "documentation_name": "created_at", "column_name": "started_registration"}, {"documentation_package": "", "documentation_name": "email", "column_name": "email"}, {"documentation_package": "", "documentation_name": "postal_code", "column_name": "zip"}], "compiled": true, "compiled_sql": "SELECT id AS post_id, \n   details::jsonb->>'Tracking Source' AS tracking_source,\n   (details::jsonb->>'Started registration')::timestamp AS started_registration,\n   details::jsonb->>'Finish with State' AS finish_with_state,\n   details::jsonb->>'Status' AS status,\n   COALESCE(details::jsonb->>'Email address',details::jsonb->>'email') AS email,\n   details::jsonb->>'Home zip code' AS zip\n FROM ft_dosomething_rogue.posts\n WHERE source = 'rock-the-vote'", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT id AS post_id, \n   details::jsonb->>'Tracking Source' AS tracking_source,\n   (details::jsonb->>'Started registration')::timestamp AS started_registration,\n   details::jsonb->>'Finish with State' AS finish_with_state,\n   details::jsonb->>'Status' AS status,\n   COALESCE(details::jsonb->>'Email address',details::jsonb->>'email') AS email,\n   details::jsonb->>'Home zip code' AS zip\n FROM ft_dosomething_rogue.posts\n WHERE source = 'rock-the-vote'", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/campaign_activity/rock_the_vote.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.012943744659423828, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.642495Z", "completed_at": "2020-01-30T16:41:07.648051Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.648183Z", "completed_at": "2020-01-30T16:41:07.649846Z"}]}, {"node": {"name": "signups", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "campaign_activity/signups.sql", "original_file_path": "models/campaign_activity/signups.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n    sd.northstar_id AS northstar_id,\n    sd.id AS id,\n    sd.campaign_id AS campaign_id,\n    sd.campaign_run_id AS campaign_run_id,\n    sd.why_participated AS why_participated,\n    sd.\"source\" AS \"source\",\n    sd.details,\n\tCASE WHEN sd.\"source\" = 'niche' THEN 'niche'\n\t     WHEN sd.\"source\" ilike '%sms%' THEN 'sms'\n\t     WHEN sd.\"source\" in ('rock-the-vote', 'turbovote') THEN 'voter-reg'\n\t     ELSE 'web' END AS source_bucket,\n    sd.created_at AS created_at,\n    sd.source_details,\n    CASE \n\t\tWHEN source_details ILIKE '%\\}'\n\t\tTHEN (CAST(source_details as json) ->> 'utm_medium') \n\t\tELSE NULL END AS utm_medium,\n\tCASE \n\t\tWHEN source_details ILIKE '%\\}'\n\t\tTHEN (CAST(source_details as json) ->> 'utm_source') \n\t\tELSE NULL END AS utm_source,\n\tCASE \n\t\tWHEN source_details ILIKE '%\\}'\n\t\tTHEN (CAST(source_details as json) ->> 'utm_campaign') \n\t\tELSE NULL END AS utm_campaign\nFROM {{ env_var('FT_ROGUE') }}.signups sd\nWHERE sd._fivetran_deleted = 'false'\nAND sd.deleted_at IS NULL\nAND sd.\"source\" IS DISTINCT FROM 'rogue-oauth'\nAND sd.why_participated IS DISTINCT FROM 'Testing from Ghost Inspector!'", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.signups", "empty": false, "fqn": ["ds_dbt", "campaign_activity", "signups"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS signups_unique ON {{ this }}(created_at, id)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "signups"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "signups", "columns": {"northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "id": {"name": "id", "description": "Unique identifier for the post"}, "campaign_id": {"name": "campaign_id", "description": "This is a unique identifier for the campaign"}, "campaign_run_id": {"name": "campaign_run_id", "description": "Defined in web events docs. Fix this."}, "why_participated": {"name": "why_participated", "description": "Why the user participated in this action. Entered by the user."}, "source": {"name": "source", "description": "Source of the URL (e.g. SMS, web), origin of the post (e.g. phoenix-web, phoenix-ashes, sms), or source where user was acquired. (e.g. sms, phoenix-next)"}, "details": {"name": "details", "description": "Details about the post. Contains contentfulId and other information (e.g. {\"campaignContentfulId\":\"6ATBgGEQEeJoIcxs1qbwaC\"})"}, "source_bucket": {"name": "source_bucket", "description": "Grouping bucket for origin of the post (e.g. web, sms)"}, "created_at": {"name": "created_at", "description": "When the item was created in UTC (eg. 2018-01-01 12:00:00)"}, "source_details": {"name": "source_details", "description": "Details about the source of the item. This is sometimes represented as a JSON object, and for other tables like Turbovote its represented as a string. (e.g. \"{\"contentful_id\":\"3CTLlXfbwtz1FOMpl31SKV\",\"utm_source\":\"scholarship_listing\",\"utm_medium\":\"referral\",\"utm_campaign\":\"fastweb_2019_08\"}\", newsletter_456)"}, "utm_medium": {"name": "utm_medium", "description": "How the traffic got to the platform (eg. referral, CPC)"}, "utm_source": {"name": "utm_source", "description": "Tracks where the traffic is coming from. (eg. scholarship_listing, Facebook)"}, "utm_campaign": {"name": "utm_campaign", "description": "Tracks which campaign the traffic was generated by. Shows up in Google Analytics as Campaign Name (eg. editorial_newsletter)"}}, "description": "A table containing information about signups", "patch_path": "models/campaign_activity/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "id", "column_name": "id"}, {"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_id"}, {"documentation_package": "", "documentation_name": "why_participated", "column_name": "why_participated"}, {"documentation_package": "", "documentation_name": "source", "column_name": "source"}, {"documentation_package": "", "documentation_name": "details", "column_name": "details"}, {"documentation_package": "", "documentation_name": "source_bucket", "column_name": "source_bucket"}, {"documentation_package": "", "documentation_name": "created_at", "column_name": "created_at"}, {"documentation_package": "", "documentation_name": "source_details", "column_name": "source_details"}, {"documentation_package": "", "documentation_name": "utm_medium", "column_name": "utm_medium"}, {"documentation_package": "", "documentation_name": "utm_source", "column_name": "utm_source"}, {"documentation_package": "", "documentation_name": "utm_campaign", "column_name": "utm_campaign"}], "compiled": true, "compiled_sql": "SELECT\n    sd.northstar_id AS northstar_id,\n    sd.id AS id,\n    sd.campaign_id AS campaign_id,\n    sd.campaign_run_id AS campaign_run_id,\n    sd.why_participated AS why_participated,\n    sd.\"source\" AS \"source\",\n    sd.details,\n\tCASE WHEN sd.\"source\" = 'niche' THEN 'niche'\n\t     WHEN sd.\"source\" ilike '%sms%' THEN 'sms'\n\t     WHEN sd.\"source\" in ('rock-the-vote', 'turbovote') THEN 'voter-reg'\n\t     ELSE 'web' END AS source_bucket,\n    sd.created_at AS created_at,\n    sd.source_details,\n    CASE \n\t\tWHEN source_details ILIKE '%\\}'\n\t\tTHEN (CAST(source_details as json) ->> 'utm_medium') \n\t\tELSE NULL END AS utm_medium,\n\tCASE \n\t\tWHEN source_details ILIKE '%\\}'\n\t\tTHEN (CAST(source_details as json) ->> 'utm_source') \n\t\tELSE NULL END AS utm_source,\n\tCASE \n\t\tWHEN source_details ILIKE '%\\}'\n\t\tTHEN (CAST(source_details as json) ->> 'utm_campaign') \n\t\tELSE NULL END AS utm_campaign\nFROM ft_dosomething_rogue.signups sd\nWHERE sd._fivetran_deleted = 'false'\nAND sd.deleted_at IS NULL\nAND sd.\"source\" IS DISTINCT FROM 'rogue-oauth'\nAND sd.why_participated IS DISTINCT FROM 'Testing from Ghost Inspector!'", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n    sd.northstar_id AS northstar_id,\n    sd.id AS id,\n    sd.campaign_id AS campaign_id,\n    sd.campaign_run_id AS campaign_run_id,\n    sd.why_participated AS why_participated,\n    sd.\"source\" AS \"source\",\n    sd.details,\n\tCASE WHEN sd.\"source\" = 'niche' THEN 'niche'\n\t     WHEN sd.\"source\" ilike '%sms%' THEN 'sms'\n\t     WHEN sd.\"source\" in ('rock-the-vote', 'turbovote') THEN 'voter-reg'\n\t     ELSE 'web' END AS source_bucket,\n    sd.created_at AS created_at,\n    sd.source_details,\n    CASE \n\t\tWHEN source_details ILIKE '%\\}'\n\t\tTHEN (CAST(source_details as json) ->> 'utm_medium') \n\t\tELSE NULL END AS utm_medium,\n\tCASE \n\t\tWHEN source_details ILIKE '%\\}'\n\t\tTHEN (CAST(source_details as json) ->> 'utm_source') \n\t\tELSE NULL END AS utm_source,\n\tCASE \n\t\tWHEN source_details ILIKE '%\\}'\n\t\tTHEN (CAST(source_details as json) ->> 'utm_campaign') \n\t\tELSE NULL END AS utm_campaign\nFROM ft_dosomething_rogue.signups sd\nWHERE sd._fivetran_deleted = 'false'\nAND sd.deleted_at IS NULL\nAND sd.\"source\" IS DISTINCT FROM 'rogue-oauth'\nAND sd.why_participated IS DISTINCT FROM 'Testing from Ghost Inspector!'", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/campaign_activity/signups.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.031610727310180664, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.653924Z", "completed_at": "2020-01-30T16:41:07.680836Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.680974Z", "completed_at": "2020-01-30T16:41:07.683168Z"}]}, {"node": {"name": "turbovote", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "campaign_activity/turbovote.sql", "original_file_path": "models/campaign_activity/turbovote.sql", "package_name": "ds_dbt", "raw_sql": "SELECT id AS post_id, \n\tdetails::jsonb->>'hostname' AS hostname,\n\tdetails::jsonb->>'referral-code' AS referral_code,\n\tdetails::jsonb->>'partner-comms-opt-in' AS partner_comms_opt_in,\n\t(details::jsonb->>'created-at')::timestamp AS created_at,\n\t(details::jsonb->>'updated-at')::timestamp AS updated_at,\n\tsource_details,\n\tdetails::jsonb->>'voter-registration-status' AS voter_registration_status,\n\tdetails::jsonb->>'voter-registration-source' AS voter_registration_source,\n\tdetails::jsonb->>'voter-registration-method' AS voter_registration_method,\n\tdetails::jsonb->>'voting-method-preference' AS voter_registration_preference,\n\tdetails::jsonb->>'email subscribed' AS email_subscribed,\n\tdetails::jsonb->>'sms subscribed' AS sms_subscribed\nFROM {{ env_var('FT_ROGUE') }}.posts\nWHERE source = 'turbovote'", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.turbovote", "empty": false, "fqn": ["ds_dbt", "campaign_activity", "turbovote"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS turbovote_unique ON {{ this }}(post_id, created_at, updated_at)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "turbovote"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "turbovote", "columns": {"post_id": {"name": "post_id", "description": "Unique identifier for the post"}, "hostname": {"name": "hostname", "description": "URL host where event occurred (eg. www.dosomething.org or identity.dosomething.org)"}, "referral-code": {"name": "referral-code", "description": "???"}, "partner-comms-opt-in": {"name": "partner-comms-opt-in", "description": "???"}, "created_at": {"name": "created_at", "description": "When the item was created in UTC (eg. 2018-01-01 12:00:00)"}, "updated_at": {"name": "updated_at", "description": "When the item was updated in UTC (eg. 2018-01-01 12:00:00)"}, "source_details": {"name": "source_details", "description": "Details about the source of the item. This is sometimes represented as a JSON object, and for other tables like Turbovote its represented as a string. (e.g. \"{\"contentful_id\":\"3CTLlXfbwtz1FOMpl31SKV\",\"utm_source\":\"scholarship_listing\",\"utm_medium\":\"referral\",\"utm_campaign\":\"fastweb_2019_08\"}\", newsletter_456)"}, "voter-registration-status": {"name": "voter-registration-status", "description": "Status of the voter's registration."}, "voter-registration-source": {"name": "voter-registration-source", "description": "Source of the registration."}, "voter-registration-method": {"name": "voter-registration-method", "description": "Method of registration."}, "voter-registration-preference": {"name": "voter-registration-preference", "description": "Preference of registration."}, "email subscribed": {"name": "email subscribed", "description": "Whether the use is subscribed to email"}, "sms subscribed": {"name": "sms subscribed", "description": "Whether the use is subscribed to SMS"}}, "description": "A table containing information about Turbovote registrations", "patch_path": "models/campaign_activity/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "id", "column_name": "post_id"}, {"documentation_package": "", "documentation_name": "host", "column_name": "hostname"}, {"documentation_package": "", "documentation_name": "created_at", "column_name": "created_at"}, {"documentation_package": "", "documentation_name": "updated_at", "column_name": "updated_at"}, {"documentation_package": "", "documentation_name": "source_details", "column_name": "source_details"}], "compiled": true, "compiled_sql": "SELECT id AS post_id, \n\tdetails::jsonb->>'hostname' AS hostname,\n\tdetails::jsonb->>'referral-code' AS referral_code,\n\tdetails::jsonb->>'partner-comms-opt-in' AS partner_comms_opt_in,\n\t(details::jsonb->>'created-at')::timestamp AS created_at,\n\t(details::jsonb->>'updated-at')::timestamp AS updated_at,\n\tsource_details,\n\tdetails::jsonb->>'voter-registration-status' AS voter_registration_status,\n\tdetails::jsonb->>'voter-registration-source' AS voter_registration_source,\n\tdetails::jsonb->>'voter-registration-method' AS voter_registration_method,\n\tdetails::jsonb->>'voting-method-preference' AS voter_registration_preference,\n\tdetails::jsonb->>'email subscribed' AS email_subscribed,\n\tdetails::jsonb->>'sms subscribed' AS sms_subscribed\nFROM ft_dosomething_rogue.posts\nWHERE source = 'turbovote'", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT id AS post_id, \n\tdetails::jsonb->>'hostname' AS hostname,\n\tdetails::jsonb->>'referral-code' AS referral_code,\n\tdetails::jsonb->>'partner-comms-opt-in' AS partner_comms_opt_in,\n\t(details::jsonb->>'created-at')::timestamp AS created_at,\n\t(details::jsonb->>'updated-at')::timestamp AS updated_at,\n\tsource_details,\n\tdetails::jsonb->>'voter-registration-status' AS voter_registration_status,\n\tdetails::jsonb->>'voter-registration-source' AS voter_registration_source,\n\tdetails::jsonb->>'voter-registration-method' AS voter_registration_method,\n\tdetails::jsonb->>'voting-method-preference' AS voter_registration_preference,\n\tdetails::jsonb->>'email subscribed' AS email_subscribed,\n\tdetails::jsonb->>'sms subscribed' AS sms_subscribed\nFROM ft_dosomething_rogue.posts\nWHERE source = 'turbovote'", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/campaign_activity/turbovote.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010750055313110352, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.688923Z", "completed_at": "2020-01-30T16:41:07.694543Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.694697Z", "completed_at": "2020-01-30T16:41:07.696415Z"}]}, {"node": {"name": "cio_latest_status", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "users_table/cio_latest_status.sql", "original_file_path": "models/users_table/cio_latest_status.sql", "package_name": "ds_dbt", "raw_sql": "SELECT \n\tcio.customer_id,\n\tmax(CASE WHEN \n\t\t\tcio.event_type = 'customer_unsubscribed' \n\t\t\tTHEN 'customer_unsubscribed' \n\t\t\tELSE 'customer_subscribed' END) AS event_type,\n\tmax(cio.\"timestamp\") AS \"timestamp\"\nFROM cio.customer_event cio\nINNER JOIN \n\t(SELECT \n\t\tctemp.customer_id,\n\t\tmax(ctemp.\"timestamp\") AS max_update\n\tFROM cio.customer_event ctemp\n\tGROUP BY ctemp.customer_id) cio_max \n\t\tON cio_max.customer_id = cio.customer_id \n\t\tAND cio_max.max_update = cio.\"timestamp\"\nGROUP BY cio.customer_id", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.cio_latest_status", "empty": false, "fqn": ["ds_dbt", "users_table", "cio_latest_status"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS cio_indices ON {{ this }}(customer_id)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "cio_latest_status"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "cio_latest_status", "columns": {"customer_id": {"name": "customer_id", "description": "This customer_id we set when we send data to Customer.io, and is the Northstar ID of the user. 'The Northstar ID of the user who generated the event'"}, "event_type": {"name": "event_type", "description": "Type of event (pv = 'Page View', se = 'Structured Event')"}, "timestamp": {"name": "timestamp", "description": "When the event occurred in UTC (eg. 2018-01-01 12:00:00)"}}, "description": "Table containing users' latest status from CIO API.", "patch_path": "models/users_table/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "northstar_id", "column_name": "customer_id"}, {"documentation_package": "", "documentation_name": "event_type", "column_name": "event_type"}, {"documentation_package": "", "documentation_name": "event_datetime", "column_name": "timestamp"}], "compiled": true, "compiled_sql": "SELECT \n\tcio.customer_id,\n\tmax(CASE WHEN \n\t\t\tcio.event_type = 'customer_unsubscribed' \n\t\t\tTHEN 'customer_unsubscribed' \n\t\t\tELSE 'customer_subscribed' END) AS event_type,\n\tmax(cio.\"timestamp\") AS \"timestamp\"\nFROM cio.customer_event cio\nINNER JOIN \n\t(SELECT \n\t\tctemp.customer_id,\n\t\tmax(ctemp.\"timestamp\") AS max_update\n\tFROM cio.customer_event ctemp\n\tGROUP BY ctemp.customer_id) cio_max \n\t\tON cio_max.customer_id = cio.customer_id \n\t\tAND cio_max.max_update = cio.\"timestamp\"\nGROUP BY cio.customer_id", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT \n\tcio.customer_id,\n\tmax(CASE WHEN \n\t\t\tcio.event_type = 'customer_unsubscribed' \n\t\t\tTHEN 'customer_unsubscribed' \n\t\t\tELSE 'customer_subscribed' END) AS event_type,\n\tmax(cio.\"timestamp\") AS \"timestamp\"\nFROM cio.customer_event cio\nINNER JOIN \n\t(SELECT \n\t\tctemp.customer_id,\n\t\tmax(ctemp.\"timestamp\") AS max_update\n\tFROM cio.customer_event ctemp\n\tGROUP BY ctemp.customer_id) cio_max \n\t\tON cio_max.customer_id = cio.customer_id \n\t\tAND cio_max.max_update = cio.\"timestamp\"\nGROUP BY cio.customer_id", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/users_table/cio_latest_status.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009029150009155273, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.700879Z", "completed_at": "2020-01-30T16:41:07.705223Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.705457Z", "completed_at": "2020-01-30T16:41:07.707201Z"}]}, {"node": {"name": "bertly_clicks", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "bertly/bertly_clicks.sql", "original_file_path": "models/bertly/bertly_clicks.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n    *,\n    (regexp_split_to_array(\n        (regexp_split_to_array(\n            (regexp_split_to_array(\n                c.target_url, 'user')\n            )[2], E'[=:]+')\n        )[2],\n        E'[^a-zA-Z0-9]')\n    )[1] AS northstar_id,\n    COALESCE(\n        (regexp_split_to_array(c.target_url, 'broadcastid=', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcastid_', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcast_id=', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcast_id_', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcast_', 'i'))[2]\n            ) AS broadcast_id,\n    (CASE WHEN target_url ilike '%source=web%' THEN 'web'\n        WHEN target_url ilike '%source=email%' THEN 'email'\n        ELSE 'sms'\n        END) AS SOURCE,\n    CASE\n        WHEN c.user_agent IS NULL THEN 'uncertain'\n        WHEN c.user_agent ILIKE '%facebot twitterbot%'\n                OR c.user_agent ILIKE '%X11; Ubuntu; Linux i686%' THEN 'preview'\n        ELSE 'click' END AS interaction_type\nFROM {{ env_var('BERTLY') }}.clicks c", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.bertly_clicks", "empty": false, "fqn": ["ds_dbt", "bertly", "bertly_clicks"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS clicks_unique ON {{ this }}(click_id)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "bertly_clicks"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "bertly_clicks", "columns": {"click_id": {"name": "click_id", "description": "This is a unique identifier for each click"}, "click_time": {"name": "click_time", "description": "Timestamp when user clicked."}, "shortened": {"name": "shortened", "description": "Shortened URL"}, "target_url": {"name": "target_url", "description": "URL where the user will be directed"}, "user_agent": {"name": "user_agent", "description": "Full user agent string for a user's browser (e.g. \"Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:24.0) Gecko/20100101 Firefox/24.0\")"}, "northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "broadcast_id": {"name": "broadcast_id", "description": "ID of the broadcast that generated the shortened URL"}, "source": {"name": "source", "description": "Source of the URL (e.g. SMS, web), origin of the post (e.g. phoenix-web, phoenix-ashes, sms), or source where user was acquired. (e.g. sms, phoenix-next)"}, "interaction_type": {"name": "interaction_type", "description": "How the user interacted with the link (e.g. preview, click)"}}, "description": "Table containing data from Bertly, our serverless link shortener.", "patch_path": "models/bertly/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "click_id", "column_name": "click_id"}, {"documentation_package": "", "documentation_name": "click_time", "column_name": "click_time"}, {"documentation_package": "", "documentation_name": "shortened", "column_name": "shortened"}, {"documentation_package": "", "documentation_name": "target_url", "column_name": "target_url"}, {"documentation_package": "", "documentation_name": "user_agent", "column_name": "user_agent"}, {"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "broadcast_id", "column_name": "broadcast_id"}, {"documentation_package": "", "documentation_name": "source", "column_name": "source"}, {"documentation_package": "", "documentation_name": "interaction_type", "column_name": "interaction_type"}], "compiled": true, "compiled_sql": "SELECT\n    *,\n    (regexp_split_to_array(\n        (regexp_split_to_array(\n            (regexp_split_to_array(\n                c.target_url, 'user')\n            )[2], E'[=:]+')\n        )[2],\n        E'[^a-zA-Z0-9]')\n    )[1] AS northstar_id,\n    COALESCE(\n        (regexp_split_to_array(c.target_url, 'broadcastid=', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcastid_', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcast_id=', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcast_id_', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcast_', 'i'))[2]\n            ) AS broadcast_id,\n    (CASE WHEN target_url ilike '%source=web%' THEN 'web'\n        WHEN target_url ilike '%source=email%' THEN 'email'\n        ELSE 'sms'\n        END) AS SOURCE,\n    CASE\n        WHEN c.user_agent IS NULL THEN 'uncertain'\n        WHEN c.user_agent ILIKE '%facebot twitterbot%'\n                OR c.user_agent ILIKE '%X11; Ubuntu; Linux i686%' THEN 'preview'\n        ELSE 'click' END AS interaction_type\nFROM bertly.clicks c", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n    *,\n    (regexp_split_to_array(\n        (regexp_split_to_array(\n            (regexp_split_to_array(\n                c.target_url, 'user')\n            )[2], E'[=:]+')\n        )[2],\n        E'[^a-zA-Z0-9]')\n    )[1] AS northstar_id,\n    COALESCE(\n        (regexp_split_to_array(c.target_url, 'broadcastid=', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcastid_', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcast_id=', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcast_id_', 'i'))[2],\n        (regexp_split_to_array(c.target_url, 'broadcast_', 'i'))[2]\n            ) AS broadcast_id,\n    (CASE WHEN target_url ilike '%source=web%' THEN 'web'\n        WHEN target_url ilike '%source=email%' THEN 'email'\n        ELSE 'sms'\n        END) AS SOURCE,\n    CASE\n        WHEN c.user_agent IS NULL THEN 'uncertain'\n        WHEN c.user_agent ILIKE '%facebot twitterbot%'\n                OR c.user_agent ILIKE '%X11; Ubuntu; Linux i686%' THEN 'preview'\n        ELSE 'click' END AS interaction_type\nFROM bertly.clicks c", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/bertly/bertly_clicks.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009370088577270508, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.710959Z", "completed_at": "2020-01-30T16:41:07.716038Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.716175Z", "completed_at": "2020-01-30T16:41:07.718250Z"}]}, {"node": {"name": "email_subscription_topics_raw", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "news_subscription/email_subscription_topics_raw.sql", "original_file_path": "models/news_subscription/email_subscription_topics_raw.sql", "package_name": "ds_dbt", "raw_sql": "SELECT DISTINCT\n\t_id as northstar_id,\n\t(audit #>> '{email_subscription_topics,updated_at,date}')::timestamp AS newsletter_updated_at,\n\tjson_array_elements(u.email_subscription_topics)::TEXT AS newsletter_topic\nFROM {{ env_var(\"NORTHSTAR_FT_SCHEMA\") }}.northstar_users_snapshot u\nWHERE audit #>> '{email_subscription_topics,updated_at,date}' IS NOT NULL", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.email_subscription_topics_raw", "empty": false, "fqn": ["ds_dbt", "news_subscription", "email_subscription_topics_raw"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 1}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "email_subscription_topics_raw"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "email_subscription_topics_raw", "columns": {"northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "newsletter_updated_at": {"name": "newsletter_updated_at", "description": "When the item was updated in UTC (eg. 2018-01-01 12:00:00)"}, "newsletter_topic": {"name": "newsletter_topic", "description": "Newsletter topic. (e.g. community, lifestyle)"}}, "description": "Table containing data for all member events.", "patch_path": "models/news_subscription/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "updated_at", "column_name": "newsletter_updated_at"}, {"documentation_package": "", "documentation_name": "newsletter_topic", "column_name": "newsletter_topic"}], "compiled": true, "compiled_sql": "SELECT DISTINCT\n\t_id as northstar_id,\n\t(audit #>> '{email_subscription_topics,updated_at,date}')::timestamp AS newsletter_updated_at,\n\tjson_array_elements(u.email_subscription_topics)::TEXT AS newsletter_topic\nFROM northstar_ft_userapi.northstar_users_snapshot u\nWHERE audit #>> '{email_subscription_topics,updated_at,date}' IS NOT NULL", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT DISTINCT\n\t_id as northstar_id,\n\t(audit #>> '{email_subscription_topics,updated_at,date}')::timestamp AS newsletter_updated_at,\n\tjson_array_elements(u.email_subscription_topics)::TEXT AS newsletter_topic\nFROM northstar_ft_userapi.northstar_users_snapshot u\nWHERE audit #>> '{email_subscription_topics,updated_at,date}' IS NOT NULL", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/news_subscription/email_subscription_topics_raw.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009408950805664062, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.723361Z", "completed_at": "2020-01-30T16:41:07.728464Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.728670Z", "completed_at": "2020-01-30T16:41:07.730215Z"}]}, {"node": {"name": "campaign_info_international", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "campaign_info/campaign_info_international.sql", "original_file_path": "models/campaign_info/campaign_info_international.sql", "package_name": "ds_dbt", "raw_sql": "SELECT \n\tc.id AS campaign_id,\n\tc.internal_title AS campaign_name,\n\ti.*\nFROM {{ env_var('CAMPAIGN_INFO_ASHES_SNAPSHOT') }} i\nLEFT JOIN {{ env_var('FT_ROGUE') }}.campaigns c ON i.campaign_run_id = c.campaign_run_id\nWHERE campaign_language IS DISTINCT FROM 'en'", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.campaign_info_international", "empty": false, "fqn": ["ds_dbt", "campaign_info", "campaign_info_international"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 1}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "campaign_info_international", "columns": {"campaign_id": {"name": "campaign_id", "description": "This is a unique identifier for the campaign"}, "campaign_name": {"name": "campaign_name", "description": "Name of the campaign"}, "campaign_node_id": {"name": "campaign_node_id", "description": "This is a unique identifier for the campaign"}, "campaign_node_id_title": {"name": "campaign_node_id_title", "description": "Campaign title"}, "campaign_run_id": {"name": "campaign_run_id", "description": "Unique identifier for the campaign run"}, "campaign_run_id_title": {"name": "campaign_run_id_title", "description": "Title of the campaign run"}, "campaign_type": {"name": "campaign_type", "description": "Campaign cause type (eg. Mental Health, Education)"}, "campaign_language": {"name": "campaign_language", "description": "\"Language in which the campaign is available\""}, "campaign_run_start_date": {"name": "campaign_run_start_date", "description": "Start date of the campaign run"}, "campaign_run_end_date": {"name": "campaign_run_end_date", "description": "End date of the campaign run"}, "campaign_created_date": {"name": "campaign_created_date", "description": "When the campaign was created in UTC (eg. 2018-01-01 12:00:00)"}, "campaign_noun": {"name": "campaign_noun", "description": "Noun applicable to the user's action"}, "campaign_verb": {"name": "campaign_verb", "description": "Verb describing the action the user should take"}, "campaign_cause_type": {"name": "campaign_cause_type", "description": "Campaign cause type (eg. Mental Health, Education)"}, "campaign_cta": {"name": "campaign_cta", "description": "Campaign's call to action"}, "campaign_action_type": {"name": "campaign_action_type", "description": "Campaign action type (eg. Make Something, Share Something)"}}, "description": "A table containing information about international campaigns", "patch_path": "models/campaign_info/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_id"}, {"documentation_package": "", "documentation_name": "campaign_name", "column_name": "campaign_name"}, {"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_node_id"}, {"documentation_package": "", "documentation_name": "campaign_node_id_title", "column_name": "campaign_node_id_title"}, {"documentation_package": "", "documentation_name": "campaign_run_id", "column_name": "campaign_run_id"}, {"documentation_package": "", "documentation_name": "campaign_run_id_title", "column_name": "campaign_run_id_title"}, {"documentation_package": "", "documentation_name": "campaign_cause_type", "column_name": "campaign_type"}, {"documentation_package": "", "documentation_name": "campaign_language", "column_name": "campaign_language"}, {"documentation_package": "", "documentation_name": "campaign_run_start_date", "column_name": "campaign_run_start_date"}, {"documentation_package": "", "documentation_name": "campaign_run_end_date", "column_name": "campaign_run_end_date"}, {"documentation_package": "", "documentation_name": "campaign_created_date", "column_name": "campaign_created_date"}, {"documentation_package": "", "documentation_name": "campaign_noun", "column_name": "campaign_noun"}, {"documentation_package": "", "documentation_name": "campaign_verb", "column_name": "campaign_verb"}, {"documentation_package": "", "documentation_name": "campaign_cause_type", "column_name": "campaign_cause_type"}, {"documentation_package": "", "documentation_name": "campaign_cta", "column_name": "campaign_cta"}, {"documentation_package": "", "documentation_name": "campaign_action_type", "column_name": "campaign_action_type"}], "compiled": true, "compiled_sql": "SELECT \n\tc.id AS campaign_id,\n\tc.internal_title AS campaign_name,\n\ti.*\nFROM public.campaign_info_ashes_snapshot i\nLEFT JOIN ft_dosomething_rogue.campaigns c ON i.campaign_run_id = c.campaign_run_id\nWHERE campaign_language IS DISTINCT FROM 'en'", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT \n\tc.id AS campaign_id,\n\tc.internal_title AS campaign_name,\n\ti.*\nFROM public.campaign_info_ashes_snapshot i\nLEFT JOIN ft_dosomething_rogue.campaigns c ON i.campaign_run_id = c.campaign_run_id\nWHERE campaign_language IS DISTINCT FROM 'en'", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/campaign_info/campaign_info_international.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011256933212280273, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.734080Z", "completed_at": "2020-01-30T16:41:07.740640Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.740794Z", "completed_at": "2020-01-30T16:41:07.743135Z"}]}, {"node": {"name": "post_actions", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "post_actions/post_actions.sql", "original_file_path": "models/post_actions/post_actions.sql", "package_name": "ds_dbt", "raw_sql": "SELECT *\nFROM {{ env_var('FT_ROGUE') }}.actions", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "model.ds_dbt.post_actions", "empty": false, "fqn": ["ds_dbt", "post_actions", "post_actions"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS post_actions_unique ON {{ this }}(created_at, id)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "post_actions"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "post_actions", "columns": {"id": {"name": "id", "description": "Unique identifier for the post"}, "name": {"name": "name", "description": "Name of the action. (e.g. Huddle for Heroes Photo Reportback)"}, "campaign_id": {"name": "campaign_id", "description": "This is a unique identifier for the campaign"}, "post_type": {"name": "post_type", "description": "Type of post, (e.g. photo, voter-reg)"}, "noun": {"name": "noun", "description": "Noun that corresponds to the item in the call to action that was delivered. (e.g. drawings, tweets)"}, "verb": {"name": "verb", "description": "Verb corresponding to the action the user took. (e.g. shared, sent, taken)"}, "created_at": {"name": "created_at", "description": "When the item was created in UTC (eg. 2018-01-01 12:00:00)"}, "updated_at": {"name": "updated_at", "description": "When the item was updated in UTC (eg. 2018-01-01 12:00:00)"}, "deleted_at": {"name": "deleted_at", "description": "Date time in UTC when a user deleted their post."}, "_fivetran_deleted": {"name": "_fivetran_deleted", "description": "Marks rows that were deleted in the source table"}, "_fivetran_synced": {"name": "_fivetran_synced", "description": "(UTC timestamp) keeps track of when each row was last successfully synced"}, "reportback": {"name": "reportback", "description": "Whether the post is a reportback"}, "civic_action": {"name": "civic_action", "description": "Whether the post is a Civic Action. The application allows for multiple types of posts."}, "scholarship_entry": {"name": "scholarship_entry", "description": "Whether the post is a Scholarship Entry. The application allows for multiple types of posts."}, "active": {"name": "active", "description": "Whether the user is active"}, "anonymous": {"name": "anonymous", "description": "Whether the user is anonymous when making the post"}, "callpower_campaign_id": {"name": "callpower_campaign_id", "description": "Unique ID corresponding to the Callpower campaign. Callpower allows users to record messages for their representatives."}, "quiz": {"name": "quiz", "description": "Whether the post is a quiz"}, "action_type": {"name": "action_type", "description": "Type of action the user took. (e.g. share-something, donate-something)"}, "online": {"name": "online", "description": "Whether the action is a online as opposed to IRL."}, "time_commitment": {"name": "time_commitment", "description": "Estimated time required to do the action (e.g. 3.0+, <0.5)"}}, "description": "Table that tracks actions like reportbacks, civic actions and scholarship entries.", "patch_path": "models/post_actions/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "id", "column_name": "id"}, {"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_id"}, {"documentation_package": "", "documentation_name": "post_type", "column_name": "post_type"}, {"documentation_package": "", "documentation_name": "noun", "column_name": "noun"}, {"documentation_package": "", "documentation_name": "verb", "column_name": "verb"}, {"documentation_package": "", "documentation_name": "created_at", "column_name": "created_at"}, {"documentation_package": "", "documentation_name": "updated_at", "column_name": "updated_at"}, {"documentation_package": "", "documentation_name": "deleted_at", "column_name": "deleted_at"}, {"documentation_package": "", "documentation_name": "_fivetran_deleted", "column_name": "_fivetran_deleted"}, {"documentation_package": "", "documentation_name": "_fivetran_synced", "column_name": "_fivetran_synced"}, {"documentation_package": "", "documentation_name": "reportback", "column_name": "reportback"}, {"documentation_package": "", "documentation_name": "civic_action", "column_name": "civic_action"}, {"documentation_package": "", "documentation_name": "scholarship_entry", "column_name": "scholarship_entry"}, {"documentation_package": "", "documentation_name": "active", "column_name": "active"}, {"documentation_package": "", "documentation_name": "anonymous", "column_name": "anonymous"}, {"documentation_package": "", "documentation_name": "callpower_campaign_id", "column_name": "callpower_campaign_id"}, {"documentation_package": "", "documentation_name": "quiz", "column_name": "quiz"}, {"documentation_package": "", "documentation_name": "action_type", "column_name": "action_type"}, {"documentation_package": "", "documentation_name": "online", "column_name": "online"}, {"documentation_package": "", "documentation_name": "time_commitment", "column_name": "time_commitment"}], "compiled": true, "compiled_sql": "SELECT *\nFROM ft_dosomething_rogue.actions", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT *\nFROM ft_dosomething_rogue.actions", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/post_actions/post_actions.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.014444589614868164, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.749038Z", "completed_at": "2020-01-30T16:41:07.757140Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.757328Z", "completed_at": "2020-01-30T16:41:07.760018Z"}]}, {"node": {"name": "northstar_users_snapshot", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "snapshot", "path": "northstar.sql", "original_file_path": "snapshots/northstar.sql", "package_name": "ds_dbt", "raw_sql": "\n\n    {{\n        config(\n          target_database=env_var(\"NORTHSTAR_TARGET_DB\"),\n          target_schema=env_var(\"NORTHSTAR_FT_SCHEMA\"),\n          unique_key='_id',\n          strategy='timestamp',\n          updated_at='updated_at',\n        )\n    }}\n    \n    select * from {{ env_var('NORTHSTAR_FT_SCHEMA') }}.users\n    \n", "refs": [], "sources": [], "depends_on": {"nodes": [], "macros": []}, "unique_id": "snapshot.ds_dbt.northstar_users_snapshot", "empty": false, "fqn": ["ds_dbt", "northstar_users_snapshot"], "tags": [], "config": {"enabled": true, "materialized": "snapshot", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "target_database": "quasar_prod_warehouse", "target_schema": "northstar_ft_userapi", "unique_key": "_id", "strategy": "timestamp", "updated_at": "updated_at"}, "schema": "northstar_ft_userapi", "database": "quasar_prod_warehouse", "alias": "northstar_users_snapshot", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n    \n    \n    select * from northstar_ft_userapi.users\n    ", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n    \n    \n    select * from northstar_ft_userapi.users\n    ", "wrapped_sql": "None"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009392976760864258, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.766082Z", "completed_at": "2020-01-30T16:41:07.771118Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.771237Z", "completed_at": "2020-01-30T16:41:07.772218Z"}]}, {"node": {"name": "not_null_snowplow_base_event_browser_size", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_browser_size.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='browser_size') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_browser_size", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_browser_size"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_browser_size", "column_name": "browser_size", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere browser_size is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere browser_size is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere browser_size is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_browser_size.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007651090621948242, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.775036Z", "completed_at": "2020-01-30T16:41:07.779621Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.779791Z", "completed_at": "2020-01-30T16:41:07.781035Z"}]}, {"node": {"name": "not_null_snowplow_base_event_device_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_device_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='device_id') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_device_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_device_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_device_id", "column_name": "device_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere device_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere device_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere device_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_device_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008696794509887695, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.783850Z", "completed_at": "2020-01-30T16:41:07.789471Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.789607Z", "completed_at": "2020-01-30T16:41:07.790910Z"}]}, {"node": {"name": "not_null_snowplow_base_event_event_datetime", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_event_datetime.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='event_datetime') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_event_datetime", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_event_datetime"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_event_datetime", "column_name": "event_datetime", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_datetime is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_datetime is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_datetime is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_event_datetime.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009070158004760742, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.794963Z", "completed_at": "2020-01-30T16:41:07.800446Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.800635Z", "completed_at": "2020-01-30T16:41:07.801799Z"}]}, {"node": {"name": "not_null_snowplow_base_event_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='event_id') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009464025497436523, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.804789Z", "completed_at": "2020-01-30T16:41:07.810194Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.810434Z", "completed_at": "2020-01-30T16:41:07.812535Z"}]}, {"node": {"name": "not_null_snowplow_base_event_event_source", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_event_source.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='event_source') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_event_source", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_event_source"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_event_source", "column_name": "event_source", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_source is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_source is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_source is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_event_source.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011682987213134766, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.817614Z", "completed_at": "2020-01-30T16:41:07.824773Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.824950Z", "completed_at": "2020-01-30T16:41:07.826625Z"}]}, {"node": {"name": "not_null_snowplow_base_event_event_type", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_event_type.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='event_type') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_event_type", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_event_type"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_event_type", "column_name": "event_type", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_type is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_type is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere event_type is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_event_type.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008136987686157227, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.829476Z", "completed_at": "2020-01-30T16:41:07.834560Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.834720Z", "completed_at": "2020-01-30T16:41:07.835960Z"}]}, {"node": {"name": "not_null_snowplow_base_event_host", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_host.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='host') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_host", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_host"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_host", "column_name": "host", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere host is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere host is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere host is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_host.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.014365196228027344, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.840490Z", "completed_at": "2020-01-30T16:41:07.850856Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.851011Z", "completed_at": "2020-01-30T16:41:07.852359Z"}]}, {"node": {"name": "not_null_snowplow_base_event_path", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_path.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='path') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_path", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_path"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_path", "column_name": "path", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere path is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere path is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere path is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_path.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008722066879272461, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.854185Z", "completed_at": "2020-01-30T16:41:07.860557Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.860694Z", "completed_at": "2020-01-30T16:41:07.862396Z"}]}, {"node": {"name": "not_null_snowplow_base_event_referrer_host", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_referrer_host.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='referrer_host') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_referrer_host", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_referrer_host"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_referrer_host", "column_name": "referrer_host", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere referrer_host is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere referrer_host is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere referrer_host is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_referrer_host.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011221885681152344, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.867521Z", "completed_at": "2020-01-30T16:41:07.874258Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.874464Z", "completed_at": "2020-01-30T16:41:07.875550Z"}]}, {"node": {"name": "not_null_snowplow_base_event_referrer_path", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_referrer_path.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='referrer_path') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_referrer_path", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_referrer_path"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_referrer_path", "column_name": "referrer_path", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere referrer_path is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere referrer_path is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere referrer_path is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_referrer_path.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008210182189941406, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.878352Z", "completed_at": "2020-01-30T16:41:07.883517Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.883654Z", "completed_at": "2020-01-30T16:41:07.884938Z"}]}, {"node": {"name": "not_null_snowplow_base_event_session_counter", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_session_counter.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='session_counter') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_session_counter", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_session_counter"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_session_counter", "column_name": "session_counter", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere session_counter is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere session_counter is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere session_counter is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_session_counter.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.01020503044128418, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.889394Z", "completed_at": "2020-01-30T16:41:07.895612Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.895838Z", "completed_at": "2020-01-30T16:41:07.897364Z"}]}, {"node": {"name": "not_null_snowplow_base_event_session_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_base_event_session_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_base_event'), column_name='session_id') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_base_event_session_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_base_event_session_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_base_event_session_id", "column_name": "session_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere session_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere session_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\nwhere session_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_base_event_session_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007749080657958984, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.900164Z", "completed_at": "2020-01-30T16:41:07.905044Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.905226Z", "completed_at": "2020-01-30T16:41:07.906307Z"}]}, {"node": {"name": "unique_snowplow_base_event_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_snowplow_base_event_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('snowplow_base_event'), column_name='event_id') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.unique_snowplow_base_event_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_snowplow_base_event_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_snowplow_base_event_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_snowplow_base_event_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.018491744995117188, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.911209Z", "completed_at": "2020-01-30T16:41:07.923236Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.923483Z", "completed_at": "2020-01-30T16:41:07.926566Z"}]}, {"node": {"name": "unique_snowplow_base_event_event_source", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_snowplow_base_event_event_source.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('snowplow_base_event'), column_name='event_source') }}", "refs": [["snowplow_base_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event"], "macros": []}, "unique_id": "test.ds_dbt.unique_snowplow_base_event_event_source", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_snowplow_base_event_event_source"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_snowplow_base_event_event_source", "column_name": "event_source", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_snowplow_base_event_event_source.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009432792663574219, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.929608Z", "completed_at": "2020-01-30T16:41:07.935994Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.936198Z", "completed_at": "2020-01-30T16:41:07.937355Z"}]}, {"node": {"name": "snowplow_raw_events", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "phoenix_events/snowplow_raw_events.sql", "original_file_path": "models/phoenix_events/snowplow_raw_events.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n\tb.event_id,\n\tb.event_source,\n\tb.event_datetime,\n\tb.event_name,\n\tb.event_type,\n\tb.\"host\",\n\tb.\"path\",\n    b.query_parameters,\n\tb.se_category,\n\tb.se_action,\n\tb.se_label,\n\tb.session_id,\n\tb.session_counter,\n\tb.browser_size,\n\tb.northstar_id,\n\tb.device_id,\n\tb.referrer_host,\n\tb.referrer_path,\n\tb.referrer_source,\n\tp.utm_source,\n\tp.utm_medium,\n\tp.utm_campaign,\n\tp.url AS clicked_link_url,\n\tp.campaign_id,\n\tp.modal_type,\n\tp.search_query,\n\tp.context_source\n  FROM {{ ref('snowplow_base_event') }} b\n  LEFT JOIN {{ ref('snowplow_payload_event') }} p \n  ON b.event_id = p.event_id", "refs": [["snowplow_base_event"], ["snowplow_payload_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event", "model.ds_dbt.snowplow_payload_event"], "macros": []}, "unique_id": "model.ds_dbt.snowplow_raw_events", "empty": false, "fqn": ["ds_dbt", "phoenix_events", "snowplow_raw_events"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS raw_event_id ON {{ this }}(event_id)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "snowplow_raw_events"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "snowplow_raw_events", "columns": {"event_id": {"name": "event_id", "description": "This is a unique identifier for each event"}, "event_source": {"name": "event_source", "description": "Application source for event (eg. Phoenix, Northstar)"}, "event_datetime": {"name": "event_datetime", "description": "When the event occurred in UTC (eg. 2018-01-01 12:00:00)"}, "event_name": {"name": "event_name", "description": "Name of the event (eg. northstar_submitted_register, https://docs.google.com/spreadsheets/d/1lm-fGrIm85nUTxSojqyCt_Ehmm1zEbViFhKpxcJiz1A/edit#gid=406441516)"}, "event_type": {"name": "event_type", "description": "Type of event (pv = 'Page View', se = 'Structured Event')"}, "host": {"name": "host", "description": "URL host where event occurred (eg. www.dosomething.org or identity.dosomething.org)"}, "path": {"name": "path", "description": "URL path event occurred at (eg. /login or /us/campaigns/huddle-for-heroes)"}, "query_parameters": {"name": "query_parameters", "description": "Optional query parameters for the request (eg. query=huddle)"}, "se_category": {"name": "se_category", "description": "Category of event (eg. focused_field, authentication) - Custom structured event"}, "se_action": {"name": "se_action", "description": "Action performed / event name (eg. form_submitted, action_failed) - Custom structured event"}, "se_label": {"name": "se_label", "description": "The object of the action (eg. first_name, register, voter_reg_status) - Custom structured event"}, "session_id": {"name": "session_id", "description": "Unique identifier of the user's session"}, "session_counter": {"name": "session_counter", "description": "How many sessions a user has started"}, "browser_size": {"name": "browser_size", "description": "Which type of browser a user is using (eg. Mobile, Desktop)"}, "northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "device_id": {"name": "device_id", "description": "ID of the device used"}, "referrer_host": {"name": "referrer_host", "description": "URL host of the referring site (eg. google.com)"}, "referrer_path": {"name": "referrer_path", "description": "URL path from referring site (eg. /10-stats-on-teen-drug-and-alcohol-use/)"}, "referrer_source": {"name": "referrer_source", "description": "Referrer source name (eg. Google, Facebook)"}, "utm_source": {"name": "utm_source", "description": "Tracks where the traffic is coming from. (eg. scholarship_listing, Facebook)"}, "utm_medium": {"name": "utm_medium", "description": "How the traffic got to the platform (eg. referral, CPC)"}, "utm_campaign": {"name": "utm_campaign", "description": "Tracks which campaign the traffic was generated by. Shows up in Google Analytics as Campaign Name (eg. editorial_newsletter)"}, "clicked_link_url": {"name": "clicked_link_url", "description": "URL of campaign (eg. https://dosome.click/nyn5m7)"}, "campaign_id": {"name": "campaign_id", "description": "Internal campaign id from contentful"}, "modal_type": {"name": "modal_type", "description": "NULL or SURVEY_MODAL"}}, "description": "Table combining snowplow_base_event and snowplow_paylod_event into rich raw data source for all clickstream info", "patch_path": "models/phoenix_events/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "event_id", "column_name": "event_id"}, {"documentation_package": "", "documentation_name": "event_source", "column_name": "event_source"}, {"documentation_package": "", "documentation_name": "event_datetime", "column_name": "event_datetime"}, {"documentation_package": "", "documentation_name": "event_name", "column_name": "event_name"}, {"documentation_package": "", "documentation_name": "event_type", "column_name": "event_type"}, {"documentation_package": "", "documentation_name": "host", "column_name": "host"}, {"documentation_package": "", "documentation_name": "path", "column_name": "path"}, {"documentation_package": "", "documentation_name": "query_parameters", "column_name": "query_parameters"}, {"documentation_package": "", "documentation_name": "se_category", "column_name": "se_category"}, {"documentation_package": "", "documentation_name": "se_action", "column_name": "se_action"}, {"documentation_package": "", "documentation_name": "se_label", "column_name": "se_label"}, {"documentation_package": "", "documentation_name": "session_id", "column_name": "session_id"}, {"documentation_package": "", "documentation_name": "session_counter", "column_name": "session_counter"}, {"documentation_package": "", "documentation_name": "browser_size", "column_name": "browser_size"}, {"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "device_id", "column_name": "device_id"}, {"documentation_package": "", "documentation_name": "referrer_host", "column_name": "referrer_host"}, {"documentation_package": "", "documentation_name": "referrer_path", "column_name": "referrer_path"}, {"documentation_package": "", "documentation_name": "referrer_source", "column_name": "referrer_source"}, {"documentation_package": "", "documentation_name": "utm_source", "column_name": "utm_source"}, {"documentation_package": "", "documentation_name": "utm_medium", "column_name": "utm_medium"}, {"documentation_package": "", "documentation_name": "utm_campaign", "column_name": "utm_campaign"}, {"documentation_package": "", "documentation_name": "url", "column_name": "clicked_link_url"}, {"documentation_package": "", "documentation_name": "modal_type", "column_name": "modal_type"}], "compiled": true, "compiled_sql": "SELECT\n\tb.event_id,\n\tb.event_source,\n\tb.event_datetime,\n\tb.event_name,\n\tb.event_type,\n\tb.\"host\",\n\tb.\"path\",\n    b.query_parameters,\n\tb.se_category,\n\tb.se_action,\n\tb.se_label,\n\tb.session_id,\n\tb.session_counter,\n\tb.browser_size,\n\tb.northstar_id,\n\tb.device_id,\n\tb.referrer_host,\n\tb.referrer_path,\n\tb.referrer_source,\n\tp.utm_source,\n\tp.utm_medium,\n\tp.utm_campaign,\n\tp.url AS clicked_link_url,\n\tp.campaign_id,\n\tp.modal_type,\n\tp.search_query,\n\tp.context_source\n  FROM \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\" b\n  LEFT JOIN \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\" p \n  ON b.event_id = p.event_id", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n\tb.event_id,\n\tb.event_source,\n\tb.event_datetime,\n\tb.event_name,\n\tb.event_type,\n\tb.\"host\",\n\tb.\"path\",\n    b.query_parameters,\n\tb.se_category,\n\tb.se_action,\n\tb.se_label,\n\tb.session_id,\n\tb.session_counter,\n\tb.browser_size,\n\tb.northstar_id,\n\tb.device_id,\n\tb.referrer_host,\n\tb.referrer_path,\n\tb.referrer_source,\n\tp.utm_source,\n\tp.utm_medium,\n\tp.utm_campaign,\n\tp.url AS clicked_link_url,\n\tp.campaign_id,\n\tp.modal_type,\n\tp.search_query,\n\tp.context_source\n  FROM \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\" b\n  LEFT JOIN \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\" p \n  ON b.event_id = p.event_id", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/phoenix_events/snowplow_raw_events.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.01817488670349121, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.940591Z", "completed_at": "2020-01-30T16:41:07.952917Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.953173Z", "completed_at": "2020-01-30T16:41:07.956796Z"}]}, {"node": {"name": "not_null_snowplow_payload_event_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_payload_event_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_payload_event'), column_name='event_id') }}", "refs": [["snowplow_payload_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_payload_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_payload_event_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_payload_event_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_payload_event_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\"\nwhere event_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\"\nwhere event_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\"\nwhere event_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_payload_event_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011091232299804688, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.964237Z", "completed_at": "2020-01-30T16:41:07.969756Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.969931Z", "completed_at": "2020-01-30T16:41:07.971195Z"}]}, {"node": {"name": "not_null_snowplow_payload_event_ft_timestamp", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_payload_event_ft_timestamp.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_payload_event'), column_name='ft_timestamp') }}", "refs": [["snowplow_payload_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_payload_event"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_payload_event_ft_timestamp", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_payload_event_ft_timestamp"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_payload_event_ft_timestamp", "column_name": "ft_timestamp", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\"\nwhere ft_timestamp is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\"\nwhere ft_timestamp is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\"\nwhere ft_timestamp is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_payload_event_ft_timestamp.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007688999176025391, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.974071Z", "completed_at": "2020-01-30T16:41:07.978843Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.978978Z", "completed_at": "2020-01-30T16:41:07.980169Z"}]}, {"node": {"name": "unique_snowplow_payload_event_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_snowplow_payload_event_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('snowplow_payload_event'), column_name='event_id') }}", "refs": [["snowplow_payload_event"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_payload_event"], "macros": []}, "unique_id": "test.ds_dbt.unique_snowplow_payload_event_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_snowplow_payload_event_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_snowplow_payload_event_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_payload_event\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_snowplow_payload_event_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.014468193054199219, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.985185Z", "completed_at": "2020-01-30T16:41:07.994928Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:07.995153Z", "completed_at": "2020-01-30T16:41:07.996445Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_action_type", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_action_type.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_action_type') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_action_type", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_action_type"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_action_type", "column_name": "campaign_action_type", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_action_type is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_action_type is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_action_type is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_action_type.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008576154708862305, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:07.999859Z", "completed_at": "2020-01-30T16:41:08.005103Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.005237Z", "completed_at": "2020-01-30T16:41:08.006597Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_cause", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_cause.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_cause') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_cause", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_cause"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_cause", "column_name": "campaign_cause", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_cause is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_cause is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_cause is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_cause.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009810924530029297, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.010585Z", "completed_at": "2020-01-30T16:41:08.017207Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.017354Z", "completed_at": "2020-01-30T16:41:08.018429Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_cause_type", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_cause_type.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_cause_type') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_cause_type", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_cause_type"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_cause_type", "column_name": "campaign_cause_type", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_cause_type is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_cause_type is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_cause_type is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_cause_type.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007625102996826172, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.021186Z", "completed_at": "2020-01-30T16:41:08.025878Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.026017Z", "completed_at": "2020-01-30T16:41:08.027230Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_created_date", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_created_date.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_created_date') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_created_date", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_created_date"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_created_date", "column_name": "campaign_created_date", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_created_date is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_created_date is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_created_date is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_created_date.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.014252185821533203, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.031538Z", "completed_at": "2020-01-30T16:41:08.041403Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.041610Z", "completed_at": "2020-01-30T16:41:08.042917Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_cta", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_cta.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_cta') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_cta", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_cta"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_cta", "column_name": "campaign_cta", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_cta is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_cta is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_cta is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_cta.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.00839090347290039, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.044765Z", "completed_at": "2020-01-30T16:41:08.051274Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.051404Z", "completed_at": "2020-01-30T16:41:08.052646Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_id') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_id", "column_name": "campaign_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010210990905761719, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.056631Z", "completed_at": "2020-01-30T16:41:08.063016Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.063181Z", "completed_at": "2020-01-30T16:41:08.064301Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_node_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_node_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_node_id') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_node_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_node_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_node_id", "column_name": "campaign_node_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_node_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_node_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_node_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_node_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007746696472167969, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.067102Z", "completed_at": "2020-01-30T16:41:08.072023Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.072171Z", "completed_at": "2020-01-30T16:41:08.073245Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_node_id_title", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_node_id_title.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_node_id_title') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_node_id_title", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_node_id_title"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_node_id_title", "column_name": "campaign_node_id_title", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_node_id_title is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_node_id_title is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_node_id_title is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_node_id_title.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011490821838378906, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.077439Z", "completed_at": "2020-01-30T16:41:08.084752Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.084978Z", "completed_at": "2020-01-30T16:41:08.086075Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_noun", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_noun.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_noun') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_noun", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_noun"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_noun", "column_name": "campaign_noun", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_noun is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_noun is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_noun is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_noun.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007620096206665039, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.088850Z", "completed_at": "2020-01-30T16:41:08.093610Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.093737Z", "completed_at": "2020-01-30T16:41:08.094853Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_run_end_date", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_run_end_date.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_run_end_date') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_run_end_date", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_run_end_date"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_run_end_date", "column_name": "campaign_run_end_date", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_end_date is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_end_date is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_end_date is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_run_end_date.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011336088180541992, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.099139Z", "completed_at": "2020-01-30T16:41:08.106152Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.106325Z", "completed_at": "2020-01-30T16:41:08.107578Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_run_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_run_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_run_id') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_run_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_run_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_run_id", "column_name": "campaign_run_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_run_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007845878601074219, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.110357Z", "completed_at": "2020-01-30T16:41:08.115376Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.115517Z", "completed_at": "2020-01-30T16:41:08.116599Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_run_id_title", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_run_id_title.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_run_id_title') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_run_id_title", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_run_id_title"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_run_id_title", "column_name": "campaign_run_id_title", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_id_title is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_id_title is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_id_title is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_run_id_title.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010777711868286133, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.121118Z", "completed_at": "2020-01-30T16:41:08.127526Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.127706Z", "completed_at": "2020-01-30T16:41:08.128941Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_run_start_date", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_run_start_date.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_run_start_date') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_run_start_date", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_run_start_date"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_run_start_date", "column_name": "campaign_run_start_date", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_start_date is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_start_date is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_run_start_date is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_run_start_date.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007972240447998047, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.131725Z", "completed_at": "2020-01-30T16:41:08.136836Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.136993Z", "completed_at": "2020-01-30T16:41:08.138084Z"}]}, {"node": {"name": "not_null_campaign_info_campaign_verb", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_campaign_verb.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info'), column_name='campaign_verb') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_campaign_verb", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_campaign_verb"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_campaign_verb", "column_name": "campaign_verb", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_verb is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_verb is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\nwhere campaign_verb is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_campaign_verb.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009706974029541016, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.141395Z", "completed_at": "2020-01-30T16:41:08.147019Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.147224Z", "completed_at": "2020-01-30T16:41:08.149235Z"}]}, {"node": {"name": "unique_campaign_info_campaign_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_campaign_info_campaign_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('campaign_info'), column_name='campaign_id') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.unique_campaign_info_campaign_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_campaign_info_campaign_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_campaign_info_campaign_id", "column_name": "campaign_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_id is not null\n    group by campaign_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_id is not null\n    group by campaign_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_id is not null\n    group by campaign_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_campaign_info_campaign_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008394002914428711, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.152649Z", "completed_at": "2020-01-30T16:41:08.157366Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.157490Z", "completed_at": "2020-01-30T16:41:08.159296Z"}]}, {"node": {"name": "unique_campaign_info_campaign_node_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_campaign_info_campaign_node_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('campaign_info'), column_name='campaign_node_id') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.unique_campaign_info_campaign_node_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_campaign_info_campaign_node_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_campaign_info_campaign_node_id", "column_name": "campaign_node_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_node_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_node_id is not null\n    group by campaign_node_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_node_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_node_id is not null\n    group by campaign_node_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_node_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_node_id is not null\n    group by campaign_node_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_campaign_info_campaign_node_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.012413978576660156, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.164410Z", "completed_at": "2020-01-30T16:41:08.172557Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.172693Z", "completed_at": "2020-01-30T16:41:08.173941Z"}]}, {"node": {"name": "unique_campaign_info_campaign_noun", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_campaign_info_campaign_noun.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('campaign_info'), column_name='campaign_noun') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.unique_campaign_info_campaign_noun", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_campaign_info_campaign_noun"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_campaign_info_campaign_noun", "column_name": "campaign_noun", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_noun\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_noun is not null\n    group by campaign_noun\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_noun\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_noun is not null\n    group by campaign_noun\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_noun\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_noun is not null\n    group by campaign_noun\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_campaign_info_campaign_noun.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008554935455322266, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.176955Z", "completed_at": "2020-01-30T16:41:08.182093Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.182277Z", "completed_at": "2020-01-30T16:41:08.183787Z"}]}, {"node": {"name": "unique_campaign_info_campaign_run_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_campaign_info_campaign_run_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('campaign_info'), column_name='campaign_run_id') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.unique_campaign_info_campaign_run_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_campaign_info_campaign_run_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_campaign_info_campaign_run_id", "column_name": "campaign_run_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_run_id is not null\n    group by campaign_run_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_run_id is not null\n    group by campaign_run_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_run_id is not null\n    group by campaign_run_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_campaign_info_campaign_run_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008883953094482422, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.188336Z", "completed_at": "2020-01-30T16:41:08.193665Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.193819Z", "completed_at": "2020-01-30T16:41:08.194898Z"}]}, {"node": {"name": "unique_campaign_info_campaign_run_start_date", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_campaign_info_campaign_run_start_date.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('campaign_info'), column_name='campaign_run_start_date') }}", "refs": [["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "test.ds_dbt.unique_campaign_info_campaign_run_start_date", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_campaign_info_campaign_run_start_date"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_campaign_info_campaign_run_start_date", "column_name": "campaign_run_start_date", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_start_date\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_run_start_date is not null\n    group by campaign_run_start_date\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_start_date\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_run_start_date is not null\n    group by campaign_run_start_date\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_start_date\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info\"\n    where campaign_run_start_date is not null\n    group by campaign_run_start_date\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_campaign_info_campaign_run_start_date.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0078008174896240234, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.197602Z", "completed_at": "2020-01-30T16:41:08.202344Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.202473Z", "completed_at": "2020-01-30T16:41:08.203838Z"}]}, {"node": {"name": "gambit_messages_inbound", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "gambit_messages/gambit_messages_inbound.sql", "original_file_path": "models/gambit_messages/gambit_messages_inbound.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n  *\n  FROM\n    {{ ref('messages_flattened') }} f\n  WHERE\n    f.direction = 'inbound'\n    AND f.user_id IS NOT NULL\n  UNION ALL\n    (SELECT\n      g.agent_id,\n      g.attachment_url,\n      g.attachment_content_type,\n      g.broadcast_id,\n      g.campaign_id,\n      g.conversation_id,\n      g.created_at,\n      g.direction,\n      g.message_id,\n      g.macro,\n      g.\"match\",\n      g.carrier_delivered_at,\n      g.carrier_failure_code,\n      g.total_segments,\n      g.platform_message_id,\n      g.template,\n      g.text,\n      g.topic,\n      u.northstar_id AS user_id\n    FROM\n      {{ ref('messages_flattened') }} g\n    LEFT JOIN\n      {{ env_var('FT_GAMBIT') }}.conversations c\n    ON g.conversation_id = c._id\n    LEFT JOIN\n      public.users u\n      ON substring(c.platform_user_id, 3, 10) = u.mobile\n      AND u.mobile IS NOT NULL\n      AND u.mobile <> ''\n    WHERE\n      g.direction = 'inbound'\n      AND g.user_id IS NULL)", "refs": [["messages_flattened"], ["messages_flattened"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.messages_flattened", "model.ds_dbt.messages_flattened"], "macros": []}, "unique_id": "model.ds_dbt.gambit_messages_inbound", "empty": false, "fqn": ["ds_dbt", "gambit_messages", "gambit_messages_inbound"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS messages_in_index ON {{ this }}(message_id, created_at, user_id, conversation_id)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "gambit_messages_inbound"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "gambit_messages_inbound", "columns": {"agent_id": {"name": "agent_id", "description": "If set, the content type of the picture the member is sending us. Exp. image/png."}, "attachment_content_type": {"name": "attachment_content_type", "description": "If set, the handle of the Front agent this outbound support message is from."}, "attachment_url": {"name": "attachment_url", "description": "If set, link to the picture sent by the member."}, "broadcast_id": {"name": "broadcast_id", "description": "If set, this message was an outbound broadcast (when direction == 'outbound-api-send'), or the User's reply to an outbound broadcast (when direction == 'inbound')"}, "campaign_id": {"name": "campaign_id", "description": "If set, holds a reference to the **last** campaign topic the member's conversation was in. This is useful to allow members to talk to Gambit and get quick responses (through Rivescript), without Gambit completely forgetting what state the member's interaction with a campaign topic was in. 'This is a unique identifier for the campaign'"}, "conversation_id": {"name": "conversation_id", "description": "Conversation the Message belongs to."}, "created_at": {"name": "created_at", "description": "Message's created date."}, "direction": {"name": "direction", "description": "Describes if the message is being received (inbound) or being sent (outbound-*)."}, "message_id": {"name": "message_id", "description": "Unique identifier for a Message (MongoDB id)."}, "macro": {"name": "macro", "description": "If set, this message is part of this macro's workflow. Example: subscription status updates, voting plan submission, aswering a multichoice broadcast, etc."}, "match": {"name": "match", "description": "Rivescript trigger matched by inbound text."}, "carrier_delivered_at": {"name": "carrier_delivered_at", "description": "Date when we received a delivery confirmation from the carrier."}, "carrier_failure_code": {"name": "carrier_failure_code", "description": "Error code reported by the carrier (Only for outbound messages)."}, "total_segments": {"name": "total_segments", "description": "Number of chunks the message is broken into by the SMS API."}, "platform_message_id": {"name": "platform_message_id", "description": "The Message identifier per platform."}, "template": {"name": "template", "description": "If set, template of outbound message sent (e.g. askQuantity, completedMenu)."}, "text": {"name": "text", "description": "Body of the message."}, "topic": {"name": "topic", "description": "Holds a reference to the **last** campaign topic the member's conversation was in. This is useful to allow members to talk to Gambit and get quick responses (through Rivescript), without Gambit completely forgetting what state the member's interaction with a campaign topic was in."}, "user_id": {"name": "user_id", "description": "The Northstar id of the member."}}, "description": "Inbound messages.", "patch_path": "models/gambit_messages/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "agent_id", "column_name": "agent_id"}, {"documentation_package": "", "documentation_name": "attachment_content_type", "column_name": "attachment_content_type"}, {"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_id"}, {"documentation_package": "", "documentation_name": "topic", "column_name": "topic"}], "compiled": true, "compiled_sql": "SELECT\n  *\n  FROM\n    \"quasar_prod_warehouse\".\"public\".\"messages_flattened\" f\n  WHERE\n    f.direction = 'inbound'\n    AND f.user_id IS NOT NULL\n  UNION ALL\n    (SELECT\n      g.agent_id,\n      g.attachment_url,\n      g.attachment_content_type,\n      g.broadcast_id,\n      g.campaign_id,\n      g.conversation_id,\n      g.created_at,\n      g.direction,\n      g.message_id,\n      g.macro,\n      g.\"match\",\n      g.carrier_delivered_at,\n      g.carrier_failure_code,\n      g.total_segments,\n      g.platform_message_id,\n      g.template,\n      g.text,\n      g.topic,\n      u.northstar_id AS user_id\n    FROM\n      \"quasar_prod_warehouse\".\"public\".\"messages_flattened\" g\n    LEFT JOIN\n      ft_gambit_conversations_api.conversations c\n    ON g.conversation_id = c._id\n    LEFT JOIN\n      public.users u\n      ON substring(c.platform_user_id, 3, 10) = u.mobile\n      AND u.mobile IS NOT NULL\n      AND u.mobile <> ''\n    WHERE\n      g.direction = 'inbound'\n      AND g.user_id IS NULL)", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n  *\n  FROM\n    \"quasar_prod_warehouse\".\"public\".\"messages_flattened\" f\n  WHERE\n    f.direction = 'inbound'\n    AND f.user_id IS NOT NULL\n  UNION ALL\n    (SELECT\n      g.agent_id,\n      g.attachment_url,\n      g.attachment_content_type,\n      g.broadcast_id,\n      g.campaign_id,\n      g.conversation_id,\n      g.created_at,\n      g.direction,\n      g.message_id,\n      g.macro,\n      g.\"match\",\n      g.carrier_delivered_at,\n      g.carrier_failure_code,\n      g.total_segments,\n      g.platform_message_id,\n      g.template,\n      g.text,\n      g.topic,\n      u.northstar_id AS user_id\n    FROM\n      \"quasar_prod_warehouse\".\"public\".\"messages_flattened\" g\n    LEFT JOIN\n      ft_gambit_conversations_api.conversations c\n    ON g.conversation_id = c._id\n    LEFT JOIN\n      public.users u\n      ON substring(c.platform_user_id, 3, 10) = u.mobile\n      AND u.mobile IS NOT NULL\n      AND u.mobile <> ''\n    WHERE\n      g.direction = 'inbound'\n      AND g.user_id IS NULL)", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/gambit_messages/gambit_messages_inbound.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.013195037841796875, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.207943Z", "completed_at": "2020-01-30T16:41:08.216617Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.216748Z", "completed_at": "2020-01-30T16:41:08.218524Z"}]}, {"node": {"name": "gambit_messages_outbound", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "gambit_messages/gambit_messages_outbound.sql", "original_file_path": "models/gambit_messages/gambit_messages_outbound.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n    f.campaign_id,\n    f.conversation_id,\n    f.broadcast_id,\n    f.created_at,\n    f.direction,\n    f.message_id,\n    f.macro,\n    f.\"match\",\n    f.carrier_delivered_at,\n    f.carrier_failure_code,\n    f.platform_message_id,\n    f.template,\n    f.text,\n    f.topic,\n    f.user_id\n  FROM\n    {{ ref('messages_flattened') }} f\n  WHERE\n    f.direction <> 'inbound'\n    AND f.user_id IS NOT NULL\n  UNION ALL\n    (SELECT\n      g.campaign_id,\n      g.conversation_id,\n      g.broadcast_id,\n      g.created_at,\n      g.direction,\n      g.message_id,\n      g.macro,\n      g.\"match\",\n      g.carrier_delivered_at,\n      g.carrier_failure_code,\n      g.platform_message_id,\n      g.template,\n      g.text,\n      g.topic,\n      u.northstar_id AS user_id\n      FROM\n        {{ ref('messages_flattened') }} g\n      LEFT JOIN\n        {{ env_var('FT_GAMBIT') }}.conversations c\n      ON g.conversation_id = c._id\n      LEFT JOIN\n        public.users u\n      ON substring(c.platform_user_id, 3, 10) = u.mobile\n        AND u.mobile IS NOT NULL\n        AND u.mobile <> ''\n      WHERE\n        g.direction <> 'inbound'\n        AND g.user_id IS NULL)", "refs": [["messages_flattened"], ["messages_flattened"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.messages_flattened", "model.ds_dbt.messages_flattened"], "macros": []}, "unique_id": "model.ds_dbt.gambit_messages_outbound", "empty": false, "fqn": ["ds_dbt", "gambit_messages", "gambit_messages_outbound"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS messages_out_index ON {{ this }}(message_id, created_at, user_id, conversation_id)", "transaction": true, "index": 0}, {"sql": "CREATE INDEX IF NOT EXISTS deliverability ON {{ this }}(created_at, carrier_failure_code)", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "gambit_messages_outbound"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "gambit_messages_outbound", "columns": {"agent_id": {"name": "agent_id", "description": "If set, the content type of the picture the member is sending us. Exp. image/png."}, "attachment_content_type": {"name": "attachment_content_type", "description": "If set, the handle of the Front agent this outbound support message is from."}, "attachment_url": {"name": "attachment_url", "description": "If set, link to the picture sent by the member."}, "broadcast_id": {"name": "broadcast_id", "description": "If set, this message was an outbound broadcast (when direction == 'outbound-api-send'), or the User's reply to an outbound broadcast (when direction == 'inbound')"}, "campaign_id": {"name": "campaign_id", "description": "If set, holds a reference to the **last** campaign topic the member's conversation was in. This is useful to allow members to talk to Gambit and get quick responses (through Rivescript), without Gambit completely forgetting what state the member's interaction with a campaign topic was in. 'This is a unique identifier for the campaign'"}, "conversation_id": {"name": "conversation_id", "description": "Conversation the Message belongs to."}, "created_at": {"name": "created_at", "description": "Message's created date."}, "direction": {"name": "direction", "description": "Describes if the message is being received (inbound) or being sent (outbound-*)."}, "message_id": {"name": "message_id", "description": "Unique identifier for a Message (MongoDB id)."}, "macro": {"name": "macro", "description": "If set, this message is part of this macro's workflow. Example: subscription status updates, voting plan submission, aswering a multichoice broadcast, etc."}, "match": {"name": "match", "description": "Rivescript trigger matched by inbound text."}, "carrier_delivered_at": {"name": "carrier_delivered_at", "description": "Date when we received a delivery confirmation from the carrier."}, "carrier_failure_code": {"name": "carrier_failure_code", "description": "Error code reported by the carrier (Only for outbound messages)."}, "total_segments": {"name": "total_segments", "description": "Number of chunks the message is broken into by the SMS API."}, "platform_message_id": {"name": "platform_message_id", "description": "The Message identifier per platform."}, "template": {"name": "template", "description": "If set, template of outbound message sent (e.g. askQuantity, completedMenu)."}, "text": {"name": "text", "description": "Body of the message."}, "topic": {"name": "topic", "description": "Holds a reference to the **last** campaign topic the member's conversation was in. This is useful to allow members to talk to Gambit and get quick responses (through Rivescript), without Gambit completely forgetting what state the member's interaction with a campaign topic was in."}, "user_id": {"name": "user_id", "description": "The Northstar id of the member."}}, "description": "Outbound messages.", "patch_path": "models/gambit_messages/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "agent_id", "column_name": "agent_id"}, {"documentation_package": "", "documentation_name": "attachment_content_type", "column_name": "attachment_content_type"}, {"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_id"}, {"documentation_package": "", "documentation_name": "topic", "column_name": "topic"}], "compiled": true, "compiled_sql": "SELECT\n    f.campaign_id,\n    f.conversation_id,\n    f.broadcast_id,\n    f.created_at,\n    f.direction,\n    f.message_id,\n    f.macro,\n    f.\"match\",\n    f.carrier_delivered_at,\n    f.carrier_failure_code,\n    f.platform_message_id,\n    f.template,\n    f.text,\n    f.topic,\n    f.user_id\n  FROM\n    \"quasar_prod_warehouse\".\"public\".\"messages_flattened\" f\n  WHERE\n    f.direction <> 'inbound'\n    AND f.user_id IS NOT NULL\n  UNION ALL\n    (SELECT\n      g.campaign_id,\n      g.conversation_id,\n      g.broadcast_id,\n      g.created_at,\n      g.direction,\n      g.message_id,\n      g.macro,\n      g.\"match\",\n      g.carrier_delivered_at,\n      g.carrier_failure_code,\n      g.platform_message_id,\n      g.template,\n      g.text,\n      g.topic,\n      u.northstar_id AS user_id\n      FROM\n        \"quasar_prod_warehouse\".\"public\".\"messages_flattened\" g\n      LEFT JOIN\n        ft_gambit_conversations_api.conversations c\n      ON g.conversation_id = c._id\n      LEFT JOIN\n        public.users u\n      ON substring(c.platform_user_id, 3, 10) = u.mobile\n        AND u.mobile IS NOT NULL\n        AND u.mobile <> ''\n      WHERE\n        g.direction <> 'inbound'\n        AND g.user_id IS NULL)", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n    f.campaign_id,\n    f.conversation_id,\n    f.broadcast_id,\n    f.created_at,\n    f.direction,\n    f.message_id,\n    f.macro,\n    f.\"match\",\n    f.carrier_delivered_at,\n    f.carrier_failure_code,\n    f.platform_message_id,\n    f.template,\n    f.text,\n    f.topic,\n    f.user_id\n  FROM\n    \"quasar_prod_warehouse\".\"public\".\"messages_flattened\" f\n  WHERE\n    f.direction <> 'inbound'\n    AND f.user_id IS NOT NULL\n  UNION ALL\n    (SELECT\n      g.campaign_id,\n      g.conversation_id,\n      g.broadcast_id,\n      g.created_at,\n      g.direction,\n      g.message_id,\n      g.macro,\n      g.\"match\",\n      g.carrier_delivered_at,\n      g.carrier_failure_code,\n      g.platform_message_id,\n      g.template,\n      g.text,\n      g.topic,\n      u.northstar_id AS user_id\n      FROM\n        \"quasar_prod_warehouse\".\"public\".\"messages_flattened\" g\n      LEFT JOIN\n        ft_gambit_conversations_api.conversations c\n      ON g.conversation_id = c._id\n      LEFT JOIN\n        public.users u\n      ON substring(c.platform_user_id, 3, 10) = u.mobile\n        AND u.mobile IS NOT NULL\n        AND u.mobile <> ''\n      WHERE\n        g.direction <> 'inbound'\n        AND g.user_id IS NULL)", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/gambit_messages/gambit_messages_outbound.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011873722076416016, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.223475Z", "completed_at": "2020-01-30T16:41:08.230055Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.230202Z", "completed_at": "2020-01-30T16:41:08.232225Z"}]}, {"node": {"name": "northstar_users_deduped", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "users_table/northstar_users_deduped.sql", "original_file_path": "models/users_table/northstar_users_deduped.sql", "package_name": "ds_dbt", "raw_sql": "SELECT DISTINCT ON (northstar_id, updated_at) *\nFROM {{ ref('northstar_users_raw') }}", "refs": [["northstar_users_raw"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.northstar_users_raw"], "macros": []}, "unique_id": "model.ds_dbt.northstar_users_deduped", "empty": false, "fqn": ["ds_dbt", "users_table", "northstar_users_deduped"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS northstar_users_deduped_northstar_id_updated_at_i ON {{ this }}(northstar_id, updated_at)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO public", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "northstar_users_deduped"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "northstar_users_deduped", "columns": {}, "description": "", "compiled": true, "compiled_sql": "SELECT DISTINCT ON (northstar_id, updated_at) *\nFROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_raw\"", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT DISTINCT ON (northstar_id, updated_at) *\nFROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_raw\"", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/users_table/northstar_users_deduped.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009771108627319336, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.237930Z", "completed_at": "2020-01-30T16:41:08.243002Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.243152Z", "completed_at": "2020-01-30T16:41:08.244560Z"}]}, {"node": {"name": "not_null_signups_northstar_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_signups_northstar_id.sql", "original_file_path": "models/campaign_activity/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('signups'), column_name='northstar_id') }}", "refs": [["signups"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.signups"], "macros": []}, "unique_id": "test.ds_dbt.not_null_signups_northstar_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_signups_northstar_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_signups_northstar_id", "column_name": "northstar_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"signups\"\nwhere northstar_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"signups\"\nwhere northstar_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"signups\"\nwhere northstar_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_signups_northstar_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.013417959213256836, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.248833Z", "completed_at": "2020-01-30T16:41:08.257435Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.257739Z", "completed_at": "2020-01-30T16:41:08.259508Z"}]}, {"node": {"name": "posts", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "campaign_activity/posts.sql", "original_file_path": "models/campaign_activity/posts.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n\tpd.northstar_id as northstar_id,\n\tpd.id AS id,\n\tpd.\"type\" AS \"type\",\n\ta.\"name\" AS \"action\",\n\tpd.status AS status,\n\tpd.quantity AS quantity,\n\tpd.campaign_id,\n\tCASE\n\t\tWHEN pd.id IS NULL THEN NULL\n\t\tWHEN a.\"name\" = 'voter-reg OTG'\n\t\tTHEN pd.quantity\n\t\tELSE 1 END AS reportback_volume,\n\tpd.\"source\" AS \"source\",\n\tCASE\n\t\tWHEN pd.\"source\" IS NULL THEN NULL\n\t\tWHEN pd.\"source\" ilike '%sms%' THEN 'sms'\n\t\tELSE 'web' END AS source_bucket,\n\tCASE\n\t\tWHEN pd.\"type\" = 'phone-call' AND pd.details <> ''\n\t\tTHEN (pd.details::json ->> 'call_timestamp')::timestamptz\n\t\tELSE COALESCE(rtv.created_at, tv.created_at, pd.created_at)\n\t\tEND AS created_at,\n\tpd.url AS url,\n\tpd.text,\n\tCASE\n\t\tWHEN s.\"source\" = 'importer-client'\n\t\tAND pd.\"type\" = 'share-social'\n\t\tAND pd.created_at < s.created_at\n\t\tTHEN -1\n\t\tELSE pd.signup_id END AS signup_id,\n\tCASE\n\t\tWHEN pd.id IS NULL\n\t\tTHEN NULL\n\t\tELSE CONCAT(pd.\"type\", ' - ', a.\"name\") END AS post_class,\n\tCASE WHEN pd.status IN ('accepted', 'pending')\n\t\tAND a.\"name\" NOT ILIKE '%vote%'\n\t\tTHEN 1\n\t\tWHEN pd.status IN ('accepted', 'confirmed', 'register-OVR', 'register-form')\n\t\tAND a.\"name\" ILIKE '%vote%'\n\t\tTHEN 1\n\t\tELSE NULL END AS is_accepted,\n\tpd.action_id,\n\tpd.location,\n\tpd.postal_code,\n\ta.reportback AS is_reportback,\n\tCASE \n\t    WHEN pd.details <> '' THEN (pd.details::json ->> 'number_of_participants')::INT\n\t    ELSE NULL END AS num_participants,\n\ta.civic_action,\n\ta.scholarship_entry,\n\tpd.school_id\nFROM {{ env_var('FT_ROGUE') }}.posts pd\nINNER JOIN {{ ref('signups') }} s\n\tON pd.signup_id = s.id\nLEFT JOIN {{ ref('turbovote') }} tv\n\tON tv.post_id::bigint = pd.id::bigint\nLEFT JOIN\n\t(SELECT\n\t\tDISTINCT r.*,\n\t\tCASE\n\t\t\tWHEN r.started_registration < '2017-01-01'\n\t\t\tTHEN r.started_registration + interval '4 year'\n\t\t\tELSE r.started_registration END AS created_at\n\t\tFROM {{ ref('rock_the_vote') }} r\n\t) rtv\n\tON rtv.post_id::bigint = pd.id::bigint\nLEFT JOIN {{ env_var('FT_ROGUE') }}.actions a\n\tON pd.action_id = a.id\nWHERE pd.deleted_at IS NULL\nAND pd.\"text\" IS DISTINCT FROM 'test runscope upload'\nAND a.\"name\" IS NOT NULL", "refs": [["signups"], ["turbovote"], ["rock_the_vote"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.signups", "model.ds_dbt.turbovote", "model.ds_dbt.rock_the_vote"], "macros": []}, "unique_id": "model.ds_dbt.posts", "empty": false, "fqn": ["ds_dbt", "campaign_activity", "posts"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS posts_unique ON {{ this }}(created_at, campaign_id, id)", "transaction": true, "index": 0}, {"sql": "CREATE INDEX IF NOT EXISTS posts_i ON {{ this }}(is_reportback, is_accepted, signup_id, id, post_class)", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "posts"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "posts", "columns": {"northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "id": {"name": "id", "description": "Unique identifier for the post"}, "type": {"name": "type", "description": "Type of post (e.g. photo)"}, "action": {"name": "action", "description": "Post action (e.g. DefendDreamers_Nov9_CongressCalls, GunViolence2018_Feb15_ParklandResponse)"}, "status": {"name": "status", "description": "Post status (e.g. accepted, rejected)"}, "quantity": {"name": "quantity", "description": "Numerical quantity of items specified in the call to action (e.g. 10, 200)"}, "campaign_id": {"name": "campaign_id", "description": "This is a unique identifier for the campaign"}, "reportback_volume": {"name": "reportback_volume", "description": "This field returns 1 if non voter-reg action, since campaigns team only counts those a 1 reportback. If voter-reg action, we want to count quantity of post as number of registered voters."}, "source": {"name": "source", "description": "Source of the URL (e.g. SMS, web), origin of the post (e.g. phoenix-web, phoenix-ashes, sms), or source where user was acquired. (e.g. sms, phoenix-next)"}, "source_bucket": {"name": "source_bucket", "description": "Grouping bucket for origin of the post (e.g. web, sms)"}, "created_at": {"name": "created_at", "description": "When the item was created in UTC (eg. 2018-01-01 12:00:00)"}, "url": {"name": "url", "description": "URL of campaign (eg. https://dosome.click/nyn5m7)"}, "text": {"name": "text", "description": "Text of the post (e.g. \"Zoo animals and a super hero trying to help too!\")"}, "signup_id": {"name": "signup_id", "description": "Unique identifier for the signup"}, "post_class": {"name": "post_class", "description": "Class of the signup (e.g. \"photo - default\", \"phone-call - DefendDreamers_Jan16_BothBodies\")"}, "is_accepted": {"name": "is_accepted", "description": "Whether the post has been accepted to be displayed to the public on the website"}, "action_id": {"name": "action_id", "description": "Internal identifier of the action"}, "location": {"name": "location", "description": "Location where the action takes place (e.g. US-NY)"}, "postal_code": {"name": "postal_code", "description": "Postal code where the action takes place"}, "is_reportback": {"name": "is_reportback", "description": "Whether the post is a reportback. The application allows for multiple types of posts."}, "civic_action": {"name": "civic_action", "description": "Whether the post is a Civic Action. The application allows for multiple types of posts."}, "scholarship_entry": {"name": "scholarship_entry", "description": "Whether the post is a Scholarship Entry. The application allows for multiple types of posts."}, "school_id": {"name": "school_id", "description": "Unique identifier for the user's school. This info comes from the school finder."}}, "description": "A table containing information about posts", "patch_path": "models/campaign_activity/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "id", "column_name": "id"}, {"documentation_package": "", "documentation_name": "type", "column_name": "type"}, {"documentation_package": "", "documentation_name": "action", "column_name": "action"}, {"documentation_package": "", "documentation_name": "status", "column_name": "status"}, {"documentation_package": "", "documentation_name": "quantity", "column_name": "quantity"}, {"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_id"}, {"documentation_package": "", "documentation_name": "reportback_volume", "column_name": "reportback_volume"}, {"documentation_package": "", "documentation_name": "source", "column_name": "source"}, {"documentation_package": "", "documentation_name": "source_bucket", "column_name": "source_bucket"}, {"documentation_package": "", "documentation_name": "created_at", "column_name": "created_at"}, {"documentation_package": "", "documentation_name": "url", "column_name": "url"}, {"documentation_package": "", "documentation_name": "text", "column_name": "text"}, {"documentation_package": "", "documentation_name": "signup_id", "column_name": "signup_id"}, {"documentation_package": "", "documentation_name": "post_class", "column_name": "post_class"}, {"documentation_package": "", "documentation_name": "is_accepted", "column_name": "is_accepted"}, {"documentation_package": "", "documentation_name": "action_id", "column_name": "action_id"}, {"documentation_package": "", "documentation_name": "location", "column_name": "location"}, {"documentation_package": "", "documentation_name": "postal_code", "column_name": "postal_code"}, {"documentation_package": "", "documentation_name": "is_reportback", "column_name": "is_reportback"}, {"documentation_package": "", "documentation_name": "civic_action", "column_name": "civic_action"}, {"documentation_package": "", "documentation_name": "scholarship_entry", "column_name": "scholarship_entry"}, {"documentation_package": "", "documentation_name": "school_id", "column_name": "school_id"}], "compiled": true, "compiled_sql": "SELECT\n\tpd.northstar_id as northstar_id,\n\tpd.id AS id,\n\tpd.\"type\" AS \"type\",\n\ta.\"name\" AS \"action\",\n\tpd.status AS status,\n\tpd.quantity AS quantity,\n\tpd.campaign_id,\n\tCASE\n\t\tWHEN pd.id IS NULL THEN NULL\n\t\tWHEN a.\"name\" = 'voter-reg OTG'\n\t\tTHEN pd.quantity\n\t\tELSE 1 END AS reportback_volume,\n\tpd.\"source\" AS \"source\",\n\tCASE\n\t\tWHEN pd.\"source\" IS NULL THEN NULL\n\t\tWHEN pd.\"source\" ilike '%sms%' THEN 'sms'\n\t\tELSE 'web' END AS source_bucket,\n\tCASE\n\t\tWHEN pd.\"type\" = 'phone-call' AND pd.details <> ''\n\t\tTHEN (pd.details::json ->> 'call_timestamp')::timestamptz\n\t\tELSE COALESCE(rtv.created_at, tv.created_at, pd.created_at)\n\t\tEND AS created_at,\n\tpd.url AS url,\n\tpd.text,\n\tCASE\n\t\tWHEN s.\"source\" = 'importer-client'\n\t\tAND pd.\"type\" = 'share-social'\n\t\tAND pd.created_at < s.created_at\n\t\tTHEN -1\n\t\tELSE pd.signup_id END AS signup_id,\n\tCASE\n\t\tWHEN pd.id IS NULL\n\t\tTHEN NULL\n\t\tELSE CONCAT(pd.\"type\", ' - ', a.\"name\") END AS post_class,\n\tCASE WHEN pd.status IN ('accepted', 'pending')\n\t\tAND a.\"name\" NOT ILIKE '%vote%'\n\t\tTHEN 1\n\t\tWHEN pd.status IN ('accepted', 'confirmed', 'register-OVR', 'register-form')\n\t\tAND a.\"name\" ILIKE '%vote%'\n\t\tTHEN 1\n\t\tELSE NULL END AS is_accepted,\n\tpd.action_id,\n\tpd.location,\n\tpd.postal_code,\n\ta.reportback AS is_reportback,\n\tCASE \n\t    WHEN pd.details <> '' THEN (pd.details::json ->> 'number_of_participants')::INT\n\t    ELSE NULL END AS num_participants,\n\ta.civic_action,\n\ta.scholarship_entry,\n\tpd.school_id\nFROM ft_dosomething_rogue.posts pd\nINNER JOIN \"quasar_prod_warehouse\".\"public\".\"signups\" s\n\tON pd.signup_id = s.id\nLEFT JOIN \"quasar_prod_warehouse\".\"public\".\"turbovote\" tv\n\tON tv.post_id::bigint = pd.id::bigint\nLEFT JOIN\n\t(SELECT\n\t\tDISTINCT r.*,\n\t\tCASE\n\t\t\tWHEN r.started_registration < '2017-01-01'\n\t\t\tTHEN r.started_registration + interval '4 year'\n\t\t\tELSE r.started_registration END AS created_at\n\t\tFROM \"quasar_prod_warehouse\".\"public\".\"rock_the_vote\" r\n\t) rtv\n\tON rtv.post_id::bigint = pd.id::bigint\nLEFT JOIN ft_dosomething_rogue.actions a\n\tON pd.action_id = a.id\nWHERE pd.deleted_at IS NULL\nAND pd.\"text\" IS DISTINCT FROM 'test runscope upload'\nAND a.\"name\" IS NOT NULL", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n\tpd.northstar_id as northstar_id,\n\tpd.id AS id,\n\tpd.\"type\" AS \"type\",\n\ta.\"name\" AS \"action\",\n\tpd.status AS status,\n\tpd.quantity AS quantity,\n\tpd.campaign_id,\n\tCASE\n\t\tWHEN pd.id IS NULL THEN NULL\n\t\tWHEN a.\"name\" = 'voter-reg OTG'\n\t\tTHEN pd.quantity\n\t\tELSE 1 END AS reportback_volume,\n\tpd.\"source\" AS \"source\",\n\tCASE\n\t\tWHEN pd.\"source\" IS NULL THEN NULL\n\t\tWHEN pd.\"source\" ilike '%sms%' THEN 'sms'\n\t\tELSE 'web' END AS source_bucket,\n\tCASE\n\t\tWHEN pd.\"type\" = 'phone-call' AND pd.details <> ''\n\t\tTHEN (pd.details::json ->> 'call_timestamp')::timestamptz\n\t\tELSE COALESCE(rtv.created_at, tv.created_at, pd.created_at)\n\t\tEND AS created_at,\n\tpd.url AS url,\n\tpd.text,\n\tCASE\n\t\tWHEN s.\"source\" = 'importer-client'\n\t\tAND pd.\"type\" = 'share-social'\n\t\tAND pd.created_at < s.created_at\n\t\tTHEN -1\n\t\tELSE pd.signup_id END AS signup_id,\n\tCASE\n\t\tWHEN pd.id IS NULL\n\t\tTHEN NULL\n\t\tELSE CONCAT(pd.\"type\", ' - ', a.\"name\") END AS post_class,\n\tCASE WHEN pd.status IN ('accepted', 'pending')\n\t\tAND a.\"name\" NOT ILIKE '%vote%'\n\t\tTHEN 1\n\t\tWHEN pd.status IN ('accepted', 'confirmed', 'register-OVR', 'register-form')\n\t\tAND a.\"name\" ILIKE '%vote%'\n\t\tTHEN 1\n\t\tELSE NULL END AS is_accepted,\n\tpd.action_id,\n\tpd.location,\n\tpd.postal_code,\n\ta.reportback AS is_reportback,\n\tCASE \n\t    WHEN pd.details <> '' THEN (pd.details::json ->> 'number_of_participants')::INT\n\t    ELSE NULL END AS num_participants,\n\ta.civic_action,\n\ta.scholarship_entry,\n\tpd.school_id\nFROM ft_dosomething_rogue.posts pd\nINNER JOIN \"quasar_prod_warehouse\".\"public\".\"signups\" s\n\tON pd.signup_id = s.id\nLEFT JOIN \"quasar_prod_warehouse\".\"public\".\"turbovote\" tv\n\tON tv.post_id::bigint = pd.id::bigint\nLEFT JOIN\n\t(SELECT\n\t\tDISTINCT r.*,\n\t\tCASE\n\t\t\tWHEN r.started_registration < '2017-01-01'\n\t\t\tTHEN r.started_registration + interval '4 year'\n\t\t\tELSE r.started_registration END AS created_at\n\t\tFROM \"quasar_prod_warehouse\".\"public\".\"rock_the_vote\" r\n\t) rtv\n\tON rtv.post_id::bigint = pd.id::bigint\nLEFT JOIN ft_dosomething_rogue.actions a\n\tON pd.action_id = a.id\nWHERE pd.deleted_at IS NULL\nAND pd.\"text\" IS DISTINCT FROM 'test runscope upload'\nAND a.\"name\" IS NOT NULL", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/campaign_activity/posts.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.01595020294189453, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.262705Z", "completed_at": "2020-01-30T16:41:08.273192Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.273377Z", "completed_at": "2020-01-30T16:41:08.276829Z"}]}, {"node": {"name": "user_newsletter_subscriptions", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "news_subscription/user_newsletter_subscriptions.sql", "original_file_path": "models/news_subscription/user_newsletter_subscriptions.sql", "package_name": "ds_dbt", "raw_sql": "SELECT DISTINCT\n\tf.northstar_id,\n\tf.newsletter_topic,\n\tf.topic_subscribed_at::timestamptz,\n\tCASE WHEN topic_unsubscribed_at IS NOT NULL\n\t    THEN topic_unsubscribed_at\n\t    WHEN newsletters_unsubscribed_at IS NOT NULL\n\t    THEN newsletters_unsubscribed_at\n\t    WHEN f.topic_updated_at = f.user_updated_at\n\t    THEN NULL\n\t    ELSE f.user_updated_at END AS topic_unsubscribed_at\nFROM (\n\tSELECT DISTINCT\n\t\ts.northstar_id AS northstar_id,\n\t\ts.newsletter_topic,\n\t\tfirst_value(s.newsletter_updated_at) OVER (PARTITION BY s.northstar_id, s.newsletter_topic ORDER BY s.newsletter_updated_at\n\t\t\t) AS topic_subscribed_at,\n\t\tlast_value(s.newsletter_updated_at) OVER (PARTITION BY s.northstar_id, s.newsletter_topic ORDER BY s.newsletter_updated_at\n\t\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS topic_updated_at,\t\n\t\tlast_value(s.newsletter_updated_at) OVER (PARTITION BY s.northstar_id ORDER BY s.newsletter_updated_at\n\t\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS user_updated_at,\n\t\tu.topic_unsubscribed_at,\n\t\tua.newsletters_unsubscribed_at\n\tFROM {{ ref('email_subscription_topics_raw') }} s\n\tLEFT JOIN (\n\t\tSELECT\n\t\t\t_id AS id,\n\t\t\tto_timestamp(audit #>> '{email_subscription_topics,updated_at,date}', 'YYYY-MM-DD HH24:MI:SS') AS topic_unsubscribed_at,\n\t\t\tNULL AS newsletter_topic\n\t\tFROM {{ env_var(\"NORTHSTAR_FT_SCHEMA\") }}.northstar_users_snapshot\n\t\tWHERE email_subscription_topics IS NULL AND audit #>> '{email_subscription_topics,updated_at,date}' IS NOT NULL\n\t) u ON u.id = s.northstar_id\n    LEFT JOIN (\n\t\tSELECT\n\t\t\tnorthstar_id,\n\t\t\temail_unsubscribed_at AS newsletters_unsubscribed_at,\n\t\t\tNULL AS newsletter_topic\n\t\tFROM public.user_activity\n\t) ua ON ua.northstar_id = s.northstar_id\n) f", "refs": [["email_subscription_topics_raw"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.email_subscription_topics_raw"], "macros": []}, "unique_id": "model.ds_dbt.user_newsletter_subscriptions", "empty": false, "fqn": ["ds_dbt", "news_subscription", "user_newsletter_subscriptions"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS email_subscription_topics_i ON {{ this }}(topic_subscribed_at, northstar_id)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "user_newsletter_subscriptions"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "user_newsletter_subscriptions", "columns": {"northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "newsletter_topic": {"name": "newsletter_topic", "description": "Newsletter topic. (e.g. community, lifestyle)"}, "topic_subscribed_at": {"name": "topic_subscribed_at", "description": "Timestamp when user subscribed to the newsletter topic"}, "topic_unsubscribed_at": {"name": "topic_unsubscribed_at", "description": "Timestamp when user unsubscribed from the newsletter topic"}}, "description": "Table containing data for all member events.", "patch_path": "models/news_subscription/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "newsletter_topic", "column_name": "newsletter_topic"}], "compiled": true, "compiled_sql": "SELECT DISTINCT\n\tf.northstar_id,\n\tf.newsletter_topic,\n\tf.topic_subscribed_at::timestamptz,\n\tCASE WHEN topic_unsubscribed_at IS NOT NULL\n\t    THEN topic_unsubscribed_at\n\t    WHEN newsletters_unsubscribed_at IS NOT NULL\n\t    THEN newsletters_unsubscribed_at\n\t    WHEN f.topic_updated_at = f.user_updated_at\n\t    THEN NULL\n\t    ELSE f.user_updated_at END AS topic_unsubscribed_at\nFROM (\n\tSELECT DISTINCT\n\t\ts.northstar_id AS northstar_id,\n\t\ts.newsletter_topic,\n\t\tfirst_value(s.newsletter_updated_at) OVER (PARTITION BY s.northstar_id, s.newsletter_topic ORDER BY s.newsletter_updated_at\n\t\t\t) AS topic_subscribed_at,\n\t\tlast_value(s.newsletter_updated_at) OVER (PARTITION BY s.northstar_id, s.newsletter_topic ORDER BY s.newsletter_updated_at\n\t\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS topic_updated_at,\t\n\t\tlast_value(s.newsletter_updated_at) OVER (PARTITION BY s.northstar_id ORDER BY s.newsletter_updated_at\n\t\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS user_updated_at,\n\t\tu.topic_unsubscribed_at,\n\t\tua.newsletters_unsubscribed_at\n\tFROM \"quasar_prod_warehouse\".\"public\".\"email_subscription_topics_raw\" s\n\tLEFT JOIN (\n\t\tSELECT\n\t\t\t_id AS id,\n\t\t\tto_timestamp(audit #>> '{email_subscription_topics,updated_at,date}', 'YYYY-MM-DD HH24:MI:SS') AS topic_unsubscribed_at,\n\t\t\tNULL AS newsletter_topic\n\t\tFROM northstar_ft_userapi.northstar_users_snapshot\n\t\tWHERE email_subscription_topics IS NULL AND audit #>> '{email_subscription_topics,updated_at,date}' IS NOT NULL\n\t) u ON u.id = s.northstar_id\n    LEFT JOIN (\n\t\tSELECT\n\t\t\tnorthstar_id,\n\t\t\temail_unsubscribed_at AS newsletters_unsubscribed_at,\n\t\t\tNULL AS newsletter_topic\n\t\tFROM public.user_activity\n\t) ua ON ua.northstar_id = s.northstar_id\n) f", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT DISTINCT\n\tf.northstar_id,\n\tf.newsletter_topic,\n\tf.topic_subscribed_at::timestamptz,\n\tCASE WHEN topic_unsubscribed_at IS NOT NULL\n\t    THEN topic_unsubscribed_at\n\t    WHEN newsletters_unsubscribed_at IS NOT NULL\n\t    THEN newsletters_unsubscribed_at\n\t    WHEN f.topic_updated_at = f.user_updated_at\n\t    THEN NULL\n\t    ELSE f.user_updated_at END AS topic_unsubscribed_at\nFROM (\n\tSELECT DISTINCT\n\t\ts.northstar_id AS northstar_id,\n\t\ts.newsletter_topic,\n\t\tfirst_value(s.newsletter_updated_at) OVER (PARTITION BY s.northstar_id, s.newsletter_topic ORDER BY s.newsletter_updated_at\n\t\t\t) AS topic_subscribed_at,\n\t\tlast_value(s.newsletter_updated_at) OVER (PARTITION BY s.northstar_id, s.newsletter_topic ORDER BY s.newsletter_updated_at\n\t\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS topic_updated_at,\t\n\t\tlast_value(s.newsletter_updated_at) OVER (PARTITION BY s.northstar_id ORDER BY s.newsletter_updated_at\n\t\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS user_updated_at,\n\t\tu.topic_unsubscribed_at,\n\t\tua.newsletters_unsubscribed_at\n\tFROM \"quasar_prod_warehouse\".\"public\".\"email_subscription_topics_raw\" s\n\tLEFT JOIN (\n\t\tSELECT\n\t\t\t_id AS id,\n\t\t\tto_timestamp(audit #>> '{email_subscription_topics,updated_at,date}', 'YYYY-MM-DD HH24:MI:SS') AS topic_unsubscribed_at,\n\t\t\tNULL AS newsletter_topic\n\t\tFROM northstar_ft_userapi.northstar_users_snapshot\n\t\tWHERE email_subscription_topics IS NULL AND audit #>> '{email_subscription_topics,updated_at,date}' IS NOT NULL\n\t) u ON u.id = s.northstar_id\n    LEFT JOIN (\n\t\tSELECT\n\t\t\tnorthstar_id,\n\t\t\temail_unsubscribed_at AS newsletters_unsubscribed_at,\n\t\t\tNULL AS newsletter_topic\n\t\tFROM public.user_activity\n\t) ua ON ua.northstar_id = s.northstar_id\n) f", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/news_subscription/user_newsletter_subscriptions.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.01329803466796875, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.281218Z", "completed_at": "2020-01-30T16:41:08.291524Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.291852Z", "completed_at": "2020-01-30T16:41:08.294008Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_action_type", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_action_type.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_action_type') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_action_type", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_action_type"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_action_type", "column_name": "campaign_action_type", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_action_type is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_action_type is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_action_type is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_action_type.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010170698165893555, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.296206Z", "completed_at": "2020-01-30T16:41:08.304434Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.304609Z", "completed_at": "2020-01-30T16:41:08.305874Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_cause_type", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_cause_type.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_cause_type') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_cause_type", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_cause_type"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_cause_type", "column_name": "campaign_cause_type", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_cause_type is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_cause_type is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_cause_type is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_cause_type.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.012121200561523438, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.310201Z", "completed_at": "2020-01-30T16:41:08.317810Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.318017Z", "completed_at": "2020-01-30T16:41:08.319362Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_created_date", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_created_date.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_created_date') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_created_date", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_created_date"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_created_date", "column_name": "campaign_created_date", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_created_date is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_created_date is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_created_date is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_created_date.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010602951049804688, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.323109Z", "completed_at": "2020-01-30T16:41:08.329925Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.330090Z", "completed_at": "2020-01-30T16:41:08.331350Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_cta", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_cta.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_cta') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_cta", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_cta"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_cta", "column_name": "campaign_cta", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_cta is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_cta is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_cta is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_cta.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.013317108154296875, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.336362Z", "completed_at": "2020-01-30T16:41:08.344389Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.344552Z", "completed_at": "2020-01-30T16:41:08.346044Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_id') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_id", "column_name": "campaign_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008455038070678711, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.349365Z", "completed_at": "2020-01-30T16:41:08.354333Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.354451Z", "completed_at": "2020-01-30T16:41:08.355877Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_node_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_node_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_node_id') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_node_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_node_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_node_id", "column_name": "campaign_node_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_node_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_node_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_node_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_node_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008684158325195312, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.359630Z", "completed_at": "2020-01-30T16:41:08.365190Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.365336Z", "completed_at": "2020-01-30T16:41:08.366466Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_node_id_title", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_node_id_title.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_node_id_title') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_node_id_title", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_node_id_title"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_node_id_title", "column_name": "campaign_node_id_title", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_node_id_title is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_node_id_title is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_node_id_title is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_node_id_title.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008191108703613281, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.369199Z", "completed_at": "2020-01-30T16:41:08.374652Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.374781Z", "completed_at": "2020-01-30T16:41:08.375843Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_noun", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_noun.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_noun') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_noun", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_noun"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_noun", "column_name": "campaign_noun", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_noun is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_noun is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_noun is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_noun.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.01199793815612793, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.380183Z", "completed_at": "2020-01-30T16:41:08.388301Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.388475Z", "completed_at": "2020-01-30T16:41:08.389551Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_run_end_date", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_run_end_date.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_run_end_date') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_run_end_date", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_run_end_date"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_run_end_date", "column_name": "campaign_run_end_date", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_end_date is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_end_date is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_end_date is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_run_end_date.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007380008697509766, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.392381Z", "completed_at": "2020-01-30T16:41:08.396873Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.397032Z", "completed_at": "2020-01-30T16:41:08.398113Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_run_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_run_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_run_id') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_run_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_run_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_run_id", "column_name": "campaign_run_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_run_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011336088180541992, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.401454Z", "completed_at": "2020-01-30T16:41:08.409286Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.409482Z", "completed_at": "2020-01-30T16:41:08.410651Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_run_id_title", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_run_id_title.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_run_id_title') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_run_id_title", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_run_id_title"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_run_id_title", "column_name": "campaign_run_id_title", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_id_title is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_id_title is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_id_title is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_run_id_title.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.00732111930847168, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.413545Z", "completed_at": "2020-01-30T16:41:08.418054Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.418182Z", "completed_at": "2020-01-30T16:41:08.419251Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_run_start_date", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_run_start_date.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_run_start_date') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_run_start_date", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_run_start_date"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_run_start_date", "column_name": "campaign_run_start_date", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_start_date is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_start_date is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_run_start_date is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_run_start_date.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010727882385253906, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.423683Z", "completed_at": "2020-01-30T16:41:08.429794Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.429996Z", "completed_at": "2020-01-30T16:41:08.431232Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_type", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_type.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_type') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_type", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_type"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_type", "column_name": "campaign_type", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_type is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_type is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_type is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_type.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007786989212036133, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.434376Z", "completed_at": "2020-01-30T16:41:08.439209Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.439391Z", "completed_at": "2020-01-30T16:41:08.440578Z"}]}, {"node": {"name": "not_null_campaign_info_international_campaign_verb", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_campaign_info_international_campaign_verb.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('campaign_info_international'), column_name='campaign_verb') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.not_null_campaign_info_international_campaign_verb", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_campaign_info_international_campaign_verb"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_campaign_info_international_campaign_verb", "column_name": "campaign_verb", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_verb is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_verb is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\nwhere campaign_verb is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_campaign_info_international_campaign_verb.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008987188339233398, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.444916Z", "completed_at": "2020-01-30T16:41:08.450354Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.450485Z", "completed_at": "2020-01-30T16:41:08.451660Z"}]}, {"node": {"name": "unique_campaign_info_international_campaign_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_campaign_info_international_campaign_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('campaign_info_international'), column_name='campaign_id') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.unique_campaign_info_international_campaign_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_campaign_info_international_campaign_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_campaign_info_international_campaign_id", "column_name": "campaign_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_id is not null\n    group by campaign_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_id is not null\n    group by campaign_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_id is not null\n    group by campaign_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_campaign_info_international_campaign_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008096933364868164, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.454472Z", "completed_at": "2020-01-30T16:41:08.459696Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.459865Z", "completed_at": "2020-01-30T16:41:08.460921Z"}]}, {"node": {"name": "unique_campaign_info_international_campaign_node_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_campaign_info_international_campaign_node_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('campaign_info_international'), column_name='campaign_node_id') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.unique_campaign_info_international_campaign_node_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_campaign_info_international_campaign_node_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_campaign_info_international_campaign_node_id", "column_name": "campaign_node_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_node_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_node_id is not null\n    group by campaign_node_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_node_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_node_id is not null\n    group by campaign_node_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_node_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_node_id is not null\n    group by campaign_node_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_campaign_info_international_campaign_node_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.013921022415161133, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.465560Z", "completed_at": "2020-01-30T16:41:08.474893Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.475099Z", "completed_at": "2020-01-30T16:41:08.476424Z"}]}, {"node": {"name": "unique_campaign_info_international_campaign_noun", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_campaign_info_international_campaign_noun.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('campaign_info_international'), column_name='campaign_noun') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.unique_campaign_info_international_campaign_noun", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_campaign_info_international_campaign_noun"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_campaign_info_international_campaign_noun", "column_name": "campaign_noun", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_noun\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_noun is not null\n    group by campaign_noun\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_noun\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_noun is not null\n    group by campaign_noun\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_noun\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_noun is not null\n    group by campaign_noun\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_campaign_info_international_campaign_noun.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008620023727416992, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.478371Z", "completed_at": "2020-01-30T16:41:08.485078Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.485263Z", "completed_at": "2020-01-30T16:41:08.486484Z"}]}, {"node": {"name": "unique_campaign_info_international_campaign_run_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_campaign_info_international_campaign_run_id.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('campaign_info_international'), column_name='campaign_run_id') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.unique_campaign_info_international_campaign_run_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_campaign_info_international_campaign_run_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_campaign_info_international_campaign_run_id", "column_name": "campaign_run_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_run_id is not null\n    group by campaign_run_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_run_id is not null\n    group by campaign_run_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_run_id is not null\n    group by campaign_run_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_campaign_info_international_campaign_run_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.012026786804199219, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.489471Z", "completed_at": "2020-01-30T16:41:08.497697Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.497907Z", "completed_at": "2020-01-30T16:41:08.499723Z"}]}, {"node": {"name": "unique_campaign_info_international_campaign_run_start_date", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_campaign_info_international_campaign_run_start_date.sql", "original_file_path": "models/campaign_info/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('campaign_info_international'), column_name='campaign_run_start_date') }}", "refs": [["campaign_info_international"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.campaign_info_international"], "macros": []}, "unique_id": "test.ds_dbt.unique_campaign_info_international_campaign_run_start_date", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_campaign_info_international_campaign_run_start_date"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_campaign_info_international_campaign_run_start_date", "column_name": "campaign_run_start_date", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_start_date\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_run_start_date is not null\n    group by campaign_run_start_date\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_start_date\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_run_start_date is not null\n    group by campaign_run_start_date\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        campaign_run_start_date\n\n    from \"quasar_prod_warehouse\".\"public\".\"campaign_info_international\"\n    where campaign_run_start_date is not null\n    group by campaign_run_start_date\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_campaign_info_international_campaign_run_start_date.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009992837905883789, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.502869Z", "completed_at": "2020-01-30T16:41:08.509642Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.509788Z", "completed_at": "2020-01-30T16:41:08.511089Z"}]}, {"node": {"name": "snowplow_phoenix_events", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "phoenix_events/snowplow_phoenix_events.sql", "original_file_path": "models/phoenix_events/snowplow_phoenix_events.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n    e.event_id,\n    e.event_datetime,\n    CASE WHEN e.event_name IS NULL\n    AND e.event_type = 'pv'\n    THEN 'view' ELSE e.event_name END AS event_name,\n    e.event_source,\n    e.\"path\",\n    e.\"host\",\n    e.query_parameters,\n    e.clicked_link_url,\n    e.utm_source AS page_utm_source,\n    e.utm_medium AS page_utm_medium,\n    e.utm_campaign AS page_utm_campaign,\n    e.referrer_host,\n    e.referrer_path,\n    e.referrer_source,\n    e.campaign_id,\n    i.campaign_name,\n    e.modal_type,\n    e.search_query,\n    e.context_source,\n    e.session_id,\n    e.browser_size,\n    e.northstar_id,\n    e.device_id\nFROM {{ ref('snowplow_raw_events') }} e\nLEFT JOIN {{ ref('campaign_info') }} i ON i.campaign_id = e.campaign_id::bigint", "refs": [["snowplow_raw_events"], ["campaign_info"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events", "model.ds_dbt.campaign_info"], "macros": []}, "unique_id": "model.ds_dbt.snowplow_phoenix_events", "empty": false, "fqn": ["ds_dbt", "phoenix_events", "snowplow_phoenix_events"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS spe_unique ON {{ this }}(event_datetime, event_name, event_id)", "transaction": true, "index": 0}, {"sql": "CREATE INDEX IF NOT EXISTS spe_session_id ON {{ this }} (session_id)", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "snowplow_phoenix_events"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "snowplow_phoenix_events", "columns": {"event_id": {"name": "event_id", "description": "This is a unique identifier for each event"}, "event_datetime": {"name": "event_datetime", "description": "When the event occurred in UTC (eg. 2018-01-01 12:00:00)"}, "event_name": {"name": "event_name", "description": "Name of the event (eg. northstar_submitted_register, https://docs.google.com/spreadsheets/d/1lm-fGrIm85nUTxSojqyCt_Ehmm1zEbViFhKpxcJiz1A/edit#gid=406441516)"}, "event_source": {"name": "event_source", "description": "Application source for event (eg. Phoenix, Northstar)"}, "path": {"name": "path", "description": "URL path"}, "host": {"name": "host", "description": "URL domain"}, "query_parameters": {"name": "query_parameters", "description": "Optional query parameters for the request (eg. query=huddle)"}, "clicked_link_url": {"name": "clicked_link_url", "description": "URL of campaign (eg. https://dosome.click/nyn5m7)"}, "page_utm_source": {"name": "page_utm_source", "description": "Tracks where the traffic is coming from. (eg. scholarship_listing, Facebook)"}, "page_utm_medium": {"name": "page_utm_medium", "description": "How the traffic got to the platform (eg. referral, CPC)"}, "page_utm_campaign": {"name": "page_utm_campaign", "description": "Tracks which campaign the traffic was generated by. Shows up in Google Analytics as Campaign Name (eg. editorial_newsletter)"}, "referrer_host": {"name": "referrer_host", "description": "URL host of the referring site (eg. google.com)"}, "referrer_path": {"name": "referrer_path", "description": "URL path from referring site (eg. /10-stats-on-teen-drug-and-alcohol-use/)"}, "referrer_source": {"name": "referrer_source", "description": "Referrer source name (eg. Google, Facebook)"}, "campaign_id": {"name": "campaign_id", "description": "Internal campaign id from contentful"}, "campaign_name": {"name": "campaign_name", "description": "Name of campaign"}, "modal_type": {"name": "modal_type", "description": "NULL or SURVEY_MODAL"}, "session_id": {"name": "session_id", "description": "Unique identifier of the user's session"}, "browser_size": {"name": "browser_size", "description": "Which type of browser a user is using (eg. Mobile, Desktop)"}, "northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "device_id": {"name": "device_id", "description": "ID of the device used"}}, "description": "Table transforming snowplow_raw_event into rich derived data table for all clickstream info", "patch_path": "models/phoenix_events/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "event_id", "column_name": "event_id"}, {"documentation_package": "", "documentation_name": "event_datetime", "column_name": "event_datetime"}, {"documentation_package": "", "documentation_name": "event_name", "column_name": "event_name"}, {"documentation_package": "", "documentation_name": "event_source", "column_name": "event_source"}, {"documentation_package": "", "documentation_name": "query_parameters", "column_name": "query_parameters"}, {"documentation_package": "", "documentation_name": "url", "column_name": "clicked_link_url"}, {"documentation_package": "", "documentation_name": "utm_source", "column_name": "page_utm_source"}, {"documentation_package": "", "documentation_name": "utm_medium", "column_name": "page_utm_medium"}, {"documentation_package": "", "documentation_name": "utm_campaign", "column_name": "page_utm_campaign"}, {"documentation_package": "", "documentation_name": "referrer_host", "column_name": "referrer_host"}, {"documentation_package": "", "documentation_name": "referrer_path", "column_name": "referrer_path"}, {"documentation_package": "", "documentation_name": "referrer_source", "column_name": "referrer_source"}, {"documentation_package": "", "documentation_name": "modal_type", "column_name": "modal_type"}, {"documentation_package": "", "documentation_name": "session_id", "column_name": "session_id"}, {"documentation_package": "", "documentation_name": "browser_size", "column_name": "browser_size"}, {"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "device_id", "column_name": "device_id"}], "compiled": true, "compiled_sql": "SELECT\n    e.event_id,\n    e.event_datetime,\n    CASE WHEN e.event_name IS NULL\n    AND e.event_type = 'pv'\n    THEN 'view' ELSE e.event_name END AS event_name,\n    e.event_source,\n    e.\"path\",\n    e.\"host\",\n    e.query_parameters,\n    e.clicked_link_url,\n    e.utm_source AS page_utm_source,\n    e.utm_medium AS page_utm_medium,\n    e.utm_campaign AS page_utm_campaign,\n    e.referrer_host,\n    e.referrer_path,\n    e.referrer_source,\n    e.campaign_id,\n    i.campaign_name,\n    e.modal_type,\n    e.search_query,\n    e.context_source,\n    e.session_id,\n    e.browser_size,\n    e.northstar_id,\n    e.device_id\nFROM \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\" e\nLEFT JOIN \"quasar_prod_warehouse\".\"public\".\"campaign_info\" i ON i.campaign_id = e.campaign_id::bigint", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n    e.event_id,\n    e.event_datetime,\n    CASE WHEN e.event_name IS NULL\n    AND e.event_type = 'pv'\n    THEN 'view' ELSE e.event_name END AS event_name,\n    e.event_source,\n    e.\"path\",\n    e.\"host\",\n    e.query_parameters,\n    e.clicked_link_url,\n    e.utm_source AS page_utm_source,\n    e.utm_medium AS page_utm_medium,\n    e.utm_campaign AS page_utm_campaign,\n    e.referrer_host,\n    e.referrer_path,\n    e.referrer_source,\n    e.campaign_id,\n    i.campaign_name,\n    e.modal_type,\n    e.search_query,\n    e.context_source,\n    e.session_id,\n    e.browser_size,\n    e.northstar_id,\n    e.device_id\nFROM \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\" e\nLEFT JOIN \"quasar_prod_warehouse\".\"public\".\"campaign_info\" i ON i.campaign_id = e.campaign_id::bigint", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/phoenix_events/snowplow_phoenix_events.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.014963150024414062, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.514201Z", "completed_at": "2020-01-30T16:41:08.524023Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.524195Z", "completed_at": "2020-01-30T16:41:08.527345Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_browser_size", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_browser_size.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='browser_size') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_browser_size", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_browser_size"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_browser_size", "column_name": "browser_size", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere browser_size is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere browser_size is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere browser_size is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_browser_size.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011382818222045898, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.531195Z", "completed_at": "2020-01-30T16:41:08.540764Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.540924Z", "completed_at": "2020-01-30T16:41:08.542060Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_device_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_device_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='device_id') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_device_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_device_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_device_id", "column_name": "device_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere device_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere device_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere device_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_device_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007397174835205078, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.545221Z", "completed_at": "2020-01-30T16:41:08.549844Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.549976Z", "completed_at": "2020-01-30T16:41:08.551038Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_event_datetime", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_event_datetime.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='event_datetime') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_event_datetime", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_event_datetime"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_event_datetime", "column_name": "event_datetime", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_datetime is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_datetime is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_datetime is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_event_datetime.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011487007141113281, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.555330Z", "completed_at": "2020-01-30T16:41:08.562787Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.562961Z", "completed_at": "2020-01-30T16:41:08.564129Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='event_id') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0073239803314208984, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.566827Z", "completed_at": "2020-01-30T16:41:08.571419Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.571548Z", "completed_at": "2020-01-30T16:41:08.572613Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_event_source", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_event_source.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='event_source') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_event_source", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_event_source"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_event_source", "column_name": "event_source", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_source is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_source is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_source is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_event_source.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010365009307861328, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.577040Z", "completed_at": "2020-01-30T16:41:08.582463Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.582621Z", "completed_at": "2020-01-30T16:41:08.584190Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_event_type", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_event_type.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='event_type') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_event_type", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_event_type"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_event_type", "column_name": "event_type", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_type is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_type is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere event_type is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_event_type.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007503032684326172, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.587273Z", "completed_at": "2020-01-30T16:41:08.591895Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.592017Z", "completed_at": "2020-01-30T16:41:08.593206Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_host", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_host.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='host') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_host", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_host"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_host", "column_name": "host", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere host is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere host is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere host is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_host.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.013024091720581055, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.597202Z", "completed_at": "2020-01-30T16:41:08.605970Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.606182Z", "completed_at": "2020-01-30T16:41:08.607692Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_path", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_path.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='path') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_path", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_path"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_path", "column_name": "path", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere path is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere path is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere path is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_path.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008160829544067383, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.610844Z", "completed_at": "2020-01-30T16:41:08.615974Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.616102Z", "completed_at": "2020-01-30T16:41:08.617307Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_referrer_host", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_referrer_host.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='referrer_host') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_referrer_host", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_referrer_host"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_referrer_host", "column_name": "referrer_host", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere referrer_host is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere referrer_host is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere referrer_host is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_referrer_host.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011110305786132812, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.621066Z", "completed_at": "2020-01-30T16:41:08.628569Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.628719Z", "completed_at": "2020-01-30T16:41:08.629800Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_referrer_path", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_referrer_path.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='referrer_path') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_referrer_path", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_referrer_path"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_referrer_path", "column_name": "referrer_path", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere referrer_path is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere referrer_path is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere referrer_path is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_referrer_path.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0076100826263427734, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.632457Z", "completed_at": "2020-01-30T16:41:08.637277Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.637408Z", "completed_at": "2020-01-30T16:41:08.638532Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_session_counter", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_session_counter.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='session_counter') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_session_counter", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_session_counter"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_session_counter", "column_name": "session_counter", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere session_counter is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere session_counter is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere session_counter is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_session_counter.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.00980687141418457, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.642660Z", "completed_at": "2020-01-30T16:41:08.648722Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.648921Z", "completed_at": "2020-01-30T16:41:08.650037Z"}]}, {"node": {"name": "not_null_snowplow_raw_events_session_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_raw_events_session_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_raw_events'), column_name='session_id') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_raw_events_session_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_raw_events_session_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_raw_events_session_id", "column_name": "session_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere session_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere session_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\nwhere session_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_raw_events_session_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007296085357666016, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.652714Z", "completed_at": "2020-01-30T16:41:08.657278Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.657406Z", "completed_at": "2020-01-30T16:41:08.658478Z"}]}, {"node": {"name": "unique_snowplow_raw_events_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_snowplow_raw_events_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('snowplow_raw_events'), column_name='event_id') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.unique_snowplow_raw_events_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_snowplow_raw_events_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_snowplow_raw_events_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_snowplow_raw_events_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010220050811767578, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.662058Z", "completed_at": "2020-01-30T16:41:08.668644Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.668786Z", "completed_at": "2020-01-30T16:41:08.670132Z"}]}, {"node": {"name": "unique_snowplow_raw_events_event_source", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_snowplow_raw_events_event_source.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('snowplow_raw_events'), column_name='event_source') }}", "refs": [["snowplow_raw_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events"], "macros": []}, "unique_id": "test.ds_dbt.unique_snowplow_raw_events_event_source", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_snowplow_raw_events_event_source"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_snowplow_raw_events_event_source", "column_name": "event_source", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_snowplow_raw_events_event_source.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007531881332397461, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.672911Z", "completed_at": "2020-01-30T16:41:08.677682Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.677817Z", "completed_at": "2020-01-30T16:41:08.678888Z"}]}, {"node": {"name": "users", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "users_table/users.sql", "original_file_path": "models/users_table/users.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n\tu.id AS northstar_id,\n\tu.created_at,\n\tumax.max_last_auth AS last_logged_in,\n\tumax.max_last_access AS last_accessed,\n\tumax.max_last_message AS last_messaged_at,\n\tu.drupal_id AS drupal_uid,\n\tu.\"source\",\n\tu.email,\n\tu.facebook_id,\n\tu.mobile,\n\tCASE WHEN\n\t\tu.birthdate < '1900-01-01' OR \n\t\tu.birthdate > (date('now') - INTERVAL '10 years') \n\t\tTHEN NULL ELSE u.birthdate END AS birthdate,\n\tu.first_name,\n\tu.last_name,\n\tu.voter_registration_status,\n\tu.addr_street1 AS address_street_1,\n\tu.addr_street2 AS address_street_2,\n\tu.addr_city AS city,\n\tu.addr_state AS state,\n\tu.addr_zip AS zipcode,\n\tu.country,\n\tu.\"language\",\n\temail_status.event_type AS cio_status,\n\temail_status.\"timestamp\" AS cio_status_timestamp,\n\tu.sms_status,\n\tu.source_detail,\n\tsubstring(u.source_detail from '(?<=utm_medium\\:)(\\w*)') AS utm_medium,\n\tsubstring(u.source_detail from '(?<=utm_source\\:)(\\w*)') AS utm_source,\n\tsubstring(u.source_detail from '(?<=utm_campaign\\:)(\\w*)') AS utm_campaign,\n\t(u.feature_flags #>> '{badges}')::boolean as badges,\n\t(u.feature_flags #>> '{refer-friends}')::boolean as refer_friends,\n\t(u.feature_flags #>> '{refer-friends-scholarship}')::boolean as refer_friends_scholarship,\n\tCASE WHEN\n\t\tu.sms_status in ('active','less','pending') OR\n\t\temail_status.event_type = 'customer_subscribed' \n\t\tTHEN TRUE ELSE FALSE END AS subscribed_member,\n\tumax.max_update AS last_updated_at,\n\tu.school_id\nFROM {{ ref('northstar_users_deduped') }} u\nINNER JOIN\n\t(SELECT\n\t\tutemp.id,\n\t\tmax(utemp.updated_at) AS max_update,\n\t\tmax(utemp.last_accessed_at) AS max_last_access,\n\t\tmax(utemp.last_authenticated_at) AS max_last_auth,\n\t\tmax(utemp.last_messaged_at) AS max_last_message\n\tFROM {{ ref('northstar_users_deduped') }} utemp\n\tGROUP BY utemp.id) umax ON umax.id = u.id AND umax.max_update = u.updated_at\nLEFT JOIN {{ ref('cio_latest_status') }} email_status ON email_status.customer_id = u.id\nWHERE\n\t(u.\"source\" IS DISTINCT FROM 'runscope'\n\tAND u.\"source\" IS DISTINCT FROM 'runscope-client'\n\tAND u.email NOT SIMILAR TO '%runscope%@%'\n\tAND u.email NOT SIMILAR TO '%@%dosomething%') OR u.email IS NULL", "refs": [["northstar_users_deduped"], ["northstar_users_deduped"], ["cio_latest_status"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.northstar_users_deduped", "model.ds_dbt.northstar_users_deduped", "model.ds_dbt.cio_latest_status"], "macros": []}, "unique_id": "model.ds_dbt.users", "empty": false, "fqn": ["ds_dbt", "users_table", "users"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS du_indicies ON {{ this }}(northstar_id, created_at, email, mobile, source)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO public", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "users"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "users", "columns": {"northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "created_at": {"name": "created_at", "description": "When the item was created in UTC (eg. 2018-01-01 12:00:00)"}, "last_logged_in": {"name": "last_logged_in", "description": "Date time in UTC when user last logged in to Northstar"}, "last_accessed": {"name": "last_accessed", "description": "Date time in UTC when user last access the website"}, "last_messaged_at": {"name": "last_messaged_at", "description": "Date time in UTC when user was last sent a message via SMS or email"}, "source": {"name": "source", "description": "Source of the URL (e.g. SMS, web), origin of the post (e.g. phoenix-web, phoenix-ashes, sms), or source where user was acquired. (e.g. sms, phoenix-next)"}, "email": {"name": "email", "description": "Email address of the user."}, "facebook_id": {"name": "facebook_id", "description": "User's facebook id"}, "mobile": {"name": "mobile", "description": "Users's mobile phone number"}, "birthdate": {"name": "birthdate", "description": "User's birthdate"}, "first_name": {"name": "first_name", "description": "User's first name"}, "last_name": {"name": "last_name", "description": "User's last name"}, "voter_registration_status": {"name": "voter_registration_status", "description": "User's registration status. (e.g. registration_complete, confirmed, uncertain)"}, "address_street_1": {"name": "address_street_1", "description": "First line of user's street address"}, "address_street_2": {"name": "address_street_2", "description": "Second line of user's street address"}, "city": {"name": "city", "description": "User's city"}, "state": {"name": "state", "description": "User's state"}, "zipcode": {"name": "zipcode", "description": "Postal code where the action takes place"}, "country": {"name": "country", "description": "User's country"}, "language": {"name": "language", "description": "User's language"}, "cio_status": {"name": "cio_status", "description": "Status of user from CIO. (e.g. customer_subscribed, customer_unsubscribed)"}, "cio_status_timestamp": {"name": "cio_status_timestamp", "description": "Timestamp when users's status was updated."}, "sms_status": {"name": "sms_status", "description": "Current SMS status. (e.g. undeliverable, unknown)"}, "source_detail": {"name": "source_detail", "description": "Details of the origin of the user. (e.g. tell_a_friend, other, opt_in_path/197981)"}, "utm_medium": {"name": "utm_medium", "description": "How the traffic got to the platform (eg. referral, CPC)"}, "utm_source": {"name": "utm_source", "description": "Tracks where the traffic is coming from. (eg. scholarship_listing, Facebook)"}, "utm_campaign": {"name": "utm_campaign", "description": "Tracks which campaign the traffic was generated by. Shows up in Google Analytics as Campaign Name (eg. editorial_newsletter)"}, "badges": {"name": "badges", "description": "Whether the user has any badges."}, "refer_friends": {"name": "refer_friends", "description": "Whether the user is a part of the refer a friend campaign."}, "subscribed_member": {"name": "subscribed_member", "description": "Whether the user is subscribed."}, "last_updated_at": {"name": "last_updated_at", "description": "Timestamp when users's was updated."}, "school_id": {"name": "school_id", "description": "Unique identifier for the user's school. This info comes from the school finder."}}, "description": "A table containing aggregated user data.", "patch_path": "models/users_table/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "created_at", "column_name": "created_at"}, {"documentation_package": "", "documentation_name": "last_logged_in", "column_name": "last_logged_in"}, {"documentation_package": "", "documentation_name": "last_accessed", "column_name": "last_accessed"}, {"documentation_package": "", "documentation_name": "last_messaged_at", "column_name": "last_messaged_at"}, {"documentation_package": "", "documentation_name": "source", "column_name": "source"}, {"documentation_package": "", "documentation_name": "email", "column_name": "email"}, {"documentation_package": "", "documentation_name": "facebook_id", "column_name": "facebook_id"}, {"documentation_package": "", "documentation_name": "mobile", "column_name": "mobile"}, {"documentation_package": "", "documentation_name": "birthdate", "column_name": "birthdate"}, {"documentation_package": "", "documentation_name": "first_name", "column_name": "first_name"}, {"documentation_package": "", "documentation_name": "last_name", "column_name": "last_name"}, {"documentation_package": "", "documentation_name": "voter_registration_status", "column_name": "voter_registration_status"}, {"documentation_package": "", "documentation_name": "address_street_1", "column_name": "address_street_1"}, {"documentation_package": "", "documentation_name": "address_street_2", "column_name": "address_street_2"}, {"documentation_package": "", "documentation_name": "city", "column_name": "city"}, {"documentation_package": "", "documentation_name": "state", "column_name": "state"}, {"documentation_package": "", "documentation_name": "postal_code", "column_name": "zipcode"}, {"documentation_package": "", "documentation_name": "country", "column_name": "country"}, {"documentation_package": "", "documentation_name": "language", "column_name": "language"}, {"documentation_package": "", "documentation_name": "cio_status", "column_name": "cio_status"}, {"documentation_package": "", "documentation_name": "cio_status_timestamp", "column_name": "cio_status_timestamp"}, {"documentation_package": "", "documentation_name": "sms_status", "column_name": "sms_status"}, {"documentation_package": "", "documentation_name": "source_detail", "column_name": "source_detail"}, {"documentation_package": "", "documentation_name": "utm_medium", "column_name": "utm_medium"}, {"documentation_package": "", "documentation_name": "utm_source", "column_name": "utm_source"}, {"documentation_package": "", "documentation_name": "utm_campaign", "column_name": "utm_campaign"}, {"documentation_package": "", "documentation_name": "badges", "column_name": "badges"}, {"documentation_package": "", "documentation_name": "refer_friends", "column_name": "refer_friends"}, {"documentation_package": "", "documentation_name": "subscribed_member", "column_name": "subscribed_member"}, {"documentation_package": "", "documentation_name": "last_updated_at", "column_name": "last_updated_at"}, {"documentation_package": "", "documentation_name": "school_id", "column_name": "school_id"}], "compiled": true, "compiled_sql": "SELECT\n\tu.id AS northstar_id,\n\tu.created_at,\n\tumax.max_last_auth AS last_logged_in,\n\tumax.max_last_access AS last_accessed,\n\tumax.max_last_message AS last_messaged_at,\n\tu.drupal_id AS drupal_uid,\n\tu.\"source\",\n\tu.email,\n\tu.facebook_id,\n\tu.mobile,\n\tCASE WHEN\n\t\tu.birthdate < '1900-01-01' OR \n\t\tu.birthdate > (date('now') - INTERVAL '10 years') \n\t\tTHEN NULL ELSE u.birthdate END AS birthdate,\n\tu.first_name,\n\tu.last_name,\n\tu.voter_registration_status,\n\tu.addr_street1 AS address_street_1,\n\tu.addr_street2 AS address_street_2,\n\tu.addr_city AS city,\n\tu.addr_state AS state,\n\tu.addr_zip AS zipcode,\n\tu.country,\n\tu.\"language\",\n\temail_status.event_type AS cio_status,\n\temail_status.\"timestamp\" AS cio_status_timestamp,\n\tu.sms_status,\n\tu.source_detail,\n\tsubstring(u.source_detail from '(?<=utm_medium\\:)(\\w*)') AS utm_medium,\n\tsubstring(u.source_detail from '(?<=utm_source\\:)(\\w*)') AS utm_source,\n\tsubstring(u.source_detail from '(?<=utm_campaign\\:)(\\w*)') AS utm_campaign,\n\t(u.feature_flags #>> '{badges}')::boolean as badges,\n\t(u.feature_flags #>> '{refer-friends}')::boolean as refer_friends,\n\t(u.feature_flags #>> '{refer-friends-scholarship}')::boolean as refer_friends_scholarship,\n\tCASE WHEN\n\t\tu.sms_status in ('active','less','pending') OR\n\t\temail_status.event_type = 'customer_subscribed' \n\t\tTHEN TRUE ELSE FALSE END AS subscribed_member,\n\tumax.max_update AS last_updated_at,\n\tu.school_id\nFROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\" u\nINNER JOIN\n\t(SELECT\n\t\tutemp.id,\n\t\tmax(utemp.updated_at) AS max_update,\n\t\tmax(utemp.last_accessed_at) AS max_last_access,\n\t\tmax(utemp.last_authenticated_at) AS max_last_auth,\n\t\tmax(utemp.last_messaged_at) AS max_last_message\n\tFROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\" utemp\n\tGROUP BY utemp.id) umax ON umax.id = u.id AND umax.max_update = u.updated_at\nLEFT JOIN \"quasar_prod_warehouse\".\"public\".\"cio_latest_status\" email_status ON email_status.customer_id = u.id\nWHERE\n\t(u.\"source\" IS DISTINCT FROM 'runscope'\n\tAND u.\"source\" IS DISTINCT FROM 'runscope-client'\n\tAND u.email NOT SIMILAR TO '%runscope%@%'\n\tAND u.email NOT SIMILAR TO '%@%dosomething%') OR u.email IS NULL", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n\tu.id AS northstar_id,\n\tu.created_at,\n\tumax.max_last_auth AS last_logged_in,\n\tumax.max_last_access AS last_accessed,\n\tumax.max_last_message AS last_messaged_at,\n\tu.drupal_id AS drupal_uid,\n\tu.\"source\",\n\tu.email,\n\tu.facebook_id,\n\tu.mobile,\n\tCASE WHEN\n\t\tu.birthdate < '1900-01-01' OR \n\t\tu.birthdate > (date('now') - INTERVAL '10 years') \n\t\tTHEN NULL ELSE u.birthdate END AS birthdate,\n\tu.first_name,\n\tu.last_name,\n\tu.voter_registration_status,\n\tu.addr_street1 AS address_street_1,\n\tu.addr_street2 AS address_street_2,\n\tu.addr_city AS city,\n\tu.addr_state AS state,\n\tu.addr_zip AS zipcode,\n\tu.country,\n\tu.\"language\",\n\temail_status.event_type AS cio_status,\n\temail_status.\"timestamp\" AS cio_status_timestamp,\n\tu.sms_status,\n\tu.source_detail,\n\tsubstring(u.source_detail from '(?<=utm_medium\\:)(\\w*)') AS utm_medium,\n\tsubstring(u.source_detail from '(?<=utm_source\\:)(\\w*)') AS utm_source,\n\tsubstring(u.source_detail from '(?<=utm_campaign\\:)(\\w*)') AS utm_campaign,\n\t(u.feature_flags #>> '{badges}')::boolean as badges,\n\t(u.feature_flags #>> '{refer-friends}')::boolean as refer_friends,\n\t(u.feature_flags #>> '{refer-friends-scholarship}')::boolean as refer_friends_scholarship,\n\tCASE WHEN\n\t\tu.sms_status in ('active','less','pending') OR\n\t\temail_status.event_type = 'customer_subscribed' \n\t\tTHEN TRUE ELSE FALSE END AS subscribed_member,\n\tumax.max_update AS last_updated_at,\n\tu.school_id\nFROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\" u\nINNER JOIN\n\t(SELECT\n\t\tutemp.id,\n\t\tmax(utemp.updated_at) AS max_update,\n\t\tmax(utemp.last_accessed_at) AS max_last_access,\n\t\tmax(utemp.last_authenticated_at) AS max_last_auth,\n\t\tmax(utemp.last_messaged_at) AS max_last_message\n\tFROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\" utemp\n\tGROUP BY utemp.id) umax ON umax.id = u.id AND umax.max_update = u.updated_at\nLEFT JOIN \"quasar_prod_warehouse\".\"public\".\"cio_latest_status\" email_status ON email_status.customer_id = u.id\nWHERE\n\t(u.\"source\" IS DISTINCT FROM 'runscope'\n\tAND u.\"source\" IS DISTINCT FROM 'runscope-client'\n\tAND u.email NOT SIMILAR TO '%runscope%@%'\n\tAND u.email NOT SIMILAR TO '%@%dosomething%') OR u.email IS NULL", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/users_table/users.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.016824722290039062, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.683051Z", "completed_at": "2020-01-30T16:41:08.693451Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.693593Z", "completed_at": "2020-01-30T16:41:08.697249Z"}]}, {"node": {"name": "reportbacks", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "campaign_activity/reportbacks.sql", "original_file_path": "models/campaign_activity/reportbacks.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n    pd.northstar_id,\n    pd.id as post_id,\n    pd.signup_id,\n    pd.campaign_id,\n    pd.\"action\" as post_action,\n    pd.\"type\" as post_type,\n    pd.status as post_status,\n    pd.post_class,\n    pd.created_at as post_created_at,\n    pd.source as post_source,\n    pd.source_bucket as post_source_bucket,\n    pd.reportback_volume,\n    pd.civic_action,\n    pd.scholarship_entry,\n    pd.location,\n    pd.postal_code,\n    CASE\n        WHEN (pd.post_class ilike '%vote%' AND pd.status = 'confirmed')\n        THEN 'self-reported registrations'\n        WHEN (pd.post_class ilike '%vote%' AND pd.status <> 'confirmed')\n        THEN 'voter_registrations'\n        WHEN pd.\"type\" ilike '%photo%' AND pd.post_class NOT ilike '%vote%'\n        THEN 'photo_rbs'\n        WHEN pd.\"type\" ilike '%text%'\n        THEN 'text_rbs'\n        WHEN pd.\"type\" ilike '%social%'\n        THEN 'social'\n        WHEN pd.\"type\" ilike '%call%'\n        THEN 'phone_calls'\n        ELSE NULL END AS post_bucket\nFROM {{ ref('posts') }} pd\nWHERE pd.id IN\n    (SELECT\n        min(id)\n    FROM {{ ref('posts') }} p\n    WHERE p.is_reportback = 'true' AND p.is_accepted = 1\n    GROUP BY p.northstar_id, p.campaign_id, p.signup_id, p.post_class, p.reportback_volume)", "refs": [["posts"], ["posts"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.posts", "model.ds_dbt.posts"], "macros": []}, "unique_id": "model.ds_dbt.reportbacks", "empty": false, "fqn": ["ds_dbt", "campaign_activity", "reportbacks"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS reportbacks_unique ON {{ this }}(post_id)", "transaction": true, "index": 0}, {"sql": "CREATE INDEX IF NOT EXISTS reportbacks_i ON {{ this }}(post_created_at, campaign_id, post_class, reportback_volume)", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "reportbacks"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "reportbacks", "columns": {"northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "post_id": {"name": "post_id", "description": "Unique identifier for the post"}, "signup_id": {"name": "signup_id", "description": "Unique identifier for the signup"}, "campaign_id": {"name": "campaign_id", "description": "This is a unique identifier for the campaign"}, "post_action": {"name": "post_action", "description": "Post action (e.g. DefendDreamers_Nov9_CongressCalls, GunViolence2018_Feb15_ParklandResponse)"}, "post_type": {"name": "post_type", "description": "Type of post (e.g. photo)"}, "post_status": {"name": "post_status", "description": "Post status (e.g. accepted, rejected)"}, "post_class": {"name": "post_class", "description": "Class of the signup (e.g. \"photo - default\", \"phone-call - DefendDreamers_Jan16_BothBodies\")"}, "post_created_at": {"name": "post_created_at", "description": "When the item was created in UTC (eg. 2018-01-01 12:00:00)"}, "post_source": {"name": "post_source", "description": "Source of the URL (e.g. SMS, web), origin of the post (e.g. phoenix-web, phoenix-ashes, sms), or source where user was acquired. (e.g. sms, phoenix-next)"}, "post_source_bucket": {"name": "post_source_bucket", "description": "Grouping bucket for origin of the post (e.g. web, sms)"}, "reportback_volume": {"name": "reportback_volume", "description": "This field returns 1 if non voter-reg action, since campaigns team only counts those a 1 reportback. If voter-reg action, we want to count quantity of post as number of registered voters."}, "civic_action": {"name": "civic_action", "description": "Whether the post is a Civic Action. The application allows for multiple types of posts."}, "scholarship_entry": {"name": "scholarship_entry", "description": "Whether the post is a Scholarship Entry. The application allows for multiple types of posts."}, "location": {"name": "location", "description": "Location where the action takes place (e.g. US-NY)"}, "postal_code": {"name": "postal_code", "description": "Postal code where the action takes place"}, "post_bucket": {"name": "post_bucket", "description": "Grouping to which a post belongs (e.g. photo_rbs, phone_calls, social)"}}, "description": "A table containing information about reportbacks", "patch_path": "models/campaign_activity/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "id", "column_name": "post_id"}, {"documentation_package": "", "documentation_name": "signup_id", "column_name": "signup_id"}, {"documentation_package": "", "documentation_name": "campaign_id", "column_name": "campaign_id"}, {"documentation_package": "", "documentation_name": "action", "column_name": "post_action"}, {"documentation_package": "", "documentation_name": "type", "column_name": "post_type"}, {"documentation_package": "", "documentation_name": "status", "column_name": "post_status"}, {"documentation_package": "", "documentation_name": "post_class", "column_name": "post_class"}, {"documentation_package": "", "documentation_name": "created_at", "column_name": "post_created_at"}, {"documentation_package": "", "documentation_name": "source", "column_name": "post_source"}, {"documentation_package": "", "documentation_name": "source_bucket", "column_name": "post_source_bucket"}, {"documentation_package": "", "documentation_name": "reportback_volume", "column_name": "reportback_volume"}, {"documentation_package": "", "documentation_name": "civic_action", "column_name": "civic_action"}, {"documentation_package": "", "documentation_name": "scholarship_entry", "column_name": "scholarship_entry"}, {"documentation_package": "", "documentation_name": "location", "column_name": "location"}, {"documentation_package": "", "documentation_name": "postal_code", "column_name": "postal_code"}], "compiled": true, "compiled_sql": "SELECT\n    pd.northstar_id,\n    pd.id as post_id,\n    pd.signup_id,\n    pd.campaign_id,\n    pd.\"action\" as post_action,\n    pd.\"type\" as post_type,\n    pd.status as post_status,\n    pd.post_class,\n    pd.created_at as post_created_at,\n    pd.source as post_source,\n    pd.source_bucket as post_source_bucket,\n    pd.reportback_volume,\n    pd.civic_action,\n    pd.scholarship_entry,\n    pd.location,\n    pd.postal_code,\n    CASE\n        WHEN (pd.post_class ilike '%vote%' AND pd.status = 'confirmed')\n        THEN 'self-reported registrations'\n        WHEN (pd.post_class ilike '%vote%' AND pd.status <> 'confirmed')\n        THEN 'voter_registrations'\n        WHEN pd.\"type\" ilike '%photo%' AND pd.post_class NOT ilike '%vote%'\n        THEN 'photo_rbs'\n        WHEN pd.\"type\" ilike '%text%'\n        THEN 'text_rbs'\n        WHEN pd.\"type\" ilike '%social%'\n        THEN 'social'\n        WHEN pd.\"type\" ilike '%call%'\n        THEN 'phone_calls'\n        ELSE NULL END AS post_bucket\nFROM \"quasar_prod_warehouse\".\"public\".\"posts\" pd\nWHERE pd.id IN\n    (SELECT\n        min(id)\n    FROM \"quasar_prod_warehouse\".\"public\".\"posts\" p\n    WHERE p.is_reportback = 'true' AND p.is_accepted = 1\n    GROUP BY p.northstar_id, p.campaign_id, p.signup_id, p.post_class, p.reportback_volume)", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n    pd.northstar_id,\n    pd.id as post_id,\n    pd.signup_id,\n    pd.campaign_id,\n    pd.\"action\" as post_action,\n    pd.\"type\" as post_type,\n    pd.status as post_status,\n    pd.post_class,\n    pd.created_at as post_created_at,\n    pd.source as post_source,\n    pd.source_bucket as post_source_bucket,\n    pd.reportback_volume,\n    pd.civic_action,\n    pd.scholarship_entry,\n    pd.location,\n    pd.postal_code,\n    CASE\n        WHEN (pd.post_class ilike '%vote%' AND pd.status = 'confirmed')\n        THEN 'self-reported registrations'\n        WHEN (pd.post_class ilike '%vote%' AND pd.status <> 'confirmed')\n        THEN 'voter_registrations'\n        WHEN pd.\"type\" ilike '%photo%' AND pd.post_class NOT ilike '%vote%'\n        THEN 'photo_rbs'\n        WHEN pd.\"type\" ilike '%text%'\n        THEN 'text_rbs'\n        WHEN pd.\"type\" ilike '%social%'\n        THEN 'social'\n        WHEN pd.\"type\" ilike '%call%'\n        THEN 'phone_calls'\n        ELSE NULL END AS post_bucket\nFROM \"quasar_prod_warehouse\".\"public\".\"posts\" pd\nWHERE pd.id IN\n    (SELECT\n        min(id)\n    FROM \"quasar_prod_warehouse\".\"public\".\"posts\" p\n    WHERE p.is_reportback = 'true' AND p.is_accepted = 1\n    GROUP BY p.northstar_id, p.campaign_id, p.signup_id, p.post_class, p.reportback_volume)", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/campaign_activity/reportbacks.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0158541202545166, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.706274Z", "completed_at": "2020-01-30T16:41:08.714260Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.714388Z", "completed_at": "2020-01-30T16:41:08.716979Z"}]}, {"node": {"name": "not_null_posts_northstar_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_posts_northstar_id.sql", "original_file_path": "models/campaign_activity/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('posts'), column_name='northstar_id') }}", "refs": [["posts"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.posts"], "macros": []}, "unique_id": "test.ds_dbt.not_null_posts_northstar_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_posts_northstar_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_posts_northstar_id", "column_name": "northstar_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"posts\"\nwhere northstar_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"posts\"\nwhere northstar_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"posts\"\nwhere northstar_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_posts_northstar_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009532928466796875, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.722793Z", "completed_at": "2020-01-30T16:41:08.727823Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.727975Z", "completed_at": "2020-01-30T16:41:08.729117Z"}]}, {"node": {"name": "phoenix_events_combined", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "phoenix_events/phoenix_events_combined.sql", "original_file_path": "models/phoenix_events/phoenix_events_combined.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n    p.event_id,\n    p.event_datetime,\n    p.event_name,\n    p.event_source,\n    p.\"path\",\n    p.\"host\",\n    NULL AS query_parameters,\n    NULL AS clicked_link_url,\n    p.page_utm_source,\n    p.page_utm_medium,\n    p.page_utm_campaign,\n    p.referrer_host,\n    p.referrer_path,\n    p.referrer_source,\n    p.campaign_id,\n    p.campaign_name,\n    p.modal_type,\n    NULL AS search_query,\n    NULL AS context_source,\n    p.session_id,\n    p.browser_size,\n    p.northstar_id,\n    p.device_id\nFROM\n    public.puck_phoenix_events p\nUNION ALL\nSELECT\n    s.event_id,\n    s.event_datetime,\n    s.event_name,\n    s.event_source,\n    s.\"path\",\n    s.\"host\",\n    s.query_parameters,\n    s.clicked_link_url,\n    s.page_utm_source,\n    s.page_utm_medium,\n    s.page_utm_campaign,\n    s.referrer_host,\n    s.referrer_path,\n    s.referrer_source,\n    s.campaign_id,\n    s.campaign_name,\n    s.modal_type,\n    s.search_query,\n    s.context_source,\n    s.session_id,\n    s.browser_size,\n    s.northstar_id,\n    s.device_id\nFROM\n    {{ ref('snowplow_phoenix_events') }} s", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "model.ds_dbt.phoenix_events_combined", "empty": false, "fqn": ["ds_dbt", "phoenix_events", "phoenix_events_combined"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS pec_unique ON {{ this }}(event_datetime, event_name, event_id)", "transaction": true, "index": 0}, {"sql": "CREATE INDEX IF NOT EXISTS pec_session_id ON {{ this }} (session_id)", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "phoenix_events_combined"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "phoenix_events_combined", "columns": {"event_id": {"name": "event_id", "description": "This is a unique identifier for each event"}, "event_datetime": {"name": "event_datetime", "description": "When the event occurred in UTC (eg. 2018-01-01 12:00:00)"}, "event_name": {"name": "event_name", "description": "Name of the event (eg. northstar_submitted_register, https://docs.google.com/spreadsheets/d/1lm-fGrIm85nUTxSojqyCt_Ehmm1zEbViFhKpxcJiz1A/edit#gid=406441516)"}, "event_source": {"name": "event_source", "description": "Application source for event (eg. Phoenix, Northstar)"}, "path": {"name": "path", "description": "URL path event occurred at (eg. /login or /us/campaigns/huddle-for-heroes)"}, "host": {"name": "host", "description": "URL host where event occurred (eg. www.dosomething.org or identity.dosomething.org)"}, "query_parameters": {"name": "query_parameters", "description": "Optional query parameters for the request (eg. query=huddle)"}, "clicked_link_url": {"name": "clicked_link_url", "description": "URL of campaign (eg. https://dosome.click/nyn5m7)"}, "page_utm_source": {"name": "page_utm_source", "description": "Tracks where the traffic is coming from. (eg. scholarship_listing, Facebook)"}, "page_utm_medium": {"name": "page_utm_medium", "description": "How the traffic got to the platform (eg. referral, CPC)"}, "page_utm_campaign": {"name": "page_utm_campaign", "description": "Tracks which campaign the traffic was generated by. Shows up in Google Analytics as Campaign Name (eg. editorial_newsletter)"}, "referrer_host": {"name": "referrer_host", "description": "URL host of the referring site (eg. google.com)"}, "referrer_path": {"name": "referrer_path", "description": "URL path from referring site (eg. /10-stats-on-teen-drug-and-alcohol-use/)"}, "referrer_source": {"name": "referrer_source", "description": "Referrer source name (eg. Google, Facebook)"}, "campaign_id": {"name": "campaign_id", "description": "Internal campaign id from contentful"}, "campaign_name": {"name": "campaign_name", "description": "Name of campaign"}, "modal_type": {"name": "modal_type", "description": "NULL or SURVEY_MODAL"}, "session_id": {"name": "session_id", "description": "Unique identifier of the user's session"}, "browser_size": {"name": "browser_size", "description": "Which type of browser a user is using (eg. Mobile, Desktop)"}, "northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "device_id": {"name": "device_id", "description": "ID of the device used"}}, "description": "Table combining Snowplow based web event data with legacy Puck data based on 7/12/2019 cutover date", "patch_path": "models/phoenix_events/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "event_id", "column_name": "event_id"}, {"documentation_package": "", "documentation_name": "event_datetime", "column_name": "event_datetime"}, {"documentation_package": "", "documentation_name": "event_name", "column_name": "event_name"}, {"documentation_package": "", "documentation_name": "event_source", "column_name": "event_source"}, {"documentation_package": "", "documentation_name": "path", "column_name": "path"}, {"documentation_package": "", "documentation_name": "host", "column_name": "host"}, {"documentation_package": "", "documentation_name": "query_parameters", "column_name": "query_parameters"}, {"documentation_package": "", "documentation_name": "url", "column_name": "clicked_link_url"}, {"documentation_package": "", "documentation_name": "utm_source", "column_name": "page_utm_source"}, {"documentation_package": "", "documentation_name": "utm_medium", "column_name": "page_utm_medium"}, {"documentation_package": "", "documentation_name": "utm_campaign", "column_name": "page_utm_campaign"}, {"documentation_package": "", "documentation_name": "referrer_host", "column_name": "referrer_host"}, {"documentation_package": "", "documentation_name": "referrer_path", "column_name": "referrer_path"}, {"documentation_package": "", "documentation_name": "referrer_source", "column_name": "referrer_source"}, {"documentation_package": "", "documentation_name": "modal_type", "column_name": "modal_type"}, {"documentation_package": "", "documentation_name": "session_id", "column_name": "session_id"}, {"documentation_package": "", "documentation_name": "browser_size", "column_name": "browser_size"}, {"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "device_id", "column_name": "device_id"}], "compiled": true, "compiled_sql": "SELECT\n    p.event_id,\n    p.event_datetime,\n    p.event_name,\n    p.event_source,\n    p.\"path\",\n    p.\"host\",\n    NULL AS query_parameters,\n    NULL AS clicked_link_url,\n    p.page_utm_source,\n    p.page_utm_medium,\n    p.page_utm_campaign,\n    p.referrer_host,\n    p.referrer_path,\n    p.referrer_source,\n    p.campaign_id,\n    p.campaign_name,\n    p.modal_type,\n    NULL AS search_query,\n    NULL AS context_source,\n    p.session_id,\n    p.browser_size,\n    p.northstar_id,\n    p.device_id\nFROM\n    public.puck_phoenix_events p\nUNION ALL\nSELECT\n    s.event_id,\n    s.event_datetime,\n    s.event_name,\n    s.event_source,\n    s.\"path\",\n    s.\"host\",\n    s.query_parameters,\n    s.clicked_link_url,\n    s.page_utm_source,\n    s.page_utm_medium,\n    s.page_utm_campaign,\n    s.referrer_host,\n    s.referrer_path,\n    s.referrer_source,\n    s.campaign_id,\n    s.campaign_name,\n    s.modal_type,\n    s.search_query,\n    s.context_source,\n    s.session_id,\n    s.browser_size,\n    s.northstar_id,\n    s.device_id\nFROM\n    \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\" s", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n    p.event_id,\n    p.event_datetime,\n    p.event_name,\n    p.event_source,\n    p.\"path\",\n    p.\"host\",\n    NULL AS query_parameters,\n    NULL AS clicked_link_url,\n    p.page_utm_source,\n    p.page_utm_medium,\n    p.page_utm_campaign,\n    p.referrer_host,\n    p.referrer_path,\n    p.referrer_source,\n    p.campaign_id,\n    p.campaign_name,\n    p.modal_type,\n    NULL AS search_query,\n    NULL AS context_source,\n    p.session_id,\n    p.browser_size,\n    p.northstar_id,\n    p.device_id\nFROM\n    public.puck_phoenix_events p\nUNION ALL\nSELECT\n    s.event_id,\n    s.event_datetime,\n    s.event_name,\n    s.event_source,\n    s.\"path\",\n    s.\"host\",\n    s.query_parameters,\n    s.clicked_link_url,\n    s.page_utm_source,\n    s.page_utm_medium,\n    s.page_utm_campaign,\n    s.referrer_host,\n    s.referrer_path,\n    s.referrer_source,\n    s.campaign_id,\n    s.campaign_name,\n    s.modal_type,\n    s.search_query,\n    s.context_source,\n    s.session_id,\n    s.browser_size,\n    s.northstar_id,\n    s.device_id\nFROM\n    \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\" s", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/phoenix_events/phoenix_events_combined.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.014055967330932617, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.732960Z", "completed_at": "2020-01-30T16:41:08.740733Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.740894Z", "completed_at": "2020-01-30T16:41:08.744397Z"}]}, {"node": {"name": "snowplow_sessions", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "phoenix_events/snowplow_sessions.sql", "original_file_path": "models/phoenix_events/snowplow_sessions.sql", "package_name": "ds_dbt", "raw_sql": "WITH sessions AS (\nSELECT\n    session_id,\n    min(device_id) AS device_id,\n    min(event_datetime) AS landing_datetime,\n    max(event_datetime) AS ending_datetime,\n    date_part(\n\t'seconds', max(event_datetime) - min(event_datetime)\n    ) AS session_duration_seconds,\n    count(DISTINCT CASE WHEN event_name = 'view' THEN \"path\" END) AS num_pages_viewed\nFROM {{ ref('snowplow_phoenix_events') }}\nGROUP BY session_id\n),\nentry_exit_pages AS (\nSELECT DISTINCT\n    session_id,\n    first_value(\"path\") OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS landing_page,\n    first_value(event_id) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS event_id,\n    last_value(\"path\") OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS exit_page\nFROM {{ ref('snowplow_phoenix_events') }}\n),\nsession_referrer AS (\nSELECT DISTINCT\n    session_id,\n    first_value(referrer_host) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS session_referrer_host,\n    first_value(page_utm_source) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS session_utm_source,\n    first_value(page_utm_campaign) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS session_utm_campaign \nFROM {{ ref('snowplow_phoenix_events') }}\n),\ntime_between_sessions AS (\nSELECT DISTINCT\n    device_id,\n    session_id,\n    LAG(ending_datetime) OVER (PARTITION BY device_id ORDER BY landing_datetime\n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING\n    ) AS prev_session_endtime\nFROM sessions\n)\nSELECT\ns.session_id,\np.event_id,\ns.device_id,\ns.landing_datetime,\ns.ending_datetime,\nr.session_referrer_host,\nr.session_utm_source,\nr.session_utm_campaign,\ns.session_duration_seconds,\ns.num_pages_viewed,\np.landing_page,\np.exit_page,\ndate_part('day', s.landing_datetime - t.prev_session_endtime) AS days_since_last_session\nFROM sessions s\nLEFT JOIN entry_exit_pages p\nON p.session_id = s.session_id\nLEFT JOIN session_referrer r\nON r.session_id = s.session_id\nLEFT JOIN time_between_sessions t\nON t.session_id = s.session_id", "refs": [["snowplow_phoenix_events"], ["snowplow_phoenix_events"], ["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events", "model.ds_dbt.snowplow_phoenix_events", "model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "model.ds_dbt.snowplow_sessions", "empty": false, "fqn": ["ds_dbt", "phoenix_events", "snowplow_sessions"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS sps_landing ON {{ this }}(landing_datetime, landing_page)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "snowplow_sessions", "columns": {"session_id": {"name": "session_id", "description": "Unique identifier of the user's session"}, "event_id": {"name": "event_id", "description": "This is a unique identifier for each event"}, "device_id": {"name": "device_id", "description": "ID of the device used"}, "landing_datetime": {"name": "landing_datetime", "description": "When the session started in UTC (eg. 2018-01-01 12:00:00)"}, "ending_datetime": {"name": "ending_datetime", "description": "When the session ended in UTC (eg. 2018-01-01 12:00:00)"}, "session_duration_seconds": {"name": "session_duration_seconds", "description": "Session duration in seconds"}, "num_pages_views": {"name": "num_pages_views", "description": "Number of pages viewed in session"}, "landing_page": {"name": "landing_page", "description": "First page the user viewed in the session (eg. /us/facts/11-facts-about-bp-oil-spill)"}, "exit_page": {"name": "exit_page", "description": "\"Which page the user ended or exited their session from (eg. /us/campaigns/green-your-getaway)\""}, "days_since_last_session": {"name": "days_since_last_session", "description": "\"Days since their last session.\""}}, "description": "Table containing user session data derived from snowplow_phoenix_events", "patch_path": "models/phoenix_events/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "session_id", "column_name": "session_id"}, {"documentation_package": "", "documentation_name": "event_id", "column_name": "event_id"}, {"documentation_package": "", "documentation_name": "device_id", "column_name": "device_id"}, {"documentation_package": "", "documentation_name": "landing_datetime", "column_name": "landing_datetime"}, {"documentation_package": "", "documentation_name": "ending_datetime", "column_name": "ending_datetime"}, {"documentation_package": "", "documentation_name": "session_duration_seconds", "column_name": "session_duration_seconds"}, {"documentation_package": "", "documentation_name": "num_pages_views", "column_name": "num_pages_views"}, {"documentation_package": "", "documentation_name": "landing_page", "column_name": "landing_page"}, {"documentation_package": "", "documentation_name": "exit_page", "column_name": "exit_page"}, {"documentation_package": "", "documentation_name": "days_since_last_session", "column_name": "days_since_last_session"}], "compiled": true, "compiled_sql": "WITH sessions AS (\nSELECT\n    session_id,\n    min(device_id) AS device_id,\n    min(event_datetime) AS landing_datetime,\n    max(event_datetime) AS ending_datetime,\n    date_part(\n\t'seconds', max(event_datetime) - min(event_datetime)\n    ) AS session_duration_seconds,\n    count(DISTINCT CASE WHEN event_name = 'view' THEN \"path\" END) AS num_pages_viewed\nFROM \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nGROUP BY session_id\n),\nentry_exit_pages AS (\nSELECT DISTINCT\n    session_id,\n    first_value(\"path\") OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS landing_page,\n    first_value(event_id) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS event_id,\n    last_value(\"path\") OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS exit_page\nFROM \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n),\nsession_referrer AS (\nSELECT DISTINCT\n    session_id,\n    first_value(referrer_host) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS session_referrer_host,\n    first_value(page_utm_source) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS session_utm_source,\n    first_value(page_utm_campaign) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS session_utm_campaign \nFROM \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n),\ntime_between_sessions AS (\nSELECT DISTINCT\n    device_id,\n    session_id,\n    LAG(ending_datetime) OVER (PARTITION BY device_id ORDER BY landing_datetime\n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING\n    ) AS prev_session_endtime\nFROM sessions\n)\nSELECT\ns.session_id,\np.event_id,\ns.device_id,\ns.landing_datetime,\ns.ending_datetime,\nr.session_referrer_host,\nr.session_utm_source,\nr.session_utm_campaign,\ns.session_duration_seconds,\ns.num_pages_viewed,\np.landing_page,\np.exit_page,\ndate_part('day', s.landing_datetime - t.prev_session_endtime) AS days_since_last_session\nFROM sessions s\nLEFT JOIN entry_exit_pages p\nON p.session_id = s.session_id\nLEFT JOIN session_referrer r\nON r.session_id = s.session_id\nLEFT JOIN time_between_sessions t\nON t.session_id = s.session_id", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "WITH sessions AS (\nSELECT\n    session_id,\n    min(device_id) AS device_id,\n    min(event_datetime) AS landing_datetime,\n    max(event_datetime) AS ending_datetime,\n    date_part(\n\t'seconds', max(event_datetime) - min(event_datetime)\n    ) AS session_duration_seconds,\n    count(DISTINCT CASE WHEN event_name = 'view' THEN \"path\" END) AS num_pages_viewed\nFROM \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nGROUP BY session_id\n),\nentry_exit_pages AS (\nSELECT DISTINCT\n    session_id,\n    first_value(\"path\") OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS landing_page,\n    first_value(event_id) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS event_id,\n    last_value(\"path\") OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS exit_page\nFROM \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n),\nsession_referrer AS (\nSELECT DISTINCT\n    session_id,\n    first_value(referrer_host) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS session_referrer_host,\n    first_value(page_utm_source) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS session_utm_source,\n    first_value(page_utm_campaign) OVER (PARTITION BY session_id ORDER BY event_datetime \n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS session_utm_campaign \nFROM \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n),\ntime_between_sessions AS (\nSELECT DISTINCT\n    device_id,\n    session_id,\n    LAG(ending_datetime) OVER (PARTITION BY device_id ORDER BY landing_datetime\n\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING\n    ) AS prev_session_endtime\nFROM sessions\n)\nSELECT\ns.session_id,\np.event_id,\ns.device_id,\ns.landing_datetime,\ns.ending_datetime,\nr.session_referrer_host,\nr.session_utm_source,\nr.session_utm_campaign,\ns.session_duration_seconds,\ns.num_pages_viewed,\np.landing_page,\np.exit_page,\ndate_part('day', s.landing_datetime - t.prev_session_endtime) AS days_since_last_session\nFROM sessions s\nLEFT JOIN entry_exit_pages p\nON p.session_id = s.session_id\nLEFT JOIN session_referrer r\nON r.session_id = s.session_id\nLEFT JOIN time_between_sessions t\nON t.session_id = s.session_id", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/phoenix_events/snowplow_sessions.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0185701847076416, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.751514Z", "completed_at": "2020-01-30T16:41:08.763457Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.763613Z", "completed_at": "2020-01-30T16:41:08.766165Z"}]}, {"node": {"name": "not_null_snowplow_phoenix_events_browser_size", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_phoenix_events_browser_size.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_phoenix_events'), column_name='browser_size') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_phoenix_events_browser_size", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_phoenix_events_browser_size"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_phoenix_events_browser_size", "column_name": "browser_size", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere browser_size is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere browser_size is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere browser_size is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_phoenix_events_browser_size.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009968757629394531, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.771594Z", "completed_at": "2020-01-30T16:41:08.777237Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.777380Z", "completed_at": "2020-01-30T16:41:08.778514Z"}]}, {"node": {"name": "not_null_snowplow_phoenix_events_device_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_phoenix_events_device_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_phoenix_events'), column_name='device_id') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_phoenix_events_device_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_phoenix_events_device_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_phoenix_events_device_id", "column_name": "device_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere device_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere device_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere device_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_phoenix_events_device_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008022069931030273, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.781480Z", "completed_at": "2020-01-30T16:41:08.786578Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.786710Z", "completed_at": "2020-01-30T16:41:08.787772Z"}]}, {"node": {"name": "not_null_snowplow_phoenix_events_event_datetime", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_phoenix_events_event_datetime.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_phoenix_events'), column_name='event_datetime') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_phoenix_events_event_datetime", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_phoenix_events_event_datetime"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_phoenix_events_event_datetime", "column_name": "event_datetime", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere event_datetime is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere event_datetime is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere event_datetime is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_phoenix_events_event_datetime.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.00876307487487793, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.790886Z", "completed_at": "2020-01-30T16:41:08.796668Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.796823Z", "completed_at": "2020-01-30T16:41:08.798008Z"}]}, {"node": {"name": "not_null_snowplow_phoenix_events_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_phoenix_events_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_phoenix_events'), column_name='event_id') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_phoenix_events_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_phoenix_events_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_phoenix_events_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere event_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere event_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere event_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_phoenix_events_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0075871944427490234, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.800969Z", "completed_at": "2020-01-30T16:41:08.805679Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.805807Z", "completed_at": "2020-01-30T16:41:08.807008Z"}]}, {"node": {"name": "not_null_snowplow_phoenix_events_event_source", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_phoenix_events_event_source.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_phoenix_events'), column_name='event_source') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_phoenix_events_event_source", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_phoenix_events_event_source"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_phoenix_events_event_source", "column_name": "event_source", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere event_source is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere event_source is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere event_source is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_phoenix_events_event_source.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010080814361572266, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.811122Z", "completed_at": "2020-01-30T16:41:08.817005Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.817221Z", "completed_at": "2020-01-30T16:41:08.818553Z"}]}, {"node": {"name": "not_null_snowplow_phoenix_events_host", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_phoenix_events_host.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_phoenix_events'), column_name='host') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_phoenix_events_host", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_phoenix_events_host"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_phoenix_events_host", "column_name": "host", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere host is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere host is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere host is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_phoenix_events_host.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007279872894287109, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.821318Z", "completed_at": "2020-01-30T16:41:08.825793Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.825924Z", "completed_at": "2020-01-30T16:41:08.827023Z"}]}, {"node": {"name": "not_null_snowplow_phoenix_events_path", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_phoenix_events_path.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_phoenix_events'), column_name='path') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_phoenix_events_path", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_phoenix_events_path"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_phoenix_events_path", "column_name": "path", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere path is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere path is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere path is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_phoenix_events_path.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011905670166015625, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.831062Z", "completed_at": "2020-01-30T16:41:08.838899Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.839088Z", "completed_at": "2020-01-30T16:41:08.840274Z"}]}, {"node": {"name": "not_null_snowplow_phoenix_events_referrer_host", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_phoenix_events_referrer_host.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_phoenix_events'), column_name='referrer_host') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_phoenix_events_referrer_host", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_phoenix_events_referrer_host"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_phoenix_events_referrer_host", "column_name": "referrer_host", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere referrer_host is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere referrer_host is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere referrer_host is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_phoenix_events_referrer_host.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007397890090942383, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.843015Z", "completed_at": "2020-01-30T16:41:08.847628Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.847756Z", "completed_at": "2020-01-30T16:41:08.848846Z"}]}, {"node": {"name": "not_null_snowplow_phoenix_events_referrer_path", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_phoenix_events_referrer_path.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_phoenix_events'), column_name='referrer_path') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_phoenix_events_referrer_path", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_phoenix_events_referrer_path"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_phoenix_events_referrer_path", "column_name": "referrer_path", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere referrer_path is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere referrer_path is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere referrer_path is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_phoenix_events_referrer_path.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010297775268554688, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.850575Z", "completed_at": "2020-01-30T16:41:08.857831Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.857998Z", "completed_at": "2020-01-30T16:41:08.860398Z"}]}, {"node": {"name": "not_null_snowplow_phoenix_events_session_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_phoenix_events_session_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_phoenix_events'), column_name='session_id') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_phoenix_events_session_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_phoenix_events_session_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_phoenix_events_session_id", "column_name": "session_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere session_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere session_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\nwhere session_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_phoenix_events_session_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009002923965454102, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.863967Z", "completed_at": "2020-01-30T16:41:08.868582Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.868720Z", "completed_at": "2020-01-30T16:41:08.870745Z"}]}, {"node": {"name": "unique_snowplow_phoenix_events_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_snowplow_phoenix_events_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('snowplow_phoenix_events'), column_name='event_id') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.unique_snowplow_phoenix_events_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_snowplow_phoenix_events_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_snowplow_phoenix_events_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_snowplow_phoenix_events_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008469820022583008, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.874565Z", "completed_at": "2020-01-30T16:41:08.879976Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.880122Z", "completed_at": "2020-01-30T16:41:08.881190Z"}]}, {"node": {"name": "unique_snowplow_phoenix_events_event_source", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_snowplow_phoenix_events_event_source.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('snowplow_phoenix_events'), column_name='event_source') }}", "refs": [["snowplow_phoenix_events"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events"], "macros": []}, "unique_id": "test.ds_dbt.unique_snowplow_phoenix_events_event_source", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_snowplow_phoenix_events_event_source"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_snowplow_phoenix_events_event_source", "column_name": "event_source", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_snowplow_phoenix_events_event_source.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007581949234008789, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.883888Z", "completed_at": "2020-01-30T16:41:08.888681Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.888854Z", "completed_at": "2020-01-30T16:41:08.889910Z"}]}, {"node": {"name": "member_event_log", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "member_event_log/member_event_log.sql", "original_file_path": "models/member_event_log/member_event_log.sql", "package_name": "ds_dbt", "raw_sql": "SELECT\n    MD5(concat(a.northstar_id, a.\"timestamp\", a.action_id, a.action_serial_id)) AS event_id,\n    a.northstar_id AS northstar_id,\n    a.\"timestamp\" AS \"timestamp\",\n    a.\"action\" AS action_type,\n    a.action_id AS action_id,\n    a.\"source\" AS \"source\",\n    a.action_serial_id AS action_serial_id,\n    a.channel AS channel,\n    CASE \n    \tWHEN date_trunc('month', a.\"timestamp\") = date_trunc('month', u.created_at) \n    \tTHEN 'New' \n    \tELSE 'Returning' END\n    \tAS \"type\",\n    MIN(\"timestamp\") \n    \tOVER \n    \t(PARTITION BY a.northstar_id, date_trunc('month', a.\"timestamp\"))\n    \tAS first_action_month\nFROM ( \nSELECT\n    DISTINCT s.northstar_id AS northstar_id,\n    s.created_at AS \"timestamp\",\n    'signup' AS \"action\",\n    '1' AS action_id, \n    s.\"source\" AS \"source\",\n    s.id::varchar AS action_serial_id,\n(CASE WHEN s.\"source\" ILIKE '%sms%' THEN 'sms'\nWHEN s.\"source\" NOT LIKE '%sms%'AND s.\"source\" NOT LIKE '%email%' AND s.\"source\" NOT LIKE '%niche%' OR s.\"source\" IN ('rock-the-vote', 'turbovote') THEN 'web'\nWHEN s.\"source\" ILIKE '%email%' THEN 'email'\nWHEN s.\"source\" ILIKE '%niche%' THEN 'niche_coregistration'\nWHEN s.\"source\" NOT LIKE '%sms%'AND s.\"source\" NOT LIKE '%email%' AND s.\"source\" NOT LIKE '%niche%' AND s.\"source\" NOT IN ('rock-the-vote', 'turbovote') AND s.\"source\" IS NOT NULL THEN 'other' END) AS \"channel\"\nFROM {{ ref('signups') }} s\nWHERE s.\"source\" IS DISTINCT FROM 'importer-client'\nAND s.\"source\" IS DISTINCT FROM 'rock-the-vote'\nAND s.\"source\" IS DISTINCT FROM 'turbovote'\nUNION ALL\nSELECT\n    DISTINCT p.northstar_id AS northstar_id,\n    p.created_at AS \"timestamp\",\n    'post' AS \"action\",\n    '2' AS action_id,\n    p.\"source\" AS \"source\",\n    p.id::varchar AS action_serial_id,\n(CASE WHEN p.\"source\" ILIKE '%sms%' THEN 'sms'\nWHEN p.\"source\" ILIKE '%phoenix%' OR p.\"source\" IS NULL OR p.\"source\" ILIKE '%turbovote%' THEN 'web'\nWHEN p.\"source\" ILIKE '%app%' THEN 'mobile_app'\nWHEN p.\"source\" NOT LIKE '%phoenix%' AND p.\"source\" NOT LIKE '%sms%' AND p.\"source\" IS NOT NULL AND p.\"source\" NOT LIKE '%app%' AND p.\"source\" NOT LIKE '%turbovote%' THEN 'other' END) AS \"channel\"\nFROM {{ ref('posts') }} p\nWHERE p.status IN ('accepted', 'confirmed', 'register-OVR', 'register-form', 'pending')\nUNION ALL\nSELECT DISTINCT \n    u_access.id AS northstar_id,\n    u_access.last_accessed_at AS \"timestamp\",\n    'site_access' AS \"action\",\n    '3' AS action_id,\n    NULL AS \"source\",\n    '0' AS action_serial_id,\n    'web' AS channel\nFROM {{ ref('northstar_users_deduped') }} u_access\nWHERE u_access.last_accessed_at IS NOT NULL\nAND u_access.\"source\" IS DISTINCT FROM 'runscope'\nAND u_access.\"source\" IS DISTINCT FROM 'runscope-client'\nAND u_access.email IS DISTINCT FROM 'runscope-scheduled-test@dosomething.org'\nAND u_access.email IS DISTINCT FROM 'juy+runscopescheduledtests@dosomething.org'\nAND (u_access.email NOT ILIKE '%@example.org%' OR u_access.email IS NULL) \nUNION ALL\nSELECT DISTINCT \n    u_login.id AS northstar_id,\n    u_login.last_authenticated_at AS \"timestamp\",\n    'site_login' AS \"action\",\n    '4' AS action_id,\n    NULL AS \"source\",\n    '0' AS action_serial_id,\n    'web' AS channel\nFROM {{ ref('northstar_users_deduped') }} u_login\nWHERE u_login.last_authenticated_at IS NOT NULL \nAND u_login.\"source\" IS DISTINCT FROM 'runscope'\nAND u_login.\"source\" IS DISTINCT FROM 'runscope-client'\nAND u_login.email IS DISTINCT FROM 'runscope-scheduled-test@dosomething.org'\nAND u_login.email IS DISTINCT FROM 'juy+runscopescheduledtests@dosomething.org'\nAND (u_login.email NOT ILIKE '%@example.org%' OR u_login.email IS NULL) \nUNION ALL \nSELECT\n    DISTINCT u.id AS northstar_id,\n    u.created_at AS \"timestamp\",\n    'account_creation' AS action, \n    '5' AS action_id,\n    u.\"source\" AS \"source\",\n    '0' AS action_serial_id, \n    (CASE WHEN u.\"source\" ILIKE '%sms%' THEN 'sms'\n    WHEN u.\"source\" ILIKE '%phoenix%' OR u.\"source\" IS NULL THEN 'web'\n    WHEN u.\"source\" ILIKE '%niche%' THEN 'niche_coregistration'\n    WHEN u.\"source\" NOT LIKE '%niche%' AND u.\"source\" NOT LIKE '%sms%' AND u.\"source\" NOT LIKE '%phoenix%' AND u.\"source\" IS NOT NULL THEN 'other' END) AS \"channel\"\nFROM\n    (SELECT \n            u_create.id,\n            max(u_create.\"source\") AS \"source\",\n            min(u_create.created_at) AS created_at\n    FROM {{ ref('northstar_users_deduped') }} u_create\nWHERE u_create.\"source\" IS DISTINCT FROM 'importer-client'\nAND u_create.\"source\" IS DISTINCT FROM 'runscope'\nAND u_create.\"source\" IS DISTINCT FROM 'runscope-client'\nAND u_create.email IS DISTINCT FROM 'runscope-scheduled-test@dosomething.org'\nAND u_create.email IS DISTINCT FROM 'juy+runscopescheduledtests@dosomething.org'\nAND (u_create.email NOT ILIKE '%@example.org%' OR u_create.email IS NULL) \n    GROUP BY u_create.id) u\nUNION ALL \nSELECT\n    DISTINCT g.user_id AS northstar_id,\n    g.created_at AS \"timestamp\",\n    'messaged_gambit' AS \"action\", \n    '6' AS action_id,\n    'SMS' AS \"source\",\n    g.message_id AS action_serial_id,\n    'sms' AS \"channel\"\nFROM\n    {{ ref('gambit_messages_inbound') }} g\nWHERE \n\tg.user_id IS NOT NULL\n\tAND g.macro <> 'subscriptionStatusStop' \nUNION ALL \n    SELECT\n        DISTINCT cio.customer_id AS northstar_id,\n        cio.\"timestamp\" AS \"timestamp\",\n        'clicked_link' AS \"action\",\n        '7' AS action_id,\n        cio.template_id::CHARACTER AS \"source\",\n        cio.event_id AS action_serial_id, \n        'email' AS \"channel\"\n    FROM\n        cio.email_event cio\n    WHERE \n        cio.event_type = 'email_clicked'\n    AND cio.customer_id IS NOT NULL\nUNION ALL \nSELECT DISTINCT\n    b.northstar_id AS northstar_id,\n    b.click_time AS \"timestamp\",\n    CONCAT('bertly_link_', b.interaction_type) AS \"action\",\n    '10' AS action_id,\n    'bertly' AS \"source\",\n    b.click_id AS action_serial_id,\n    b.\"source\" AS \"channel\"\nFROM {{ ref('bertly_clicks') }} b\nINNER JOIN {{ ref('users') }} u\nON b.northstar_id = u.northstar_id\nWHERE b.northstar_id IS NOT NULL\nAND b.interaction_type IS DISTINCT FROM 'preview'\n) AS a\nLEFT JOIN {{ ref('users') }} u ON u.northstar_id = a.northstar_id", "refs": [["signups"], ["posts"], ["northstar_users_deduped"], ["northstar_users_deduped"], ["northstar_users_deduped"], ["gambit_messages_inbound"], ["bertly_clicks"], ["users"], ["users"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.signups", "model.ds_dbt.posts", "model.ds_dbt.northstar_users_deduped", "model.ds_dbt.northstar_users_deduped", "model.ds_dbt.northstar_users_deduped", "model.ds_dbt.gambit_messages_inbound", "model.ds_dbt.bertly_clicks", "model.ds_dbt.users", "model.ds_dbt.users"], "macros": []}, "unique_id": "model.ds_dbt.member_event_log", "empty": false, "fqn": ["ds_dbt", "member_event_log", "member_event_log"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX ON {{ this }}(timestamp, northstar_id, event_id)", "transaction": true, "index": 0}, {"sql": "CREATE INDEX ON {{ this }}(northstar_id, timestamp)", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "member_event_log"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "member_event_log", "columns": {"event_id": {"name": "event_id", "description": "This is a unique identifier for each event"}, "northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "timestamp": {"name": "timestamp", "description": "When the item was created in UTC (eg. 2018-01-01 12:00:00)"}, "action_type": {"name": "action_type", "description": "Type of action the user took. (e.g. share-something, donate-something)"}, "action_id": {"name": "action_id", "description": "Internal identifier of the action"}, "source": {"name": "source", "description": "Source of the URL (e.g. SMS, web), origin of the post (e.g. phoenix-web, phoenix-ashes, sms), or source where user was acquired. (e.g. sms, phoenix-next)"}, "action_serial_id": {"name": "action_serial_id", "description": "Serial id for the user's action. Depends on the source of the action. May be the bertly click id, sms message id, etc."}, "channel": {"name": "channel", "description": "Channel for the user's action. Depends on the source of the action. (e.g. web, sms)"}, "type": {"name": "type", "description": "Whether the user is new or returning"}, "first_action_month": {"name": "first_action_month", "description": "Month during which the user took their first action."}}, "description": "Table containing data for all member events.", "patch_path": "models/member_event_log/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "event_id", "column_name": "event_id"}, {"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "created_at", "column_name": "timestamp"}, {"documentation_package": "", "documentation_name": "action_type", "column_name": "action_type"}, {"documentation_package": "", "documentation_name": "action_id", "column_name": "action_id"}, {"documentation_package": "", "documentation_name": "source", "column_name": "source"}, {"documentation_package": "", "documentation_name": "action_serial_id", "column_name": "action_serial_id"}, {"documentation_package": "", "documentation_name": "channel", "column_name": "channel"}, {"documentation_package": "", "documentation_name": "first_action_month", "column_name": "first_action_month"}], "compiled": true, "compiled_sql": "SELECT\n    MD5(concat(a.northstar_id, a.\"timestamp\", a.action_id, a.action_serial_id)) AS event_id,\n    a.northstar_id AS northstar_id,\n    a.\"timestamp\" AS \"timestamp\",\n    a.\"action\" AS action_type,\n    a.action_id AS action_id,\n    a.\"source\" AS \"source\",\n    a.action_serial_id AS action_serial_id,\n    a.channel AS channel,\n    CASE \n    \tWHEN date_trunc('month', a.\"timestamp\") = date_trunc('month', u.created_at) \n    \tTHEN 'New' \n    \tELSE 'Returning' END\n    \tAS \"type\",\n    MIN(\"timestamp\") \n    \tOVER \n    \t(PARTITION BY a.northstar_id, date_trunc('month', a.\"timestamp\"))\n    \tAS first_action_month\nFROM ( \nSELECT\n    DISTINCT s.northstar_id AS northstar_id,\n    s.created_at AS \"timestamp\",\n    'signup' AS \"action\",\n    '1' AS action_id, \n    s.\"source\" AS \"source\",\n    s.id::varchar AS action_serial_id,\n(CASE WHEN s.\"source\" ILIKE '%sms%' THEN 'sms'\nWHEN s.\"source\" NOT LIKE '%sms%'AND s.\"source\" NOT LIKE '%email%' AND s.\"source\" NOT LIKE '%niche%' OR s.\"source\" IN ('rock-the-vote', 'turbovote') THEN 'web'\nWHEN s.\"source\" ILIKE '%email%' THEN 'email'\nWHEN s.\"source\" ILIKE '%niche%' THEN 'niche_coregistration'\nWHEN s.\"source\" NOT LIKE '%sms%'AND s.\"source\" NOT LIKE '%email%' AND s.\"source\" NOT LIKE '%niche%' AND s.\"source\" NOT IN ('rock-the-vote', 'turbovote') AND s.\"source\" IS NOT NULL THEN 'other' END) AS \"channel\"\nFROM \"quasar_prod_warehouse\".\"public\".\"signups\" s\nWHERE s.\"source\" IS DISTINCT FROM 'importer-client'\nAND s.\"source\" IS DISTINCT FROM 'rock-the-vote'\nAND s.\"source\" IS DISTINCT FROM 'turbovote'\nUNION ALL\nSELECT\n    DISTINCT p.northstar_id AS northstar_id,\n    p.created_at AS \"timestamp\",\n    'post' AS \"action\",\n    '2' AS action_id,\n    p.\"source\" AS \"source\",\n    p.id::varchar AS action_serial_id,\n(CASE WHEN p.\"source\" ILIKE '%sms%' THEN 'sms'\nWHEN p.\"source\" ILIKE '%phoenix%' OR p.\"source\" IS NULL OR p.\"source\" ILIKE '%turbovote%' THEN 'web'\nWHEN p.\"source\" ILIKE '%app%' THEN 'mobile_app'\nWHEN p.\"source\" NOT LIKE '%phoenix%' AND p.\"source\" NOT LIKE '%sms%' AND p.\"source\" IS NOT NULL AND p.\"source\" NOT LIKE '%app%' AND p.\"source\" NOT LIKE '%turbovote%' THEN 'other' END) AS \"channel\"\nFROM \"quasar_prod_warehouse\".\"public\".\"posts\" p\nWHERE p.status IN ('accepted', 'confirmed', 'register-OVR', 'register-form', 'pending')\nUNION ALL\nSELECT DISTINCT \n    u_access.id AS northstar_id,\n    u_access.last_accessed_at AS \"timestamp\",\n    'site_access' AS \"action\",\n    '3' AS action_id,\n    NULL AS \"source\",\n    '0' AS action_serial_id,\n    'web' AS channel\nFROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\" u_access\nWHERE u_access.last_accessed_at IS NOT NULL\nAND u_access.\"source\" IS DISTINCT FROM 'runscope'\nAND u_access.\"source\" IS DISTINCT FROM 'runscope-client'\nAND u_access.email IS DISTINCT FROM 'runscope-scheduled-test@dosomething.org'\nAND u_access.email IS DISTINCT FROM 'juy+runscopescheduledtests@dosomething.org'\nAND (u_access.email NOT ILIKE '%@example.org%' OR u_access.email IS NULL) \nUNION ALL\nSELECT DISTINCT \n    u_login.id AS northstar_id,\n    u_login.last_authenticated_at AS \"timestamp\",\n    'site_login' AS \"action\",\n    '4' AS action_id,\n    NULL AS \"source\",\n    '0' AS action_serial_id,\n    'web' AS channel\nFROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\" u_login\nWHERE u_login.last_authenticated_at IS NOT NULL \nAND u_login.\"source\" IS DISTINCT FROM 'runscope'\nAND u_login.\"source\" IS DISTINCT FROM 'runscope-client'\nAND u_login.email IS DISTINCT FROM 'runscope-scheduled-test@dosomething.org'\nAND u_login.email IS DISTINCT FROM 'juy+runscopescheduledtests@dosomething.org'\nAND (u_login.email NOT ILIKE '%@example.org%' OR u_login.email IS NULL) \nUNION ALL \nSELECT\n    DISTINCT u.id AS northstar_id,\n    u.created_at AS \"timestamp\",\n    'account_creation' AS action, \n    '5' AS action_id,\n    u.\"source\" AS \"source\",\n    '0' AS action_serial_id, \n    (CASE WHEN u.\"source\" ILIKE '%sms%' THEN 'sms'\n    WHEN u.\"source\" ILIKE '%phoenix%' OR u.\"source\" IS NULL THEN 'web'\n    WHEN u.\"source\" ILIKE '%niche%' THEN 'niche_coregistration'\n    WHEN u.\"source\" NOT LIKE '%niche%' AND u.\"source\" NOT LIKE '%sms%' AND u.\"source\" NOT LIKE '%phoenix%' AND u.\"source\" IS NOT NULL THEN 'other' END) AS \"channel\"\nFROM\n    (SELECT \n            u_create.id,\n            max(u_create.\"source\") AS \"source\",\n            min(u_create.created_at) AS created_at\n    FROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\" u_create\nWHERE u_create.\"source\" IS DISTINCT FROM 'importer-client'\nAND u_create.\"source\" IS DISTINCT FROM 'runscope'\nAND u_create.\"source\" IS DISTINCT FROM 'runscope-client'\nAND u_create.email IS DISTINCT FROM 'runscope-scheduled-test@dosomething.org'\nAND u_create.email IS DISTINCT FROM 'juy+runscopescheduledtests@dosomething.org'\nAND (u_create.email NOT ILIKE '%@example.org%' OR u_create.email IS NULL) \n    GROUP BY u_create.id) u\nUNION ALL \nSELECT\n    DISTINCT g.user_id AS northstar_id,\n    g.created_at AS \"timestamp\",\n    'messaged_gambit' AS \"action\", \n    '6' AS action_id,\n    'SMS' AS \"source\",\n    g.message_id AS action_serial_id,\n    'sms' AS \"channel\"\nFROM\n    \"quasar_prod_warehouse\".\"public\".\"gambit_messages_inbound\" g\nWHERE \n\tg.user_id IS NOT NULL\n\tAND g.macro <> 'subscriptionStatusStop' \nUNION ALL \n    SELECT\n        DISTINCT cio.customer_id AS northstar_id,\n        cio.\"timestamp\" AS \"timestamp\",\n        'clicked_link' AS \"action\",\n        '7' AS action_id,\n        cio.template_id::CHARACTER AS \"source\",\n        cio.event_id AS action_serial_id, \n        'email' AS \"channel\"\n    FROM\n        cio.email_event cio\n    WHERE \n        cio.event_type = 'email_clicked'\n    AND cio.customer_id IS NOT NULL\nUNION ALL \nSELECT DISTINCT\n    b.northstar_id AS northstar_id,\n    b.click_time AS \"timestamp\",\n    CONCAT('bertly_link_', b.interaction_type) AS \"action\",\n    '10' AS action_id,\n    'bertly' AS \"source\",\n    b.click_id AS action_serial_id,\n    b.\"source\" AS \"channel\"\nFROM \"quasar_prod_warehouse\".\"public\".\"bertly_clicks\" b\nINNER JOIN \"quasar_prod_warehouse\".\"public\".\"users\" u\nON b.northstar_id = u.northstar_id\nWHERE b.northstar_id IS NOT NULL\nAND b.interaction_type IS DISTINCT FROM 'preview'\n) AS a\nLEFT JOIN \"quasar_prod_warehouse\".\"public\".\"users\" u ON u.northstar_id = a.northstar_id", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT\n    MD5(concat(a.northstar_id, a.\"timestamp\", a.action_id, a.action_serial_id)) AS event_id,\n    a.northstar_id AS northstar_id,\n    a.\"timestamp\" AS \"timestamp\",\n    a.\"action\" AS action_type,\n    a.action_id AS action_id,\n    a.\"source\" AS \"source\",\n    a.action_serial_id AS action_serial_id,\n    a.channel AS channel,\n    CASE \n    \tWHEN date_trunc('month', a.\"timestamp\") = date_trunc('month', u.created_at) \n    \tTHEN 'New' \n    \tELSE 'Returning' END\n    \tAS \"type\",\n    MIN(\"timestamp\") \n    \tOVER \n    \t(PARTITION BY a.northstar_id, date_trunc('month', a.\"timestamp\"))\n    \tAS first_action_month\nFROM ( \nSELECT\n    DISTINCT s.northstar_id AS northstar_id,\n    s.created_at AS \"timestamp\",\n    'signup' AS \"action\",\n    '1' AS action_id, \n    s.\"source\" AS \"source\",\n    s.id::varchar AS action_serial_id,\n(CASE WHEN s.\"source\" ILIKE '%sms%' THEN 'sms'\nWHEN s.\"source\" NOT LIKE '%sms%'AND s.\"source\" NOT LIKE '%email%' AND s.\"source\" NOT LIKE '%niche%' OR s.\"source\" IN ('rock-the-vote', 'turbovote') THEN 'web'\nWHEN s.\"source\" ILIKE '%email%' THEN 'email'\nWHEN s.\"source\" ILIKE '%niche%' THEN 'niche_coregistration'\nWHEN s.\"source\" NOT LIKE '%sms%'AND s.\"source\" NOT LIKE '%email%' AND s.\"source\" NOT LIKE '%niche%' AND s.\"source\" NOT IN ('rock-the-vote', 'turbovote') AND s.\"source\" IS NOT NULL THEN 'other' END) AS \"channel\"\nFROM \"quasar_prod_warehouse\".\"public\".\"signups\" s\nWHERE s.\"source\" IS DISTINCT FROM 'importer-client'\nAND s.\"source\" IS DISTINCT FROM 'rock-the-vote'\nAND s.\"source\" IS DISTINCT FROM 'turbovote'\nUNION ALL\nSELECT\n    DISTINCT p.northstar_id AS northstar_id,\n    p.created_at AS \"timestamp\",\n    'post' AS \"action\",\n    '2' AS action_id,\n    p.\"source\" AS \"source\",\n    p.id::varchar AS action_serial_id,\n(CASE WHEN p.\"source\" ILIKE '%sms%' THEN 'sms'\nWHEN p.\"source\" ILIKE '%phoenix%' OR p.\"source\" IS NULL OR p.\"source\" ILIKE '%turbovote%' THEN 'web'\nWHEN p.\"source\" ILIKE '%app%' THEN 'mobile_app'\nWHEN p.\"source\" NOT LIKE '%phoenix%' AND p.\"source\" NOT LIKE '%sms%' AND p.\"source\" IS NOT NULL AND p.\"source\" NOT LIKE '%app%' AND p.\"source\" NOT LIKE '%turbovote%' THEN 'other' END) AS \"channel\"\nFROM \"quasar_prod_warehouse\".\"public\".\"posts\" p\nWHERE p.status IN ('accepted', 'confirmed', 'register-OVR', 'register-form', 'pending')\nUNION ALL\nSELECT DISTINCT \n    u_access.id AS northstar_id,\n    u_access.last_accessed_at AS \"timestamp\",\n    'site_access' AS \"action\",\n    '3' AS action_id,\n    NULL AS \"source\",\n    '0' AS action_serial_id,\n    'web' AS channel\nFROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\" u_access\nWHERE u_access.last_accessed_at IS NOT NULL\nAND u_access.\"source\" IS DISTINCT FROM 'runscope'\nAND u_access.\"source\" IS DISTINCT FROM 'runscope-client'\nAND u_access.email IS DISTINCT FROM 'runscope-scheduled-test@dosomething.org'\nAND u_access.email IS DISTINCT FROM 'juy+runscopescheduledtests@dosomething.org'\nAND (u_access.email NOT ILIKE '%@example.org%' OR u_access.email IS NULL) \nUNION ALL\nSELECT DISTINCT \n    u_login.id AS northstar_id,\n    u_login.last_authenticated_at AS \"timestamp\",\n    'site_login' AS \"action\",\n    '4' AS action_id,\n    NULL AS \"source\",\n    '0' AS action_serial_id,\n    'web' AS channel\nFROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\" u_login\nWHERE u_login.last_authenticated_at IS NOT NULL \nAND u_login.\"source\" IS DISTINCT FROM 'runscope'\nAND u_login.\"source\" IS DISTINCT FROM 'runscope-client'\nAND u_login.email IS DISTINCT FROM 'runscope-scheduled-test@dosomething.org'\nAND u_login.email IS DISTINCT FROM 'juy+runscopescheduledtests@dosomething.org'\nAND (u_login.email NOT ILIKE '%@example.org%' OR u_login.email IS NULL) \nUNION ALL \nSELECT\n    DISTINCT u.id AS northstar_id,\n    u.created_at AS \"timestamp\",\n    'account_creation' AS action, \n    '5' AS action_id,\n    u.\"source\" AS \"source\",\n    '0' AS action_serial_id, \n    (CASE WHEN u.\"source\" ILIKE '%sms%' THEN 'sms'\n    WHEN u.\"source\" ILIKE '%phoenix%' OR u.\"source\" IS NULL THEN 'web'\n    WHEN u.\"source\" ILIKE '%niche%' THEN 'niche_coregistration'\n    WHEN u.\"source\" NOT LIKE '%niche%' AND u.\"source\" NOT LIKE '%sms%' AND u.\"source\" NOT LIKE '%phoenix%' AND u.\"source\" IS NOT NULL THEN 'other' END) AS \"channel\"\nFROM\n    (SELECT \n            u_create.id,\n            max(u_create.\"source\") AS \"source\",\n            min(u_create.created_at) AS created_at\n    FROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\" u_create\nWHERE u_create.\"source\" IS DISTINCT FROM 'importer-client'\nAND u_create.\"source\" IS DISTINCT FROM 'runscope'\nAND u_create.\"source\" IS DISTINCT FROM 'runscope-client'\nAND u_create.email IS DISTINCT FROM 'runscope-scheduled-test@dosomething.org'\nAND u_create.email IS DISTINCT FROM 'juy+runscopescheduledtests@dosomething.org'\nAND (u_create.email NOT ILIKE '%@example.org%' OR u_create.email IS NULL) \n    GROUP BY u_create.id) u\nUNION ALL \nSELECT\n    DISTINCT g.user_id AS northstar_id,\n    g.created_at AS \"timestamp\",\n    'messaged_gambit' AS \"action\", \n    '6' AS action_id,\n    'SMS' AS \"source\",\n    g.message_id AS action_serial_id,\n    'sms' AS \"channel\"\nFROM\n    \"quasar_prod_warehouse\".\"public\".\"gambit_messages_inbound\" g\nWHERE \n\tg.user_id IS NOT NULL\n\tAND g.macro <> 'subscriptionStatusStop' \nUNION ALL \n    SELECT\n        DISTINCT cio.customer_id AS northstar_id,\n        cio.\"timestamp\" AS \"timestamp\",\n        'clicked_link' AS \"action\",\n        '7' AS action_id,\n        cio.template_id::CHARACTER AS \"source\",\n        cio.event_id AS action_serial_id, \n        'email' AS \"channel\"\n    FROM\n        cio.email_event cio\n    WHERE \n        cio.event_type = 'email_clicked'\n    AND cio.customer_id IS NOT NULL\nUNION ALL \nSELECT DISTINCT\n    b.northstar_id AS northstar_id,\n    b.click_time AS \"timestamp\",\n    CONCAT('bertly_link_', b.interaction_type) AS \"action\",\n    '10' AS action_id,\n    'bertly' AS \"source\",\n    b.click_id AS action_serial_id,\n    b.\"source\" AS \"channel\"\nFROM \"quasar_prod_warehouse\".\"public\".\"bertly_clicks\" b\nINNER JOIN \"quasar_prod_warehouse\".\"public\".\"users\" u\nON b.northstar_id = u.northstar_id\nWHERE b.northstar_id IS NOT NULL\nAND b.interaction_type IS DISTINCT FROM 'preview'\n) AS a\nLEFT JOIN \"quasar_prod_warehouse\".\"public\".\"users\" u ON u.northstar_id = a.northstar_id", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/member_event_log/member_event_log.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.01964116096496582, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.893683Z", "completed_at": "2020-01-30T16:41:08.908282Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.908415Z", "completed_at": "2020-01-30T16:41:08.910735Z"}]}, {"node": {"name": "relationships_snowplow_base_event_northstar_id__id__ref_users_", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/relationships_snowplow_base_event_northstar_id__id__ref_users_.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_relationships(model=ref('snowplow_base_event'), column_name='northstar_id', field='id', to=ref('users')) }}", "refs": [["snowplow_base_event"], ["users"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_base_event", "model.ds_dbt.users"], "macros": []}, "unique_id": "test.ds_dbt.relationships_snowplow_base_event_northstar_id__id__ref_users_", "empty": false, "fqn": ["ds_dbt", "schema_test", "relationships_snowplow_base_event_northstar_id__id__ref_users_"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "relationships_snowplow_base_event_northstar_id__id__ref_users_", "column_name": "northstar_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n\n", "wrapped_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"snowplow_base_event\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/relationships_snowplow_base_event_northstar_id__id__ref_users_.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009959220886230469, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.916116Z", "completed_at": "2020-01-30T16:41:08.921819Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.921961Z", "completed_at": "2020-01-30T16:41:08.923127Z"}]}, {"node": {"name": "relationships_snowplow_phoenix_events_northstar_id__id__ref_users_", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/relationships_snowplow_phoenix_events_northstar_id__id__ref_users_.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_relationships(model=ref('snowplow_phoenix_events'), column_name='northstar_id', field='id', to=ref('users')) }}", "refs": [["snowplow_phoenix_events"], ["users"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_phoenix_events", "model.ds_dbt.users"], "macros": []}, "unique_id": "test.ds_dbt.relationships_snowplow_phoenix_events_northstar_id__id__ref_users_", "empty": false, "fqn": ["ds_dbt", "schema_test", "relationships_snowplow_phoenix_events_northstar_id__id__ref_users_"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "relationships_snowplow_phoenix_events_northstar_id__id__ref_users_", "column_name": "northstar_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n\n", "wrapped_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"snowplow_phoenix_events\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/relationships_snowplow_phoenix_events_northstar_id__id__ref_users_.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009521007537841797, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.924942Z", "completed_at": "2020-01-30T16:41:08.932623Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.932766Z", "completed_at": "2020-01-30T16:41:08.933976Z"}]}, {"node": {"name": "relationships_snowplow_raw_events_northstar_id__id__ref_users_", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/relationships_snowplow_raw_events_northstar_id__id__ref_users_.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_relationships(model=ref('snowplow_raw_events'), column_name='northstar_id', field='id', to=ref('users')) }}", "refs": [["snowplow_raw_events"], ["users"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_raw_events", "model.ds_dbt.users"], "macros": []}, "unique_id": "test.ds_dbt.relationships_snowplow_raw_events_northstar_id__id__ref_users_", "empty": false, "fqn": ["ds_dbt", "schema_test", "relationships_snowplow_raw_events_northstar_id__id__ref_users_"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "relationships_snowplow_raw_events_northstar_id__id__ref_users_", "column_name": "northstar_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n\n", "wrapped_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"snowplow_raw_events\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/relationships_snowplow_raw_events_northstar_id__id__ref_users_.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010750055313110352, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.935713Z", "completed_at": "2020-01-30T16:41:08.944662Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.944825Z", "completed_at": "2020-01-30T16:41:08.945987Z"}]}, {"node": {"name": "not_null_reportbacks_northstar_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_reportbacks_northstar_id.sql", "original_file_path": "models/campaign_activity/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('reportbacks'), column_name='northstar_id') }}", "refs": [["reportbacks"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.reportbacks"], "macros": []}, "unique_id": "test.ds_dbt.not_null_reportbacks_northstar_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_reportbacks_northstar_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_reportbacks_northstar_id", "column_name": "northstar_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"reportbacks\"\nwhere northstar_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"reportbacks\"\nwhere northstar_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"reportbacks\"\nwhere northstar_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_reportbacks_northstar_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011887788772583008, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.949742Z", "completed_at": "2020-01-30T16:41:08.957624Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.957832Z", "completed_at": "2020-01-30T16:41:08.959109Z"}]}, {"node": {"name": "device_northstar", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "user_journey/device_northstar.sql", "original_file_path": "models/user_journey/device_northstar.sql", "package_name": "ds_dbt", "raw_sql": "--All Device ID - Northstar ID Combinations\nWITH devices_all AS (\n    SELEct device_id, northstar_id\n    FROM {{ ref('phoenix_events_combined') }}\n    GROUP BY device_id, northstar_id\n)\n,\n--Devices purely Anonymous (Remove Devices ever associated with NSIDs)\n--If a DeviceID was both logged-in and logged-out, it will be removed from the anonymous DeviceID pool\ndevices_an AS (\n    SELECt device_id\n    FROM devices_all\n    WHERE northstar_id IS NULL\n    EXCEPT\n    SELECT device_id\n    FROM devices_all\n    WHERE northstar_id IS NOT NULL\n)\nSELECT device_id, northstar_id\nFROM devices_all\nUNION ALL\nSELECT device_id, NULL\nFROM devices_an", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "model.ds_dbt.device_northstar", "empty": false, "fqn": ["ds_dbt", "user_journey", "device_northstar"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX ON {{ this }}(device_id)", "transaction": true, "index": 0}, {"sql": "CREATE INDEX ON {{ this }}(northstar_id)", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "device_northstar"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "device_northstar", "columns": {}, "description": "", "compiled": true, "compiled_sql": "--All Device ID - Northstar ID Combinations\nWITH devices_all AS (\n    SELEct device_id, northstar_id\n    FROM \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n    GROUP BY device_id, northstar_id\n)\n,\n--Devices purely Anonymous (Remove Devices ever associated with NSIDs)\n--If a DeviceID was both logged-in and logged-out, it will be removed from the anonymous DeviceID pool\ndevices_an AS (\n    SELECt device_id\n    FROM devices_all\n    WHERE northstar_id IS NULL\n    EXCEPT\n    SELECT device_id\n    FROM devices_all\n    WHERE northstar_id IS NOT NULL\n)\nSELECT device_id, northstar_id\nFROM devices_all\nUNION ALL\nSELECT device_id, NULL\nFROM devices_an", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "--All Device ID - Northstar ID Combinations\nWITH devices_all AS (\n    SELEct device_id, northstar_id\n    FROM \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n    GROUP BY device_id, northstar_id\n)\n,\n--Devices purely Anonymous (Remove Devices ever associated with NSIDs)\n--If a DeviceID was both logged-in and logged-out, it will be removed from the anonymous DeviceID pool\ndevices_an AS (\n    SELECt device_id\n    FROM devices_all\n    WHERE northstar_id IS NULL\n    EXCEPT\n    SELECT device_id\n    FROM devices_all\n    WHERE northstar_id IS NOT NULL\n)\nSELECT device_id, northstar_id\nFROM devices_all\nUNION ALL\nSELECT device_id, NULL\nFROM devices_an", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/user_journey/device_northstar.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009770870208740234, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.960985Z", "completed_at": "2020-01-30T16:41:08.968535Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.968676Z", "completed_at": "2020-01-30T16:41:08.970239Z"}]}, {"node": {"name": "not_null_phoenix_events_combined_browser_size", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_events_combined_browser_size.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_events_combined'), column_name='browser_size') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_events_combined_browser_size", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_events_combined_browser_size"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_events_combined_browser_size", "column_name": "browser_size", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere browser_size is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere browser_size is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere browser_size is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_events_combined_browser_size.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008831977844238281, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.973892Z", "completed_at": "2020-01-30T16:41:08.978913Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.979062Z", "completed_at": "2020-01-30T16:41:08.980803Z"}]}, {"node": {"name": "not_null_phoenix_events_combined_device_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_events_combined_device_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_events_combined'), column_name='device_id') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_events_combined_device_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_events_combined_device_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_events_combined_device_id", "column_name": "device_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere device_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere device_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere device_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_events_combined_device_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.01036214828491211, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.985751Z", "completed_at": "2020-01-30T16:41:08.992330Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:08.992502Z", "completed_at": "2020-01-30T16:41:08.993574Z"}]}, {"node": {"name": "not_null_phoenix_events_combined_event_datetime", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_events_combined_event_datetime.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_events_combined'), column_name='event_datetime') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_events_combined_event_datetime", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_events_combined_event_datetime"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_events_combined_event_datetime", "column_name": "event_datetime", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere event_datetime is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere event_datetime is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere event_datetime is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_events_combined_event_datetime.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007217884063720703, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:08.996284Z", "completed_at": "2020-01-30T16:41:09.000785Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.000913Z", "completed_at": "2020-01-30T16:41:09.002009Z"}]}, {"node": {"name": "not_null_phoenix_events_combined_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_events_combined_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_events_combined'), column_name='event_id') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_events_combined_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_events_combined_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_events_combined_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere event_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere event_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere event_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_events_combined_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010967016220092773, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.005792Z", "completed_at": "2020-01-30T16:41:09.012878Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.013026Z", "completed_at": "2020-01-30T16:41:09.014165Z"}]}, {"node": {"name": "not_null_phoenix_events_combined_event_source", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_events_combined_event_source.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_events_combined'), column_name='event_source') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_events_combined_event_source", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_events_combined_event_source"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_events_combined_event_source", "column_name": "event_source", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere event_source is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere event_source is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere event_source is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_events_combined_event_source.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007257699966430664, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.016976Z", "completed_at": "2020-01-30T16:41:09.021512Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.021643Z", "completed_at": "2020-01-30T16:41:09.022710Z"}]}, {"node": {"name": "not_null_phoenix_events_combined_host", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_events_combined_host.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_events_combined'), column_name='host') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_events_combined_host", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_events_combined_host"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_events_combined_host", "column_name": "host", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere host is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere host is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere host is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_events_combined_host.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.00958704948425293, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.025760Z", "completed_at": "2020-01-30T16:41:09.031929Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.032136Z", "completed_at": "2020-01-30T16:41:09.033594Z"}]}, {"node": {"name": "not_null_phoenix_events_combined_path", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_events_combined_path.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_events_combined'), column_name='path') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_events_combined_path", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_events_combined_path"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_events_combined_path", "column_name": "path", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere path is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere path is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere path is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_events_combined_path.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007961750030517578, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.036564Z", "completed_at": "2020-01-30T16:41:09.041525Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.041707Z", "completed_at": "2020-01-30T16:41:09.042844Z"}]}, {"node": {"name": "not_null_phoenix_events_combined_referrer_host", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_events_combined_referrer_host.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_events_combined'), column_name='referrer_host') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_events_combined_referrer_host", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_events_combined_referrer_host"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_events_combined_referrer_host", "column_name": "referrer_host", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere referrer_host is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere referrer_host is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere referrer_host is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_events_combined_referrer_host.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009148120880126953, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.045887Z", "completed_at": "2020-01-30T16:41:09.052012Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.052177Z", "completed_at": "2020-01-30T16:41:09.053439Z"}]}, {"node": {"name": "not_null_phoenix_events_combined_referrer_path", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_events_combined_referrer_path.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_events_combined'), column_name='referrer_path') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_events_combined_referrer_path", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_events_combined_referrer_path"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_events_combined_referrer_path", "column_name": "referrer_path", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere referrer_path is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere referrer_path is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere referrer_path is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_events_combined_referrer_path.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008594036102294922, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.056155Z", "completed_at": "2020-01-30T16:41:09.061671Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.061803Z", "completed_at": "2020-01-30T16:41:09.063202Z"}]}, {"node": {"name": "not_null_phoenix_events_combined_session_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_events_combined_session_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_events_combined'), column_name='session_id') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_events_combined_session_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_events_combined_session_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_events_combined_session_id", "column_name": "session_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere session_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere session_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\nwhere session_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_events_combined_session_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009569168090820312, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.066782Z", "completed_at": "2020-01-30T16:41:09.072641Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.072879Z", "completed_at": "2020-01-30T16:41:09.074107Z"}]}, {"node": {"name": "relationships_phoenix_events_combined_northstar_id__id__ref_users_", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/relationships_phoenix_events_combined_northstar_id__id__ref_users_.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_relationships(model=ref('phoenix_events_combined'), column_name='northstar_id', field='id', to=ref('users')) }}", "refs": [["phoenix_events_combined"], ["users"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined", "model.ds_dbt.users"], "macros": []}, "unique_id": "test.ds_dbt.relationships_phoenix_events_combined_northstar_id__id__ref_users_", "empty": false, "fqn": ["ds_dbt", "schema_test", "relationships_phoenix_events_combined_northstar_id__id__ref_users_"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "relationships_phoenix_events_combined_northstar_id__id__ref_users_", "column_name": "northstar_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n\n", "wrapped_sql": "\n\n\n\n\nselect count(*)\nfrom (\n    select northstar_id as id from \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n) as child\nleft join (\n    select id as id from \"quasar_prod_warehouse\".\"public\".\"users\"\n) as parent on parent.id = child.id\nwhere child.id is not null\n  and parent.id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/relationships_phoenix_events_combined_northstar_id__id__ref_users_.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.00807809829711914, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.076823Z", "completed_at": "2020-01-30T16:41:09.082167Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.082290Z", "completed_at": "2020-01-30T16:41:09.083379Z"}]}, {"node": {"name": "unique_phoenix_events_combined_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_phoenix_events_combined_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('phoenix_events_combined'), column_name='event_id') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.unique_phoenix_events_combined_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_phoenix_events_combined_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_phoenix_events_combined_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_phoenix_events_combined_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.00998234748840332, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.086846Z", "completed_at": "2020-01-30T16:41:09.093255Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.093416Z", "completed_at": "2020-01-30T16:41:09.094944Z"}]}, {"node": {"name": "unique_phoenix_events_combined_event_source", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_phoenix_events_combined_event_source.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('phoenix_events_combined'), column_name='event_source') }}", "refs": [["phoenix_events_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_events_combined"], "macros": []}, "unique_id": "test.ds_dbt.unique_phoenix_events_combined_event_source", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_phoenix_events_combined_event_source"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_phoenix_events_combined_event_source", "column_name": "event_source", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_source\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_events_combined\"\n    where event_source is not null\n    group by event_source\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_phoenix_events_combined_event_source.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008450984954833984, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.098024Z", "completed_at": "2020-01-30T16:41:09.103036Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.103269Z", "completed_at": "2020-01-30T16:41:09.104624Z"}]}, {"node": {"name": "phoenix_sessions_combined", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "phoenix_events/phoenix_sessions_combined.sql", "original_file_path": "models/phoenix_events/phoenix_sessions_combined.sql", "package_name": "ds_dbt", "raw_sql": "SELECT \n    p.session_id,\n    p.event_id,\n    p.device_id,\n    p.landing_datetime,\n    p.end_datetime as ending_datetime,\n    p.referrer_host as session_referrer_host,\n    p.utm_source as session_utm_source,\n    p.utm_campaign as session_utm_campaign,\n    EXTRACT(EPOCH FROM (end_datetime - landing_datetime)) AS session_duration_seconds,\n    NULL as num_pages_viewed,\n    p.landing_page,\n    NULL as exit_page,\n    NULL as days_since_last_session\nFROM public.puck_phoenix_sessions p\nUNION ALL\nSELECT\n    s.session_id,\n    s.event_id,\n    s.device_id,\n    s.landing_datetime,\n    s.ending_datetime,\n    s.session_referrer_host,\n    s.session_utm_source,\n    s.session_utm_campaign,\n    s.session_duration_seconds,\n    s.num_pages_viewed,\n    s.landing_page,\n    s.exit_page,\n    s.days_since_last_session\nFROM {{ ref('snowplow_sessions') }} s", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "model.ds_dbt.phoenix_sessions_combined", "empty": false, "fqn": ["ds_dbt", "phoenix_events", "phoenix_sessions_combined"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE INDEX IF NOT EXISTS psc_landing ON {{ this }}(landing_datetime, landing_page)", "transaction": true, "index": 0}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 2}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "phoenix_sessions_combined"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "phoenix_sessions_combined", "columns": {"session_id": {"name": "session_id", "description": "Unique identifier of the user's session"}, "event_id": {"name": "event_id", "description": "This is a unique identifier for each event"}, "device_id": {"name": "device_id", "description": "ID of the device used"}, "landing_datetime": {"name": "landing_datetime", "description": "When the session started in UTC (eg. 2018-01-01 12:00:00)"}, "ending_datetime": {"name": "ending_datetime", "description": "When the session ended in UTC (eg. 2018-01-01 12:00:00)"}, "session_duration_seconds": {"name": "session_duration_seconds", "description": "Session duration in seconds"}, "num_pages_views": {"name": "num_pages_views", "description": "Number of pages viewed in session"}, "landing_page": {"name": "landing_page", "description": "First page the user viewed in the session (eg. /us/facts/11-facts-about-bp-oil-spill)"}, "exit_page": {"name": "exit_page", "description": "\"Which page the user ended or exited their session from (eg. /us/campaigns/green-your-getaway)\""}, "days_since_last_session": {"name": "days_since_last_session", "description": "\"Days since their last session.\""}}, "description": "Table combining Snowplow based web session data with legacy Puck data based on 7/12/2019 cutover date", "patch_path": "models/phoenix_events/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "session_id", "column_name": "session_id"}, {"documentation_package": "", "documentation_name": "event_id", "column_name": "event_id"}, {"documentation_package": "", "documentation_name": "device_id", "column_name": "device_id"}, {"documentation_package": "", "documentation_name": "landing_datetime", "column_name": "landing_datetime"}, {"documentation_package": "", "documentation_name": "ending_datetime", "column_name": "ending_datetime"}, {"documentation_package": "", "documentation_name": "session_duration_seconds", "column_name": "session_duration_seconds"}, {"documentation_package": "", "documentation_name": "num_pages_views", "column_name": "num_pages_views"}, {"documentation_package": "", "documentation_name": "landing_page", "column_name": "landing_page"}, {"documentation_package": "", "documentation_name": "exit_page", "column_name": "exit_page"}, {"documentation_package": "", "documentation_name": "days_since_last_session", "column_name": "days_since_last_session"}], "compiled": true, "compiled_sql": "SELECT \n    p.session_id,\n    p.event_id,\n    p.device_id,\n    p.landing_datetime,\n    p.end_datetime as ending_datetime,\n    p.referrer_host as session_referrer_host,\n    p.utm_source as session_utm_source,\n    p.utm_campaign as session_utm_campaign,\n    EXTRACT(EPOCH FROM (end_datetime - landing_datetime)) AS session_duration_seconds,\n    NULL as num_pages_viewed,\n    p.landing_page,\n    NULL as exit_page,\n    NULL as days_since_last_session\nFROM public.puck_phoenix_sessions p\nUNION ALL\nSELECT\n    s.session_id,\n    s.event_id,\n    s.device_id,\n    s.landing_datetime,\n    s.ending_datetime,\n    s.session_referrer_host,\n    s.session_utm_source,\n    s.session_utm_campaign,\n    s.session_duration_seconds,\n    s.num_pages_viewed,\n    s.landing_page,\n    s.exit_page,\n    s.days_since_last_session\nFROM \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\" s", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "SELECT \n    p.session_id,\n    p.event_id,\n    p.device_id,\n    p.landing_datetime,\n    p.end_datetime as ending_datetime,\n    p.referrer_host as session_referrer_host,\n    p.utm_source as session_utm_source,\n    p.utm_campaign as session_utm_campaign,\n    EXTRACT(EPOCH FROM (end_datetime - landing_datetime)) AS session_duration_seconds,\n    NULL as num_pages_viewed,\n    p.landing_page,\n    NULL as exit_page,\n    NULL as days_since_last_session\nFROM public.puck_phoenix_sessions p\nUNION ALL\nSELECT\n    s.session_id,\n    s.event_id,\n    s.device_id,\n    s.landing_datetime,\n    s.ending_datetime,\n    s.session_referrer_host,\n    s.session_utm_source,\n    s.session_utm_campaign,\n    s.session_duration_seconds,\n    s.num_pages_viewed,\n    s.landing_page,\n    s.exit_page,\n    s.days_since_last_session\nFROM \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\" s", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/phoenix_events/phoenix_sessions_combined.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.011445045471191406, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.107574Z", "completed_at": "2020-01-30T16:41:09.115166Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.115295Z", "completed_at": "2020-01-30T16:41:09.117373Z"}]}, {"node": {"name": "not_null_snowplow_sessions_device_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_sessions_device_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_sessions'), column_name='device_id') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_sessions_device_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_sessions_device_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_sessions_device_id", "column_name": "device_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere device_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere device_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere device_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_sessions_device_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009248971939086914, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.122543Z", "completed_at": "2020-01-30T16:41:09.127619Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.127770Z", "completed_at": "2020-01-30T16:41:09.128908Z"}]}, {"node": {"name": "not_null_snowplow_sessions_ending_datetime", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_sessions_ending_datetime.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_sessions'), column_name='ending_datetime') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_sessions_ending_datetime", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_sessions_ending_datetime"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_sessions_ending_datetime", "column_name": "ending_datetime", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere ending_datetime is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere ending_datetime is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere ending_datetime is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_sessions_ending_datetime.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.012673139572143555, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.132063Z", "completed_at": "2020-01-30T16:41:09.140796Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.140958Z", "completed_at": "2020-01-30T16:41:09.142800Z"}]}, {"node": {"name": "not_null_snowplow_sessions_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_sessions_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_sessions'), column_name='event_id') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_sessions_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_sessions_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_sessions_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere event_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere event_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere event_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_sessions_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.012147903442382812, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.147192Z", "completed_at": "2020-01-30T16:41:09.154902Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.155058Z", "completed_at": "2020-01-30T16:41:09.156342Z"}]}, {"node": {"name": "not_null_snowplow_sessions_exit_page", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_sessions_exit_page.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_sessions'), column_name='exit_page') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_sessions_exit_page", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_sessions_exit_page"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_sessions_exit_page", "column_name": "exit_page", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere exit_page is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere exit_page is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere exit_page is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_sessions_exit_page.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009441852569580078, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.159724Z", "completed_at": "2020-01-30T16:41:09.165297Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.165495Z", "completed_at": "2020-01-30T16:41:09.167236Z"}]}, {"node": {"name": "not_null_snowplow_sessions_landing_datetime", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_sessions_landing_datetime.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_sessions'), column_name='landing_datetime') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_sessions_landing_datetime", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_sessions_landing_datetime"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_sessions_landing_datetime", "column_name": "landing_datetime", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere landing_datetime is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere landing_datetime is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere landing_datetime is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_sessions_landing_datetime.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008985757827758789, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.171577Z", "completed_at": "2020-01-30T16:41:09.177019Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.177146Z", "completed_at": "2020-01-30T16:41:09.178201Z"}]}, {"node": {"name": "not_null_snowplow_sessions_landing_page", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_sessions_landing_page.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_sessions'), column_name='landing_page') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_sessions_landing_page", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_sessions_landing_page"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_sessions_landing_page", "column_name": "landing_page", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere landing_page is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere landing_page is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere landing_page is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_sessions_landing_page.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007192134857177734, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.180865Z", "completed_at": "2020-01-30T16:41:09.185341Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.185473Z", "completed_at": "2020-01-30T16:41:09.186546Z"}]}, {"node": {"name": "not_null_snowplow_sessions_num_pages_views", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_sessions_num_pages_views.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_sessions'), column_name='num_pages_views') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_sessions_num_pages_views", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_sessions_num_pages_views"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_sessions_num_pages_views", "column_name": "num_pages_views", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere num_pages_views is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere num_pages_views is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere num_pages_views is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_sessions_num_pages_views.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0110321044921875, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.191305Z", "completed_at": "2020-01-30T16:41:09.197800Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.197956Z", "completed_at": "2020-01-30T16:41:09.199108Z"}]}, {"node": {"name": "not_null_snowplow_sessions_session_duration_seconds", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_sessions_session_duration_seconds.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_sessions'), column_name='session_duration_seconds') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_sessions_session_duration_seconds", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_sessions_session_duration_seconds"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_sessions_session_duration_seconds", "column_name": "session_duration_seconds", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere session_duration_seconds is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere session_duration_seconds is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere session_duration_seconds is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_sessions_session_duration_seconds.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0074770450592041016, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.201815Z", "completed_at": "2020-01-30T16:41:09.206471Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.206638Z", "completed_at": "2020-01-30T16:41:09.207717Z"}]}, {"node": {"name": "not_null_snowplow_sessions_session_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_snowplow_sessions_session_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('snowplow_sessions'), column_name='session_id') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.not_null_snowplow_sessions_session_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_snowplow_sessions_session_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_snowplow_sessions_session_id", "column_name": "session_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere session_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere session_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\nwhere session_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_snowplow_sessions_session_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008176326751708984, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.210857Z", "completed_at": "2020-01-30T16:41:09.215902Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.216081Z", "completed_at": "2020-01-30T16:41:09.217221Z"}]}, {"node": {"name": "unique_snowplow_sessions_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_snowplow_sessions_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('snowplow_sessions'), column_name='event_id') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.unique_snowplow_sessions_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_snowplow_sessions_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_snowplow_sessions_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_snowplow_sessions_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.007884979248046875, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.220996Z", "completed_at": "2020-01-30T16:41:09.225506Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.225632Z", "completed_at": "2020-01-30T16:41:09.226790Z"}]}, {"node": {"name": "unique_snowplow_sessions_session_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_snowplow_sessions_session_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('snowplow_sessions'), column_name='session_id') }}", "refs": [["snowplow_sessions"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.snowplow_sessions"], "macros": []}, "unique_id": "test.ds_dbt.unique_snowplow_sessions_session_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_snowplow_sessions_session_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_snowplow_sessions_session_id", "column_name": "session_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        session_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\n    where session_id is not null\n    group by session_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        session_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\n    where session_id is not null\n    group by session_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        session_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"snowplow_sessions\"\n    where session_id is not null\n    group by session_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_snowplow_sessions_session_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.014236211776733398, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.229435Z", "completed_at": "2020-01-30T16:41:09.241331Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.241554Z", "completed_at": "2020-01-30T16:41:09.242956Z"}]}, {"node": {"name": "user_activity", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "resource_type": "model", "path": "user_activity/user_activity.sql", "original_file_path": "models/user_activity/user_activity.sql", "package_name": "ds_dbt", "raw_sql": "WITH\nrb_summary AS (\n    SELECT\n\tr_with_lag.northstar_id,\n\tsum(r_with_lag.reportback_volume) AS total_quantity,\n\tcount(DISTINCT r_with_lag.campaign_id) AS num_rbs,\n\tmax(r_with_lag.post_created_at) AS most_recent_rb,\n\tmin(r_with_lag.post_created_at) AS first_rb,\n\tavg(r_with_lag.time_betw_rbs) AS avg_time_betw_rbs\n    FROM (\n\tSELECT\n\t    *,\n\t    post_created_at - lag(post_created_at) OVER (\n\t\tPARTITION BY northstar_id ORDER BY post_created_at) AS time_betw_rbs\n\tFROM {{ ref('reportbacks') }}\n    ) r_with_lag\n    GROUP BY r_with_lag.northstar_id\n),\ngambit_unsub AS (\n    SELECT\n\tf.user_id,\n\tCASE WHEN f.last_macro = 'subscriptionStatusStop' OR f.last_topic = 'unsubscribed'\n\tTHEN f.last_ts ELSE NULL END AS unsub_ts\n    FROM (\n\tSELECT DISTINCT\n\t    user_id,\n\t    LAST_VALUE(macro) OVER (PARTITION BY user_id ORDER BY created_at\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_macro,\n\t    LAST_VALUE(topic) OVER (PARTITION BY user_id ORDER BY created_at\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_topic,\n\t    LAST_VALUE(created_at) OVER (PARTITION BY user_id ORDER BY created_at\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_ts\n\tFROM {{ ref('gambit_messages_inbound') }}\n    ) f\n),\nsms_undeliverable AS (\n    SELECT DISTINCT\n\t    id,\n\t    FIRST_VALUE(updated_at) OVER (PARTITION BY id ORDER BY updated_at\n\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS unsub_ts\n    FROM {{ ref('northstar_users_deduped') }}\n    WHERE sms_status IN ('unknown', 'undeliverable', 'GDPR')\n),\nemail_unsub AS (\n    SELECT\n\tf.customer_id,\n\tCASE WHEN f.last_status = 'customer_unsubscribed' THEN f.last_ts ELSE NULL\n\t    END AS email_unsubscribed_at\n    FROM (\n\tSELECT DISTINCT\n\t    customer_id,\n\t    LAST_VALUE(\"timestamp\") OVER (\n\t\tPARTITION BY customer_id ORDER BY \"timestamp\", event_type\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_ts,\n\t    LAST_VALUE(event_type) OVER (\n\t\tPARTITION BY customer_id ORDER BY \"timestamp\", event_type\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_status\n\t    FROM cio.customer_event\n    ) f\n),\ntime_to_actions AS (\n    SELECT\n\tf.northstar_id,\n\tavg(date_part('day', f.time_to_next_action)) AS avg_days_next_action_after_rb,\n\tmin(date_part('day', f.time_to_next_action_last_rb)) AS days_to_next_action_after_last_rb\n    FROM (\n\tSELECT\n\t    r.northstar_id,\n\t    mel.next_action_ts - r.post_created_at AS time_to_next_action,\n\t    LAST_VALUE(mel.next_action_ts - r.post_created_at) OVER (\n\t\tPARTITION BY r.northstar_id ORDER BY r.post_created_at\n\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING\n\t    ) AS time_to_next_action_last_rb\n\tFROM {{ ref('reportbacks') }} r\n\tLEFT JOIN LATERAL (\n\t    SELECT \"timestamp\" AS next_action_ts, action_type AS next_action_type\n\t    FROM {{ ref('member_event_log') }}\n\t    WHERE northstar_id = r.northstar_id AND \"timestamp\" > r.post_created_at\n\t    ORDER BY \"timestamp\" ASC\n\t    LIMIT 1\n\t) mel\n\tON TRUE\n    ) f\n    GROUP BY f.northstar_id\n)\nSELECT\nu.northstar_id,\nu.created_at,\nu.sms_status,\nu.cio_status AS email_status,\ns.num_signups,\ns.most_recent_signup,\nr.num_rbs,\nr.total_quantity,\nr.most_recent_rb,\nr.first_rb,\nr.avg_time_betw_rbs,\ntime_to_actions.avg_days_next_action_after_rb,\ntime_to_actions.days_to_next_action_after_last_rb,\nmel.most_recent_action AS most_recent_mam_action,\nemail_opens.most_recent_email_open,\ngreatest(\n    mel.most_recent_action,\n    email_opens.most_recent_email_open\n) AS most_recent_all_actions,\nCASE WHEN time_to_actions.days_to_next_action_after_last_rb IS NULL\n    AND r.num_rbs > 0 THEN TRUE END AS last_action_is_rb,\nDATE_PART(\n    'day', now() - greatest(mel.most_recent_action, email_opens.most_recent_email_open)\n) as days_since_last_action,\n(r.first_rb - u.created_at) AS time_to_first_rb,\nCOALESCE(gambit_unsub.unsub_ts, sms_undeliverable.unsub_ts) AS sms_unsubscribed_at,\nemail_unsub.email_unsubscribed_at,\nCASE WHEN u.subscribed_member IS FALSE\n    THEN greatest(\n\tgambit_unsub.unsub_ts,\n\tsms_undeliverable.unsub_ts,\n\temail_unsub.email_unsubscribed_at) ELSE NULL\n    END AS user_unsubscribed_at,\nCASE WHEN u.\"source\" = 'importer-client' AND p.first_post = 'voter-reg'\n    THEN 1 ELSE 0 END AS voter_reg_acquisition\nFROM {{ ref('users') }} u\nLEFT JOIN (\nSELECT\n    northstar_id,\n    count(DISTINCT campaign_id) AS num_signups,\n    max(created_at) AS most_recent_signup\nFROM {{ ref('signups') }}\nGROUP BY northstar_id\n) s\nON u.northstar_id = s.northstar_id\nLEFT JOIN rb_summary r\nON u.northstar_id = r.northstar_id\nLEFT JOIN (\n    SELECT northstar_id, max(\"timestamp\") AS most_recent_action\n    FROM {{ ref('member_event_log') }}\n    GROUP BY northstar_id\n) mel\nON u.northstar_id = mel.northstar_id\nLEFT JOIN (\n    SELECT customer_id, max(\"timestamp\") AS most_recent_email_open\n    FROM cio.email_event\n    WHERE event_type = 'email_opened'\n    GROUP BY customer_id\n) email_opens\nON u.northstar_id = email_opens.customer_id\nLEFT JOIN gambit_unsub\nON u.northstar_id = gambit_unsub.user_id\nLEFT JOIN sms_undeliverable\nON u.northstar_id = sms_undeliverable.id\nLEFT JOIN email_unsub\nON u.northstar_id = email_unsub.customer_id\nLEFT JOIN time_to_actions\nON u.northstar_id = time_to_actions.northstar_id\nLEFT JOIN (\n    SELECT DISTINCT\n\tnorthstar_id,\n\tFIRST_VALUE(\"type\") OVER (\n\t    PARTITION BY northstar_id ORDER BY created_at) AS first_post\n    FROM {{ ref('posts') }}\n) p\nON u.northstar_id = p.northstar_id", "refs": [["reportbacks"], ["gambit_messages_inbound"], ["northstar_users_deduped"], ["reportbacks"], ["member_event_log"], ["users"], ["signups"], ["member_event_log"], ["posts"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.reportbacks", "model.ds_dbt.gambit_messages_inbound", "model.ds_dbt.northstar_users_deduped", "model.ds_dbt.reportbacks", "model.ds_dbt.member_event_log", "model.ds_dbt.users", "model.ds_dbt.signups", "model.ds_dbt.member_event_log", "model.ds_dbt.posts"], "macros": []}, "unique_id": "model.ds_dbt.user_activity", "empty": false, "fqn": ["ds_dbt", "user_activity", "user_activity"], "tags": [], "config": {"enabled": true, "materialized": "table", "tags": [], "pre-hook": [], "post-hook": [{"sql": "CREATE UNIQUE INDEX IF NOT EXISTS user_activity_unique_i ON {{ this }}(created_at, northstar_id)", "transaction": true, "index": 0}, {"sql": "CREATE INDEX IF NOT EXISTS most_recent_all_actions_i ON {{ this }}(most_recent_all_actions)", "transaction": true, "index": 1}, {"sql": "GRANT SELECT ON {{ this }} TO dsanalyst", "transaction": true, "index": 2}, {"sql": "GRANT SELECT ON {{ this }} TO looker", "transaction": true, "index": 3}], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}, "alias": "user_activity"}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "user_activity", "columns": {"northstar_id": {"name": "northstar_id", "description": "The Northstar ID of the user who generated the event"}, "created_at": {"name": "created_at", "description": "When the item was created in UTC (eg. 2018-01-01 12:00:00)"}, "sms_status": {"name": "sms_status", "description": "Current SMS status. (e.g. undeliverable, unknown)"}, "email_status": {"name": "email_status", "description": "Status of user from CIO. (e.g. customer_subscribed, customer_unsubscribed)"}, "num_signups": {"name": "num_signups", "description": "Quantity of campaign signups"}, "most_recent_signup": {"name": "most_recent_signup", "description": "Timestamp of the most recent signup in UTC (eg. 2018-01-01 12:00:00)"}, "num_rbs": {"name": "num_rbs", "description": "Quantity of reportbacks for the user"}, "total_quantity": {"name": "total_quantity", "description": "Total quantity of items in reportbacks"}, "most_recent_rb": {"name": "most_recent_rb", "description": "When the most recent reportback occurred in UTC (eg. 2018-01-01 12:00:00)"}, "first_rb": {"name": "first_rb", "description": "When the first reportback occurred in UTC (eg. 2018-01-01 12:00:00)"}, "avg_time_betw_rbs": {"name": "avg_time_betw_rbs", "description": "Calculated average time between reportbacks."}, "avg_days_next_action_after_rb": {"name": "avg_days_next_action_after_rb", "description": "Calculated average days until next action after reportback"}, "days_to_next_action_after_last_rb": {"name": "days_to_next_action_after_last_rb", "description": "This is a unique identifier for each event"}, "most_recent_mam_action": {"name": "most_recent_mam_action", "description": "Most recent monthly active member qualifying action in UTC (eg. 2018-01-01 12:00:00)."}, "most_recent_email_open": {"name": "most_recent_email_open", "description": "Most recent email open in UTC (eg. 2018-01-01 12:00:00)"}, "most_recent_all_actions": {"name": "most_recent_all_actions", "description": "Most recent timestamp of any action in UTC (eg. 2018-01-01 12:00:00)"}, "last_action_is_rb": {"name": "last_action_is_rb", "description": "Whether the last action the user took was a reportback"}, "days_since_last_action": {"name": "days_since_last_action", "description": "Days since the user's last action"}, "time_to_first_rb": {"name": "time_to_first_rb", "description": "How much time after registering until the user's first reportback"}, "sms_unsubscribed_at": {"name": "sms_unsubscribed_at", "description": "Timestamp of when user unsubscribed from email or sms"}, "user_unsubscribed_at": {"name": "user_unsubscribed_at", "description": "Timestamp of when user unsubscribed from email or sms"}, "voter_reg_acquisition": {"name": "voter_reg_acquisition", "description": "Whether the user was an acquisition through voter registration efforts."}}, "description": "Table containing aggregated user activity data.", "patch_path": "models/user_activity/schema.yml", "docrefs": [{"documentation_package": "", "documentation_name": "northstar_id", "column_name": "northstar_id"}, {"documentation_package": "", "documentation_name": "created_at", "column_name": "created_at"}, {"documentation_package": "", "documentation_name": "sms_status", "column_name": "sms_status"}, {"documentation_package": "", "documentation_name": "cio_status", "column_name": "email_status"}, {"documentation_package": "", "documentation_name": "num_signups", "column_name": "num_signups"}, {"documentation_package": "", "documentation_name": "most_recent_signup", "column_name": "most_recent_signup"}, {"documentation_package": "", "documentation_name": "num_rbs", "column_name": "num_rbs"}, {"documentation_package": "", "documentation_name": "total_quantity", "column_name": "total_quantity"}, {"documentation_package": "", "documentation_name": "most_recent_rb", "column_name": "most_recent_rb"}, {"documentation_package": "", "documentation_name": "first_rb", "column_name": "first_rb"}, {"documentation_package": "", "documentation_name": "avg_time_betw_rbs", "column_name": "avg_time_betw_rbs"}, {"documentation_package": "", "documentation_name": "avg_days_next_action_after_rb", "column_name": "avg_days_next_action_after_rb"}, {"documentation_package": "", "documentation_name": "days_to_next_action_after_last_rb", "column_name": "days_to_next_action_after_last_rb"}, {"documentation_package": "", "documentation_name": "most_recent_mam_action", "column_name": "most_recent_mam_action"}, {"documentation_package": "", "documentation_name": "most_recent_email_open", "column_name": "most_recent_email_open"}, {"documentation_package": "", "documentation_name": "most_recent_all_actions", "column_name": "most_recent_all_actions"}, {"documentation_package": "", "documentation_name": "last_action_is_rb", "column_name": "last_action_is_rb"}, {"documentation_package": "", "documentation_name": "days_since_last_action", "column_name": "days_since_last_action"}, {"documentation_package": "", "documentation_name": "time_to_first_rb", "column_name": "time_to_first_rb"}, {"documentation_package": "", "documentation_name": "user_unsubscribed_at", "column_name": "sms_unsubscribed_at"}, {"documentation_package": "", "documentation_name": "user_unsubscribed_at", "column_name": "user_unsubscribed_at"}, {"documentation_package": "", "documentation_name": "voter_reg_acquisition", "column_name": "voter_reg_acquisition"}], "compiled": true, "compiled_sql": "WITH\nrb_summary AS (\n    SELECT\n\tr_with_lag.northstar_id,\n\tsum(r_with_lag.reportback_volume) AS total_quantity,\n\tcount(DISTINCT r_with_lag.campaign_id) AS num_rbs,\n\tmax(r_with_lag.post_created_at) AS most_recent_rb,\n\tmin(r_with_lag.post_created_at) AS first_rb,\n\tavg(r_with_lag.time_betw_rbs) AS avg_time_betw_rbs\n    FROM (\n\tSELECT\n\t    *,\n\t    post_created_at - lag(post_created_at) OVER (\n\t\tPARTITION BY northstar_id ORDER BY post_created_at) AS time_betw_rbs\n\tFROM \"quasar_prod_warehouse\".\"public\".\"reportbacks\"\n    ) r_with_lag\n    GROUP BY r_with_lag.northstar_id\n),\ngambit_unsub AS (\n    SELECT\n\tf.user_id,\n\tCASE WHEN f.last_macro = 'subscriptionStatusStop' OR f.last_topic = 'unsubscribed'\n\tTHEN f.last_ts ELSE NULL END AS unsub_ts\n    FROM (\n\tSELECT DISTINCT\n\t    user_id,\n\t    LAST_VALUE(macro) OVER (PARTITION BY user_id ORDER BY created_at\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_macro,\n\t    LAST_VALUE(topic) OVER (PARTITION BY user_id ORDER BY created_at\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_topic,\n\t    LAST_VALUE(created_at) OVER (PARTITION BY user_id ORDER BY created_at\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_ts\n\tFROM \"quasar_prod_warehouse\".\"public\".\"gambit_messages_inbound\"\n    ) f\n),\nsms_undeliverable AS (\n    SELECT DISTINCT\n\t    id,\n\t    FIRST_VALUE(updated_at) OVER (PARTITION BY id ORDER BY updated_at\n\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS unsub_ts\n    FROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\"\n    WHERE sms_status IN ('unknown', 'undeliverable', 'GDPR')\n),\nemail_unsub AS (\n    SELECT\n\tf.customer_id,\n\tCASE WHEN f.last_status = 'customer_unsubscribed' THEN f.last_ts ELSE NULL\n\t    END AS email_unsubscribed_at\n    FROM (\n\tSELECT DISTINCT\n\t    customer_id,\n\t    LAST_VALUE(\"timestamp\") OVER (\n\t\tPARTITION BY customer_id ORDER BY \"timestamp\", event_type\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_ts,\n\t    LAST_VALUE(event_type) OVER (\n\t\tPARTITION BY customer_id ORDER BY \"timestamp\", event_type\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_status\n\t    FROM cio.customer_event\n    ) f\n),\ntime_to_actions AS (\n    SELECT\n\tf.northstar_id,\n\tavg(date_part('day', f.time_to_next_action)) AS avg_days_next_action_after_rb,\n\tmin(date_part('day', f.time_to_next_action_last_rb)) AS days_to_next_action_after_last_rb\n    FROM (\n\tSELECT\n\t    r.northstar_id,\n\t    mel.next_action_ts - r.post_created_at AS time_to_next_action,\n\t    LAST_VALUE(mel.next_action_ts - r.post_created_at) OVER (\n\t\tPARTITION BY r.northstar_id ORDER BY r.post_created_at\n\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING\n\t    ) AS time_to_next_action_last_rb\n\tFROM \"quasar_prod_warehouse\".\"public\".\"reportbacks\" r\n\tLEFT JOIN LATERAL (\n\t    SELECT \"timestamp\" AS next_action_ts, action_type AS next_action_type\n\t    FROM \"quasar_prod_warehouse\".\"public\".\"member_event_log\"\n\t    WHERE northstar_id = r.northstar_id AND \"timestamp\" > r.post_created_at\n\t    ORDER BY \"timestamp\" ASC\n\t    LIMIT 1\n\t) mel\n\tON TRUE\n    ) f\n    GROUP BY f.northstar_id\n)\nSELECT\nu.northstar_id,\nu.created_at,\nu.sms_status,\nu.cio_status AS email_status,\ns.num_signups,\ns.most_recent_signup,\nr.num_rbs,\nr.total_quantity,\nr.most_recent_rb,\nr.first_rb,\nr.avg_time_betw_rbs,\ntime_to_actions.avg_days_next_action_after_rb,\ntime_to_actions.days_to_next_action_after_last_rb,\nmel.most_recent_action AS most_recent_mam_action,\nemail_opens.most_recent_email_open,\ngreatest(\n    mel.most_recent_action,\n    email_opens.most_recent_email_open\n) AS most_recent_all_actions,\nCASE WHEN time_to_actions.days_to_next_action_after_last_rb IS NULL\n    AND r.num_rbs > 0 THEN TRUE END AS last_action_is_rb,\nDATE_PART(\n    'day', now() - greatest(mel.most_recent_action, email_opens.most_recent_email_open)\n) as days_since_last_action,\n(r.first_rb - u.created_at) AS time_to_first_rb,\nCOALESCE(gambit_unsub.unsub_ts, sms_undeliverable.unsub_ts) AS sms_unsubscribed_at,\nemail_unsub.email_unsubscribed_at,\nCASE WHEN u.subscribed_member IS FALSE\n    THEN greatest(\n\tgambit_unsub.unsub_ts,\n\tsms_undeliverable.unsub_ts,\n\temail_unsub.email_unsubscribed_at) ELSE NULL\n    END AS user_unsubscribed_at,\nCASE WHEN u.\"source\" = 'importer-client' AND p.first_post = 'voter-reg'\n    THEN 1 ELSE 0 END AS voter_reg_acquisition\nFROM \"quasar_prod_warehouse\".\"public\".\"users\" u\nLEFT JOIN (\nSELECT\n    northstar_id,\n    count(DISTINCT campaign_id) AS num_signups,\n    max(created_at) AS most_recent_signup\nFROM \"quasar_prod_warehouse\".\"public\".\"signups\"\nGROUP BY northstar_id\n) s\nON u.northstar_id = s.northstar_id\nLEFT JOIN rb_summary r\nON u.northstar_id = r.northstar_id\nLEFT JOIN (\n    SELECT northstar_id, max(\"timestamp\") AS most_recent_action\n    FROM \"quasar_prod_warehouse\".\"public\".\"member_event_log\"\n    GROUP BY northstar_id\n) mel\nON u.northstar_id = mel.northstar_id\nLEFT JOIN (\n    SELECT customer_id, max(\"timestamp\") AS most_recent_email_open\n    FROM cio.email_event\n    WHERE event_type = 'email_opened'\n    GROUP BY customer_id\n) email_opens\nON u.northstar_id = email_opens.customer_id\nLEFT JOIN gambit_unsub\nON u.northstar_id = gambit_unsub.user_id\nLEFT JOIN sms_undeliverable\nON u.northstar_id = sms_undeliverable.id\nLEFT JOIN email_unsub\nON u.northstar_id = email_unsub.customer_id\nLEFT JOIN time_to_actions\nON u.northstar_id = time_to_actions.northstar_id\nLEFT JOIN (\n    SELECT DISTINCT\n\tnorthstar_id,\n\tFIRST_VALUE(\"type\") OVER (\n\t    PARTITION BY northstar_id ORDER BY created_at) AS first_post\n    FROM \"quasar_prod_warehouse\".\"public\".\"posts\"\n) p\nON u.northstar_id = p.northstar_id", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "WITH\nrb_summary AS (\n    SELECT\n\tr_with_lag.northstar_id,\n\tsum(r_with_lag.reportback_volume) AS total_quantity,\n\tcount(DISTINCT r_with_lag.campaign_id) AS num_rbs,\n\tmax(r_with_lag.post_created_at) AS most_recent_rb,\n\tmin(r_with_lag.post_created_at) AS first_rb,\n\tavg(r_with_lag.time_betw_rbs) AS avg_time_betw_rbs\n    FROM (\n\tSELECT\n\t    *,\n\t    post_created_at - lag(post_created_at) OVER (\n\t\tPARTITION BY northstar_id ORDER BY post_created_at) AS time_betw_rbs\n\tFROM \"quasar_prod_warehouse\".\"public\".\"reportbacks\"\n    ) r_with_lag\n    GROUP BY r_with_lag.northstar_id\n),\ngambit_unsub AS (\n    SELECT\n\tf.user_id,\n\tCASE WHEN f.last_macro = 'subscriptionStatusStop' OR f.last_topic = 'unsubscribed'\n\tTHEN f.last_ts ELSE NULL END AS unsub_ts\n    FROM (\n\tSELECT DISTINCT\n\t    user_id,\n\t    LAST_VALUE(macro) OVER (PARTITION BY user_id ORDER BY created_at\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_macro,\n\t    LAST_VALUE(topic) OVER (PARTITION BY user_id ORDER BY created_at\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_topic,\n\t    LAST_VALUE(created_at) OVER (PARTITION BY user_id ORDER BY created_at\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_ts\n\tFROM \"quasar_prod_warehouse\".\"public\".\"gambit_messages_inbound\"\n    ) f\n),\nsms_undeliverable AS (\n    SELECT DISTINCT\n\t    id,\n\t    FIRST_VALUE(updated_at) OVER (PARTITION BY id ORDER BY updated_at\n\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS unsub_ts\n    FROM \"quasar_prod_warehouse\".\"public\".\"northstar_users_deduped\"\n    WHERE sms_status IN ('unknown', 'undeliverable', 'GDPR')\n),\nemail_unsub AS (\n    SELECT\n\tf.customer_id,\n\tCASE WHEN f.last_status = 'customer_unsubscribed' THEN f.last_ts ELSE NULL\n\t    END AS email_unsubscribed_at\n    FROM (\n\tSELECT DISTINCT\n\t    customer_id,\n\t    LAST_VALUE(\"timestamp\") OVER (\n\t\tPARTITION BY customer_id ORDER BY \"timestamp\", event_type\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_ts,\n\t    LAST_VALUE(event_type) OVER (\n\t\tPARTITION BY customer_id ORDER BY \"timestamp\", event_type\n\t\tRANGE BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING) AS last_status\n\t    FROM cio.customer_event\n    ) f\n),\ntime_to_actions AS (\n    SELECT\n\tf.northstar_id,\n\tavg(date_part('day', f.time_to_next_action)) AS avg_days_next_action_after_rb,\n\tmin(date_part('day', f.time_to_next_action_last_rb)) AS days_to_next_action_after_last_rb\n    FROM (\n\tSELECT\n\t    r.northstar_id,\n\t    mel.next_action_ts - r.post_created_at AS time_to_next_action,\n\t    LAST_VALUE(mel.next_action_ts - r.post_created_at) OVER (\n\t\tPARTITION BY r.northstar_id ORDER BY r.post_created_at\n\t\tROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING\n\t    ) AS time_to_next_action_last_rb\n\tFROM \"quasar_prod_warehouse\".\"public\".\"reportbacks\" r\n\tLEFT JOIN LATERAL (\n\t    SELECT \"timestamp\" AS next_action_ts, action_type AS next_action_type\n\t    FROM \"quasar_prod_warehouse\".\"public\".\"member_event_log\"\n\t    WHERE northstar_id = r.northstar_id AND \"timestamp\" > r.post_created_at\n\t    ORDER BY \"timestamp\" ASC\n\t    LIMIT 1\n\t) mel\n\tON TRUE\n    ) f\n    GROUP BY f.northstar_id\n)\nSELECT\nu.northstar_id,\nu.created_at,\nu.sms_status,\nu.cio_status AS email_status,\ns.num_signups,\ns.most_recent_signup,\nr.num_rbs,\nr.total_quantity,\nr.most_recent_rb,\nr.first_rb,\nr.avg_time_betw_rbs,\ntime_to_actions.avg_days_next_action_after_rb,\ntime_to_actions.days_to_next_action_after_last_rb,\nmel.most_recent_action AS most_recent_mam_action,\nemail_opens.most_recent_email_open,\ngreatest(\n    mel.most_recent_action,\n    email_opens.most_recent_email_open\n) AS most_recent_all_actions,\nCASE WHEN time_to_actions.days_to_next_action_after_last_rb IS NULL\n    AND r.num_rbs > 0 THEN TRUE END AS last_action_is_rb,\nDATE_PART(\n    'day', now() - greatest(mel.most_recent_action, email_opens.most_recent_email_open)\n) as days_since_last_action,\n(r.first_rb - u.created_at) AS time_to_first_rb,\nCOALESCE(gambit_unsub.unsub_ts, sms_undeliverable.unsub_ts) AS sms_unsubscribed_at,\nemail_unsub.email_unsubscribed_at,\nCASE WHEN u.subscribed_member IS FALSE\n    THEN greatest(\n\tgambit_unsub.unsub_ts,\n\tsms_undeliverable.unsub_ts,\n\temail_unsub.email_unsubscribed_at) ELSE NULL\n    END AS user_unsubscribed_at,\nCASE WHEN u.\"source\" = 'importer-client' AND p.first_post = 'voter-reg'\n    THEN 1 ELSE 0 END AS voter_reg_acquisition\nFROM \"quasar_prod_warehouse\".\"public\".\"users\" u\nLEFT JOIN (\nSELECT\n    northstar_id,\n    count(DISTINCT campaign_id) AS num_signups,\n    max(created_at) AS most_recent_signup\nFROM \"quasar_prod_warehouse\".\"public\".\"signups\"\nGROUP BY northstar_id\n) s\nON u.northstar_id = s.northstar_id\nLEFT JOIN rb_summary r\nON u.northstar_id = r.northstar_id\nLEFT JOIN (\n    SELECT northstar_id, max(\"timestamp\") AS most_recent_action\n    FROM \"quasar_prod_warehouse\".\"public\".\"member_event_log\"\n    GROUP BY northstar_id\n) mel\nON u.northstar_id = mel.northstar_id\nLEFT JOIN (\n    SELECT customer_id, max(\"timestamp\") AS most_recent_email_open\n    FROM cio.email_event\n    WHERE event_type = 'email_opened'\n    GROUP BY customer_id\n) email_opens\nON u.northstar_id = email_opens.customer_id\nLEFT JOIN gambit_unsub\nON u.northstar_id = gambit_unsub.user_id\nLEFT JOIN sms_undeliverable\nON u.northstar_id = sms_undeliverable.id\nLEFT JOIN email_unsub\nON u.northstar_id = email_unsub.customer_id\nLEFT JOIN time_to_actions\nON u.northstar_id = time_to_actions.northstar_id\nLEFT JOIN (\n    SELECT DISTINCT\n\tnorthstar_id,\n\tFIRST_VALUE(\"type\") OVER (\n\t    PARTITION BY northstar_id ORDER BY created_at) AS first_post\n    FROM \"quasar_prod_warehouse\".\"public\".\"posts\"\n) p\nON u.northstar_id = p.northstar_id", "wrapped_sql": "None", "build_path": "../../docs/compiled/ds_dbt/user_activity/user_activity.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0199129581451416, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.245907Z", "completed_at": "2020-01-30T16:41:09.260733Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.260875Z", "completed_at": "2020-01-30T16:41:09.264319Z"}]}, {"node": {"name": "not_null_phoenix_sessions_combined_device_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_sessions_combined_device_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_sessions_combined'), column_name='device_id') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_sessions_combined_device_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_sessions_combined_device_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_sessions_combined_device_id", "column_name": "device_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere device_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere device_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere device_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_sessions_combined_device_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010380983352661133, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.271623Z", "completed_at": "2020-01-30T16:41:09.276772Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.276911Z", "completed_at": "2020-01-30T16:41:09.278083Z"}]}, {"node": {"name": "not_null_phoenix_sessions_combined_ending_datetime", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_sessions_combined_ending_datetime.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_sessions_combined'), column_name='ending_datetime') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_sessions_combined_ending_datetime", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_sessions_combined_ending_datetime"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_sessions_combined_ending_datetime", "column_name": "ending_datetime", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere ending_datetime is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere ending_datetime is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere ending_datetime is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_sessions_combined_ending_datetime.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0073626041412353516, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.280964Z", "completed_at": "2020-01-30T16:41:09.285536Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.285690Z", "completed_at": "2020-01-30T16:41:09.286795Z"}]}, {"node": {"name": "not_null_phoenix_sessions_combined_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_sessions_combined_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_sessions_combined'), column_name='event_id') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_sessions_combined_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_sessions_combined_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_sessions_combined_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere event_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere event_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere event_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_sessions_combined_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009243965148925781, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.288960Z", "completed_at": "2020-01-30T16:41:09.295320Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.295546Z", "completed_at": "2020-01-30T16:41:09.297514Z"}]}, {"node": {"name": "not_null_phoenix_sessions_combined_exit_page", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_sessions_combined_exit_page.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_sessions_combined'), column_name='exit_page') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_sessions_combined_exit_page", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_sessions_combined_exit_page"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_sessions_combined_exit_page", "column_name": "exit_page", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere exit_page is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere exit_page is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere exit_page is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_sessions_combined_exit_page.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008157014846801758, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.300831Z", "completed_at": "2020-01-30T16:41:09.305711Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.305861Z", "completed_at": "2020-01-30T16:41:09.307235Z"}]}, {"node": {"name": "not_null_phoenix_sessions_combined_landing_datetime", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_sessions_combined_landing_datetime.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_sessions_combined'), column_name='landing_datetime') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_sessions_combined_landing_datetime", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_sessions_combined_landing_datetime"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_sessions_combined_landing_datetime", "column_name": "landing_datetime", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere landing_datetime is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere landing_datetime is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere landing_datetime is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_sessions_combined_landing_datetime.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.010576248168945312, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.308941Z", "completed_at": "2020-01-30T16:41:09.317596Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.317804Z", "completed_at": "2020-01-30T16:41:09.319063Z"}]}, {"node": {"name": "not_null_phoenix_sessions_combined_landing_page", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_sessions_combined_landing_page.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_sessions_combined'), column_name='landing_page') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_sessions_combined_landing_page", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_sessions_combined_landing_page"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_sessions_combined_landing_page", "column_name": "landing_page", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere landing_page is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere landing_page is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere landing_page is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_sessions_combined_landing_page.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008367776870727539, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.322348Z", "completed_at": "2020-01-30T16:41:09.327841Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.327983Z", "completed_at": "2020-01-30T16:41:09.329128Z"}]}, {"node": {"name": "not_null_phoenix_sessions_combined_num_pages_views", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_sessions_combined_num_pages_views.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_sessions_combined'), column_name='num_pages_views') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_sessions_combined_num_pages_views", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_sessions_combined_num_pages_views"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_sessions_combined_num_pages_views", "column_name": "num_pages_views", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere num_pages_views is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere num_pages_views is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere num_pages_views is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_sessions_combined_num_pages_views.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009307861328125, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.330985Z", "completed_at": "2020-01-30T16:41:09.338106Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.338242Z", "completed_at": "2020-01-30T16:41:09.339770Z"}]}, {"node": {"name": "not_null_phoenix_sessions_combined_session_duration_seconds", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_sessions_combined_session_duration_seconds.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_sessions_combined'), column_name='session_duration_seconds') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_sessions_combined_session_duration_seconds", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_sessions_combined_session_duration_seconds"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_sessions_combined_session_duration_seconds", "column_name": "session_duration_seconds", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere session_duration_seconds is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere session_duration_seconds is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere session_duration_seconds is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_sessions_combined_session_duration_seconds.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.00890207290649414, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.344012Z", "completed_at": "2020-01-30T16:41:09.348901Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.349105Z", "completed_at": "2020-01-30T16:41:09.350862Z"}]}, {"node": {"name": "not_null_phoenix_sessions_combined_session_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/not_null_phoenix_sessions_combined_session_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_not_null(model=ref('phoenix_sessions_combined'), column_name='session_id') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.not_null_phoenix_sessions_combined_session_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "not_null_phoenix_sessions_combined_session_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "not_null_phoenix_sessions_combined_session_id", "column_name": "session_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere session_id is null\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere session_id is null\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\nwhere session_id is null\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/not_null_phoenix_sessions_combined_session_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.008510351181030273, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.354313Z", "completed_at": "2020-01-30T16:41:09.359940Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.360117Z", "completed_at": "2020-01-30T16:41:09.361181Z"}]}, {"node": {"name": "unique_phoenix_sessions_combined_event_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_phoenix_sessions_combined_event_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('phoenix_sessions_combined'), column_name='event_id') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.unique_phoenix_sessions_combined_event_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_phoenix_sessions_combined_event_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_phoenix_sessions_combined_event_id", "column_name": "event_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        event_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\n    where event_id is not null\n    group by event_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_phoenix_sessions_combined_event_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.0077190399169921875, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.363853Z", "completed_at": "2020-01-30T16:41:09.368552Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.368685Z", "completed_at": "2020-01-30T16:41:09.369781Z"}]}, {"node": {"name": "unique_phoenix_sessions_combined_session_id", "resource_type": "test", "package_name": "ds_dbt", "root_path": "/Users/mrich/projects/quasar/quasar/dbt", "path": "schema_test/unique_phoenix_sessions_combined_session_id.sql", "original_file_path": "models/phoenix_events/schema.yml", "raw_sql": "{{ config(severity='ERROR') }}{{ test_unique(model=ref('phoenix_sessions_combined'), column_name='session_id') }}", "refs": [["phoenix_sessions_combined"]], "sources": [], "depends_on": {"nodes": ["model.ds_dbt.phoenix_sessions_combined"], "macros": []}, "unique_id": "test.ds_dbt.unique_phoenix_sessions_combined_session_id", "empty": false, "fqn": ["ds_dbt", "schema_test", "unique_phoenix_sessions_combined_session_id"], "tags": ["schema"], "config": {"enabled": true, "materialized": "view", "severity": "ERROR", "tags": [], "pre-hook": [], "post-hook": [], "vars": {}, "persist_docs": {}, "column_types": {}, "quoting": {}}, "schema": "public", "database": "quasar_prod_warehouse", "alias": "unique_phoenix_sessions_combined_session_id", "column_name": "session_id", "columns": {}, "description": "", "compiled": true, "compiled_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        session_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\n    where session_id is not null\n    group by session_id\n    having count(*) > 1\n\n) validation_errors\n\n", "extra_ctes_injected": true, "extra_ctes": [], "injected_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        session_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\n    where session_id is not null\n    group by session_id\n    having count(*) > 1\n\n) validation_errors\n\n", "wrapped_sql": "\n\n\n\nselect count(*)\nfrom (\n\n    select\n        session_id\n\n    from \"quasar_prod_warehouse\".\"public\".\"phoenix_sessions_combined\"\n    where session_id is not null\n    group by session_id\n    having count(*) > 1\n\n) validation_errors\n", "build_path": "../../docs/compiled/ds_dbt/schema_test/unique_phoenix_sessions_combined_session_id.sql"}, "error": null, "skip": false, "status": null, "fail": null, "warn": null, "execution_time": 0.009264707565307617, "thread_id": "Thread-1", "timing": [{"name": "compile", "started_at": "2020-01-30T16:41:09.374096Z", "completed_at": "2020-01-30T16:41:09.379981Z"}, {"name": "execute", "started_at": "2020-01-30T16:41:09.380141Z", "completed_at": "2020-01-30T16:41:09.381312Z"}]}], "generated_at": "2020-01-30T16:41:09.447718Z", "elapsed_time": 1.9998610019683838}